/* CSS Variables for theming */
:root {
  /* Define standard theme transition */
  --theme-transition-duration: 0.2s; /* Adjust time as desired */
  --theme-transition-timing: ease; /* Adjust timing function as desired */

  /* Base colors - Updated for Light Theme */
  --primary-rgb: 86, 18, 244; /* Based on light --clr-primary-a0 */
  --secondary-rgb: 107, 55, 218; /* Based on light --clr-primary-a20 */
  --accent-rgb: 98, 40, 231; /* Based on light --clr-primary-a10 */
  /* Keep functional colors */
  --error-rgb: 239, 68, 68; 
  --success-rgb: 34, 197, 94; 
  --warning-rgb: 245, 158, 11; 
  --info-rgb: 6, 182, 212; 
  
  /* Font settings */
  --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  --code-font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
  
  /* Light theme variables - APPLYING NEW PALETTE */
  --light-bg: #ffffff; /* --clr-surface-a0 */
  --light-chat-bg: #ffffff; /* --clr-surface-a0 */
  --light-sidebar-bg: #ececec; /* --clr-surface-tonal-a0 */
  --light-text: #000000; /* --clr-dark-a0 */
  --light-secondary-text: #7c59b4; /* --clr-primary-a50 */
  --light-border: #e1e1e1; /* --clr-surface-a20 */
  --border-pronounced-light: #d3d3d3; /* --clr-surface-a30 - New */
  --light-input-bg: #ffffff; /* --clr-surface-a0 */
  --light-button-bg: transparent; /* --clr-primary-a0 */
  --light-button-hover: #6228e7; /* --clr-primary-a10 */
  --light-button-text: #ffffff; /* --clr-light-a0 */
  --light-message-user-bg: rgba(var(--primary-rgb), 0.08); /* Keep primary alpha blend */
  --light-message-assistant-bg: #f0f0f0; /* --clr-surface-a10 */
  --light-code-bg: #ececec; /* --clr-surface-tonal-a10 */
  --light-settings-bg: #ececec; /* --clr-surface-tonal-a0 */
  --light-hover: rgba(var(--primary-rgb), 0.05); /* Keep primary alpha blend */
  --light-scroll-track: #f0f0f0; /* --clr-surface-a10 */
  --light-scroll-thumb: #d3d3d3; /* --clr-surface-a30 */
  --light-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -2px rgba(0, 0, 0, 0.04); /* Adjusted alpha */
  --light-toggle-bg: #d3d3d3; /* --clr-surface-a30 */
  --light-toggle-button: #ffffff; /* --clr-light-a0 */
  --light-card-bg: #ffffff; /* --clr-surface-a0 */
  --light-gradient-primary: linear-gradient(135deg, rgb(var(--primary-rgb)), rgb(var(--secondary-rgb)));
  --light-gradient-accent: linear-gradient(135deg, rgb(var(--secondary-rgb)), rgb(var(--accent-rgb)));
  --light-dropdown-bg: linear-gradient(180deg, rgba(var(--primary-rgb), 0.02), rgba(var(--primary-rgb), 0.01));
  --light-selected-item-bg: rgba(var(--primary-rgb), 0.08); /* Keep primary alpha blend */
  --light-tag-bg: rgba(var(--primary-rgb), 0.05); /* Keep primary alpha blend */
  --light-model-icon-bg: #6228e7; /* --clr-primary-a10 */
  --light-slider-track-bg: #d3d3d3; /* --clr-surface-a30 */
  --light-slider-thumb-bg: var(--light-button-bg); /* Use button color */
  --light-elevated-bg: #f5f5f5; /* Slightly off-white for elevated components - NEW */
  
  /* Dark theme variables - APPLYING NEW PALETTE */
  --dark-bg: #121212; /* --clr-surface-a0 */
  --dark-chat-bg: #282828; /* --clr-surface-a10 */
  --dark-sidebar-bg: #171717; /* --clr-surface-tonal-a0 */
  --dark-text: #ffffff; /* --clr-light-a0 */
  --dark-secondary-text: #8b8b8b; /* --clr-surface-a50 */
  --dark-border: #3f3f3f; /* --clr-surface-a20 */
  --border-pronounced-dark: #575757; /* --clr-surface-a30 - New */
  --dark-input-bg: #282828; /* --clr-surface-a10 */
  --dark-button-bg: transparent; /* --clr-primary-a0 */
  --dark-button-hover: #6ba8a3; /* --clr-primary-a10 */
  --dark-button-text: #000000; /* --clr-dark-a0 */
  --dark-message-user-bg: rgba(87, 157, 152, 0.1); /* Use Dark Primary RGB */
  --dark-message-assistant-bg: #2f3333; /* --clr-surface-tonal-a10 */
  --dark-code-bg: #121212; /* --clr-surface-a0 */
  --dark-settings-bg: #282828; /* --clr-surface-a10 */
  --dark-hover: rgba(87, 157, 152, 0.05); /* Use Dark Primary RGB */
  --dark-scroll-track: #282828; /* --clr-surface-a10 */
  --dark-scroll-thumb: #575757; /* --clr-surface-a30 */
  /* Updated shadow to use darker base */
  --dark-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -2px rgba(0, 0, 0, 0.4);
  --dark-toggle-bg: #3f3f3f; /* --clr-surface-a20 */
  --dark-toggle-button: #ffffff; /* --clr-light-a0 */
  --dark-card-bg: #282828; /* --clr-surface-a10 */
  /* Update gradients to use new primary/secondary/accent */
  --dark-gradient-primary: linear-gradient(135deg, rgb(87, 157, 152), rgb(126, 178, 174)); /* Use Dark RGBs */
  --dark-gradient-accent: linear-gradient(135deg, rgb(126, 178, 174), rgb(107, 168, 163)); /* Use Dark RGBs */
  --dark-dropdown-bg: linear-gradient(180deg, rgba(87, 157, 152, 0.03), rgba(87, 157, 152, 0.01)); /* Use Dark Primary RGB */
  --dark-selected-item-bg: rgba(87, 157, 152, 0.1); /* Use Dark Primary RGB */
  --dark-tag-bg: rgba(87, 157, 152, 0.08); /* Use Dark Primary RGB */
  --dark-model-icon-bg: #6ba8a3; /* --clr-primary-a10 */
  --dark-slider-track-bg: #575757; /* --clr-surface-a30 */
  --dark-slider-thumb-bg: var(--dark-button-bg); /* Use button color */
  --dark-elevated-bg: #333333; /* Slightly lighter than chat-bg for elevated components - NEW */
  
  /* Color palette for theming */
  --gray-750: #313131;
  --gray-800: #292929;
  --gray-900: #1e1e1e;
  
  /* Simplified sidebar styling */
  --dark-sidebar-text: #ededed;
  --dark-sidebar-icon: #a4a4a4;

  /* Add CSS variable for RGB version of primary color for opacity control */
  --primary-color-rgb: 0, 123, 255; /* Default blue */
}

/* Apply theme based on body class and system preferences */
@media (prefers-color-scheme: light) {
  :root {
    color-scheme: light;
  }
}

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
  }
}

body.light-mode {
  --bg: var(--light-bg);
  --chat-bg: var(--light-chat-bg);
  --elevated-bg: var(--light-elevated-bg); /* NEW MAPPING */
  --sidebar-bg: var(--light-sidebar-bg);
  --text: var(--light-text);
  --secondary-text: var(--light-secondary-text);
  --border: var(--light-border);
  --border-pronounced: var(--border-pronounced-light); /* Add mapping */
  --input-bg: var(--light-input-bg);
  --button-bg: var(--light-button-bg);
  --button-hover: var(--light-button-hover);
  --button-text: var(--light-button-text);
  --message-user-bg: var(--light-message-user-bg);
  --message-assistant-bg: var(--light-message-assistant-bg);
  --code-bg: var(--light-code-bg);
  --settings-bg: var(--light-settings-bg);
  --hover: var(--light-hover);
  --scroll-track: var(--light-scroll-track);
  --scroll-thumb: var(--light-scroll-thumb);
  --shadow: var(--light-shadow);
  --toggle-bg: var(--light-toggle-bg);
  --toggle-button: var(--light-toggle-button);
  --status-online: var(--light-status-online);
  --status-offline: var(--light-status-offline);
  --card-bg: var(--light-card-bg);
  --gradient-primary: var(--light-gradient-primary);
  --gradient-accent: var(--light-gradient-accent);
  --dropdown-bg: var(--light-dropdown-bg);
  --selected-item-bg: var(--light-selected-item-bg);
  --tag-bg: var(--light-tag-bg);
  --model-icon-bg: var(--light-model-icon-bg);
  --button-bg-rgb: var(--primary-rgb);
  --slider-track-bg: var(--light-slider-track-bg);
  --slider-thumb-bg: var(--light-slider-thumb-bg);
  color-scheme: light;
}

body.dark-mode {
  --bg: var(--dark-bg);
  --chat-bg: var(--dark-chat-bg);
  --elevated-bg: var(--dark-elevated-bg); /* NEW MAPPING */
  --sidebar-bg: var(--dark-sidebar-bg);
  --sidebar-text: var(--dark-sidebar-text);
  --sidebar-icon: var(--dark-sidebar-icon);
  --text: var(--dark-text);
  --secondary-text: var(--dark-secondary-text);
  --border: var(--dark-border);
  --border-pronounced: var(--border-pronounced-dark); /* Add mapping */
  --input-bg: var(--dark-input-bg);
  --button-bg: var(--dark-button-bg);
  --button-hover: var(--dark-button-hover);
  --button-text: var(--dark-button-text);
  --message-user-bg: var(--dark-message-user-bg);
  --message-assistant-bg: var(--dark-message-assistant-bg);
  --code-bg: var(--dark-code-bg);
  --settings-bg: var(--dark-settings-bg);
  --hover: var(--dark-hover);
  --scroll-track: var(--dark-scroll-track);
  --scroll-thumb: var(--dark-scroll-thumb);
  --shadow: var(--dark-shadow);
  --toggle-bg: var(--dark-toggle-bg);
  --toggle-button: var(--dark-toggle-button);
  --status-online: var(--dark-status-online);
  --status-offline: var(--dark-status-offline);
  --card-bg: var(--dark-card-bg);
  --gradient-primary: var(--dark-gradient-primary);
  --gradient-accent: var(--dark-gradient-accent);
  --dropdown-bg: var(--dark-dropdown-bg);
  --selected-item-bg: var(--dark-selected-item-bg);
  --tag-bg: var(--dark-tag-bg);
  --model-icon-bg: var(--dark-model-icon-bg);
  --button-bg-rgb: var(--primary-rgb);
  --slider-track-bg: var(--dark-slider-track-bg);
  --slider-thumb-bg: var(--dark-slider-thumb-bg);
  color-scheme: dark;
}

/* Base styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  height: 100%;
  font-family: var(--font-family);
  font-size: 16px;
  line-height: 1.5;
  color: var(--text);
  background-color: var(--bg);
}

body {
  overflow-x: hidden;
  /* Apply standard transition to body colors */
  transition: background-color var(--theme-transition-duration) var(--theme-transition-timing),
              color var(--theme-transition-duration) var(--theme-transition-timing);
}

#root {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* Apply consistent transitions to common elements */
button, input, textarea, select, header, footer, aside, main {
  /* Apply ONLY to color/background/border unless element needs others */
  /* Note: This might be overridden by more specific component styles */
  transition: background-color var(--theme-transition-duration) var(--theme-transition-timing),
              color var(--theme-transition-duration) var(--theme-transition-timing),
              border-color var(--theme-transition-duration) var(--theme-transition-timing);
}

svg {
   /* Apply transitions to fill/stroke for icons */
  transition: fill var(--theme-transition-duration) var(--theme-transition-timing),
              stroke var(--theme-transition-duration) var(--theme-transition-timing);
}

/* Scrollbars */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--scroll-track);
}

::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb);
  border-radius: 8px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--secondary-text);
}

/* Loading screen */
.loading-screen {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background-color: var(--bg);
  color: var(--text);
}

.loading-screen p {
  margin-top: 1rem;
  font-size: 1.2rem;
  font-weight: 500;
}

/* Common utility classes */
.card {
  background-color: var(--card-bg);
  border-radius: 0.5rem;
  box-shadow: var(--shadow);
  overflow: hidden;
  /* Combine existing transitions with theme transitions */
  transition: transform 0.2s ease, 
              box-shadow var(--theme-transition-duration) var(--theme-transition-timing),
              background-color var(--theme-transition-duration) var(--theme-transition-timing);
}

.card:hover {
  transform: translateY(-2px);
  /* Update shadow transition to match (optional, could be faster/slower) */
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); 
}

.button-primary {
  background: var(--button-bg);
  color: var(--button-text);
  border: none;
  border-radius: 0.375rem;
  padding: 0.5rem 1rem;
  font-weight: 500;
  cursor: pointer;
  /* Update transition */
  transition: background-color var(--theme-transition-duration) var(--theme-transition-timing),
              color var(--theme-transition-duration) var(--theme-transition-timing);
}

.button-primary:hover {
  background: var(--button-hover);
}

.gradient-text {
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  display: inline-block;
  /* Add transition for potential color changes if applicable */
  transition: color var(--theme-transition-duration) var(--theme-transition-timing);
}

/* Lightweight pulse loader for ultra fast initial rendering */
.pulse-loader {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: rgba(var(--primary-color-rgb, 0, 123, 255), 0.2);
  animation: pulse 1.2s cubic-bezier(0, 0.2, 0.8, 1) infinite;
}

@keyframes pulse {
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(var(--primary-color-rgb, 0, 123, 255), 0.5);
  }
  
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 10px rgba(var(--primary-color-rgb, 0, 123, 255), 0);
  }
  
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(var(--primary-color-rgb, 0, 123, 255), 0);
  }
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #121212;
    --primary-color-rgb: 66, 165, 245;
  }
} 