const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-NlB2RBNk.js","assets/react-syntax-highlighter-rQgkRzde.js","assets/framework--d6mMtcS.js","assets/vendor-prop-types-CQCrBv66.js","assets/vendor-property-information-Bqm-w5SU.js","assets/vendor-unist-util-visit-CYGNQgsi.js","assets/vendor-hast-util-whitespace-Be7pfeyt.js","assets/vendor-space-separated-tokens-DO9R2H4G.js","assets/vendor-comma-separated-tokens-Df9LWCSf.js","assets/vendor-style-to-object-CxqtyswF.js","assets/vendor-inline-style-parser-D8_Zmyug.js","assets/vendor-bail-gCPcOVbC.js","assets/vendor-extend-tA__Z666.js","assets/vendor-is-plain-obj-DeEdtHJQ.js","assets/vendor-trough-zzWXwSIo.js","assets/vendor-vfile-C7KQ_xuq.js","assets/vendor-unist-util-stringify-position-CvSG9YTx.js","assets/vendor-mdast-util-from-markdown-PW8VQj7v.js","assets/vendor-micromark-CT66Bizv.js","assets/vendor-micromark-util-combine-extensions-D0lltlzb.js","assets/vendor-micromark-util-chunked-3k3e5hER.js","assets/vendor-micromark-factory-space-BuxqzSY_.js","assets/vendor-micromark-core-commonmark-CKya-DGW.js","assets/vendor-micromark-util-classify-character-xDUcR3gG.js","assets/vendor-micromark-util-resolve-all-U8fstr8o.js","assets/vendor-decode-named-character-reference-C-EXV6yX.js","assets/vendor-micromark-util-subtokenize-BM4KMHVE.js","assets/vendor-micromark-factory-destination-B-3w5mMe.js","assets/vendor-micromark-factory-label-Cod0aiTB.js","assets/vendor-micromark-factory-title-CWRBDKzc.js","assets/vendor-micromark-factory-whitespace-YzaPLww_.js","assets/vendor-micromark-util-normalize-identifier-CzKtq1sx.js","assets/vendor-micromark-util-html-tag-name-DbKNfynz.js","assets/vendor-micromark-util-decode-numeric-character-reference-qd59qYy-.js","assets/vendor-micromark-util-decode-string-DNFV-wAX.js","assets/vendor-mdast-util-to-string-Ck87fAyN.js","assets/vendor-remark-rehype-CW3p_88l.js","assets/vendor-trim-lines-C03Dth7Y.js","assets/vendor-mdast-util-definitions-BogZMgA2.js","assets/vendor-unist-util-generated-Bn-sJWM5.js","assets/vendor-babel-n5kzynIe.js","assets/refractor-core-CPle4AHE.js","assets/vendor-hastscript-DOIm2S7G.js","assets/vendor-xtend-Bx3ujlEJ.js","assets/vendor-hast-util-parse-selector-j38Qpric.js","assets/vendor-parse-entities-D4Dt79sy.js","assets/vendor-character-entities-legacy-C0-9l53Z.js","assets/vendor-character-reference-invalid-CXGT0v6U.js","assets/vendor-is-decimal-J_H0W03Q.js","assets/vendor-is-hexadecimal-B1wGafkN.js","assets/vendor-is-alphanumerical-z9x4zqKd.js","assets/vendor-is-alphabetical-Y2TTKzg7.js","assets/refractor-markup-CNhLbOs4.js","assets/refractor-css-D0oVyIz7.js","assets/refractor-clike-CzH4jCHD.js","assets/refractor-javascript-Bcy-LhR2.js","assets/index-DAcZPh8S.js","assets/utils-DyE1HC8q.js","assets/index-CZXmR9Lt.css","assets/useProfilePicture-Ba4pQBF9.js","assets/index-CvDBG7j3.css","assets/index-C-FADSuX.js","assets/index-CUkdfWPK.css","assets/index-JkVf9C-T.js","assets/index-oS9gNJ4d.css","assets/index-BGlFvna6.js","assets/index-Cwv11h56.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./react-syntax-highlighter-rQgkRzde.js";import{r as t,j as r,C as n}from"./framework--d6mMtcS.js";import{c as a,d as o,u as i,e as s}from"./index-DAcZPh8S.js";import{t as l}from"./utils-DyE1HC8q.js";import"./vendor-babel-n5kzynIe.js";import"./refractor-core-CPle4AHE.js";import"./vendor-hastscript-DOIm2S7G.js";import"./vendor-xtend-Bx3ujlEJ.js";import"./vendor-hast-util-parse-selector-j38Qpric.js";import"./vendor-parse-entities-D4Dt79sy.js";import"./vendor-character-entities-legacy-C0-9l53Z.js";import"./vendor-character-reference-invalid-CXGT0v6U.js";import"./vendor-is-decimal-J_H0W03Q.js";import"./vendor-is-hexadecimal-B1wGafkN.js";import"./vendor-is-alphanumerical-z9x4zqKd.js";import"./vendor-is-alphabetical-Y2TTKzg7.js";import"./refractor-markup-CNhLbOs4.js";import"./refractor-css-D0oVyIz7.js";import"./refractor-clike-CzH4jCHD.js";import"./refractor-javascript-Bcy-LhR2.js";import"./vendor-prop-types-CQCrBv66.js";import"./vendor-property-information-Bqm-w5SU.js";import"./vendor-unist-util-visit-CYGNQgsi.js";import"./vendor-hast-util-whitespace-Be7pfeyt.js";import"./vendor-space-separated-tokens-DO9R2H4G.js";import"./vendor-comma-separated-tokens-Df9LWCSf.js";import"./vendor-style-to-object-CxqtyswF.js";import"./vendor-inline-style-parser-D8_Zmyug.js";import"./vendor-bail-gCPcOVbC.js";import"./vendor-extend-tA__Z666.js";import"./vendor-is-plain-obj-DeEdtHJQ.js";import"./vendor-trough-zzWXwSIo.js";import"./vendor-vfile-C7KQ_xuq.js";import"./vendor-unist-util-stringify-position-CvSG9YTx.js";import"./vendor-mdast-util-from-markdown-PW8VQj7v.js";import"./vendor-micromark-CT66Bizv.js";import"./vendor-micromark-util-combine-extensions-D0lltlzb.js";import"./vendor-micromark-util-chunked-3k3e5hER.js";import"./vendor-micromark-factory-space-BuxqzSY_.js";import"./vendor-micromark-core-commonmark-CKya-DGW.js";import"./vendor-micromark-util-classify-character-xDUcR3gG.js";import"./vendor-micromark-util-resolve-all-U8fstr8o.js";import"./vendor-decode-named-character-reference-C-EXV6yX.js";import"./vendor-micromark-util-subtokenize-BM4KMHVE.js";import"./vendor-micromark-factory-destination-B-3w5mMe.js";import"./vendor-micromark-factory-label-Cod0aiTB.js";import"./vendor-micromark-factory-title-CWRBDKzc.js";import"./vendor-micromark-factory-whitespace-YzaPLww_.js";import"./vendor-micromark-util-normalize-identifier-CzKtq1sx.js";import"./vendor-micromark-util-html-tag-name-DbKNfynz.js";import"./vendor-micromark-util-decode-numeric-character-reference-qd59qYy-.js";import"./vendor-micromark-util-decode-string-DNFV-wAX.js";import"./vendor-mdast-util-to-string-Ck87fAyN.js";import"./vendor-remark-rehype-CW3p_88l.js";import"./vendor-trim-lines-C03Dth7Y.js";import"./vendor-mdast-util-definitions-BogZMgA2.js";import"./vendor-unist-util-generated-Bn-sJWM5.js";const c=()=>{const{chatHistory:e,isWaitingForResponse:r,error:n,currentMessageMetrics:l}=a(),{sendMessage:c,clearChat:m,downloadChatHistory:d}=o(),{selectedModel:u}=i(),{settings:_}=s(),p=t.useCallback((async(t,r=null)=>{const n=!!r;if(((Array.isArray(t)?t.map((e=>"text"===e.type?e.text:"")).join(" ").trim():t)||Array.isArray(t))&&u)try{if(n){const n=r.uniqueId||r.id||r.timestamp,a=e.findIndex((e=>[e.uniqueId,e.id,e.timestamp].includes(n)||"string"==typeof e.content&&e.content===r.content&&"user"===e.role));if(-1===a)return;const o=Array.isArray(t)?t:{type:"text",text:t};Array.isArray(o),o.uniqueId=n,await c(o,a)}else{const e=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,r=Array.isArray(t)?t.map((t=>({...t,uniqueId:e}))):t;Array.isArray(r)||(r.uniqueId=e),await c(r)}}catch(a){}}),[u,c,e]);return{chatHistory:e,isWaitingForResponse:r,error:n,metrics:l,selectedModel:u,settings:_,handleSendMessage:p,resetChat:m,downloadChatHistory:d}},m={ChatContainer:"_ChatContainer_ybmuu_1",ChatContainer__modelButtonContainer:"_ChatContainer__modelButtonContainer_ybmuu_33",ChatContainer__chatArea:"_ChatContainer__chatArea_ybmuu_51",ChatContainer__scrollContainer:"_ChatContainer__scrollContainer_ybmuu_73",ChatContainer__scrollInner:"_ChatContainer__scrollInner_ybmuu_95","ChatContainer--activeChat":"_ChatContainer--activeChat_ybmuu_113","ChatContainer--emptyChat":"_ChatContainer--emptyChat_ybmuu_123",ChatContainer__emptyChatContent:"_ChatContainer__emptyChatContent_ybmuu_137",ChatContainer__greetingMessage:"_ChatContainer__greetingMessage_ybmuu_153",ChatContainer__inputArea:"_ChatContainer__inputArea_ybmuu_195",ChatContainer__staticInputArea:"_ChatContainer__staticInputArea_ybmuu_207",ChatContainer__fixedInputArea:"_ChatContainer__fixedInputArea_ybmuu_221",ChatContainer__inputControlsWrapper:"_ChatContainer__inputControlsWrapper_ybmuu_247",ChatContainer__inputPlaceholder:"_ChatContainer__inputPlaceholder_ybmuu_339",ChatContainer__chatAreaWrapper:"_ChatContainer__chatAreaWrapper_ybmuu_355",ChatContainer__scrollToBottomButton:"_ChatContainer__scrollToBottomButton_ybmuu_373","ChatContainer--editingMode":"_ChatContainer--editingMode_ybmuu_515"},d=t.lazy((()=>e((()=>import("./index-NlB2RBNk.js").then((e=>e.i))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60])))),u=t.lazy((()=>e((()=>import("./index-C-FADSuX.js")),__vite__mapDeps([61,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,62])))),_=t.lazy((()=>e((()=>import("./index-JkVf9C-T.js")),__vite__mapDeps([63,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,64])))),p=t.lazy((()=>e((()=>import("./index-BGlFvna6.js")),__vite__mapDeps([65,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,56,1,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,57,58,66])))),C=t.memo((({selectedModel:e,isLoadingModels:a,toggleModelSelector:o,onToggleSettings:i,isSidebarOpen:s,isSettingsOpen:C,isModelSelectorOpen:h})=>{const{chatHistory:j,isWaitingForResponse:v,error:y,metrics:f,selectedModel:g,handleSendMessage:x}=c(),[b,k]=t.useState(null),A=t.useRef(null),M=t.useRef(null),S=t.useRef(null),E=j.length>0,[I,N]=t.useState(!1),T=t.useRef(v),w=t.useCallback(((e="smooth")=>{M.current&&(M.current.scrollTo({top:M.current.scrollHeight,behavior:e}),N(!1))}),[]),L=t.useCallback((()=>{const e=M.current;if(!e)return;const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;N(!t)}),[]),R=t.useMemo((()=>l(L,100)),[L]),H=t.useCallback((()=>{setTimeout((()=>{const e=document.querySelector("textarea."+m.chatInput)||document.querySelector('textarea[aria-label="Chat message input"]');e&&e.focus()}),100)}),[]);t.useEffect((()=>{H()}),[H]),t.useEffect((()=>{if(T.current&&!v){!(s||C||h||b)&&H()}T.current=v}),[v,s,C,h,b,H]),t.useEffect((()=>{const e=M.current;if(e)return R(),e.addEventListener("scroll",R,{passive:!0}),()=>{e.removeEventListener("scroll",R),R.cancel()}}),[R]),t.useEffect((()=>{const e=M.current;if(!e)return;const t=()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;N(!t)};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)}),[I]),t.useEffect((()=>{const e=setTimeout((()=>R()),100);return()=>clearTimeout(e)}),[j,R]);const $=null==e?void 0:e.name,B=null==e?void 0:e.provider,P=t.useCallback((e=>{v||(k(e),setTimeout((()=>{document.querySelector(`.${m.ChatContainer__fixedInputArea}`)}),100))}),[v]),W=t.useCallback((()=>{k(null)}),[]);t.useEffect((()=>{v&&b&&k(null)}),[v,b]);const q=`${m.ChatContainer} ${E?m["ChatContainer--activeChat"]:m["ChatContainer--emptyChat"]} ${b?m["ChatContainer--editingMode"]:""}`,z=e=>{const n=!E;return r.jsxs(r.Fragment,{children:[e&&!b&&r.jsx(t.Suspense,{fallback:r.jsx("div",{className:m.globalMetricsPlaceholder}),children:r.jsx(_,{metrics:null==f?void 0:f.session,modelName:null==g?void 0:g.name})}),r.jsx("div",{className:m.ChatContainer__inputControlsWrapper,children:r.jsx(t.Suspense,{fallback:r.jsx("div",{className:m.ChatContainer__inputPlaceholder}),children:r.jsx(u,{isInitialChat:n,onSendMessage:x,disabled:v,selectedModel:g,editingMessage:b,onCancelEdit:W,isStreaming:v,toggleModelSelector:o,onFocus:H})})})]})};return t.useEffect((()=>{if(!j.length)return;const e=S.current;if(!e)return;const t=()=>{const t=e.querySelector(`.${m.ChatContainer__fixedInputArea}`);if(t){const r=t.getBoundingClientRect().height;e.style.setProperty("--input-height",`${r}px`)}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[j]),r.jsxs("div",{ref:S,className:q,children:[r.jsx("div",{className:m.ChatContainer__modelButtonContainer,children:r.jsx(t.Suspense,{fallback:null,children:r.jsx(p,{selectedModelName:$,providerName:B,onClick:o,disabled:a})})}),r.jsxs("div",{className:m.ChatContainer__chatAreaWrapper,children:[r.jsx("div",{className:m.ChatContainer__chatArea,children:E?r.jsx("div",{className:m.ChatContainer__scrollContainer,ref:M,children:r.jsx("div",{className:m.ChatContainer__scrollInner,children:r.jsx(t.Suspense,{fallback:r.jsx("div",{className:m.messagePlaceholder}),children:r.jsx(d,{ref:A,messages:j,error:y,onEditMessage:P})})})}):r.jsxs("div",{className:m.ChatContainer__emptyChatContent,children:[r.jsxs("div",{className:m.ChatContainer__greetingMessage,children:[r.jsx("h2",{children:"Welcome to AI Chat!"}),r.jsx("p",{children:"Select a model above and start your conversation."})]}),r.jsx("div",{className:`${m.ChatContainer__inputArea} ${m.ChatContainer__staticInputArea}`,children:z(!1)})]})}),I&&E&&r.jsx("button",{className:m.ChatContainer__scrollToBottomButton,onClick:()=>w("smooth"),"aria-label":"Scroll to bottom",title:"Scroll to bottom",children:r.jsx(n,{size:20})})]}),E&&r.jsx("div",{className:`${m.ChatContainer__inputArea} ${m.ChatContainer__fixedInputArea}`,children:z(!0)})]})}));C.displayName="ChatContainer";export{C as default};
//# sourceMappingURL=index-y8PTocmW.js.map
