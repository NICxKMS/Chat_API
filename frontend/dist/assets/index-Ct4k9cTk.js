const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MarkdownRenderer-D0YqQJdC.js","assets/framework--d6mMtcS.js","assets/vendor-prop-types-CQCrBv66.js","assets/vendor-property-information-Bqm-w5SU.js","assets/vendor-unist-util-visit-CYGNQgsi.js","assets/vendor-hast-util-whitespace-Be7pfeyt.js","assets/vendor-space-separated-tokens-DO9R2H4G.js","assets/vendor-comma-separated-tokens-Df9LWCSf.js","assets/vendor-style-to-object-CxqtyswF.js","assets/vendor-inline-style-parser-D8_Zmyug.js","assets/vendor-bail-gCPcOVbC.js","assets/vendor-extend-tA__Z666.js","assets/vendor-is-plain-obj-DeEdtHJQ.js","assets/vendor-trough-zzWXwSIo.js","assets/vendor-vfile-C7KQ_xuq.js","assets/vendor-unist-util-stringify-position-CvSG9YTx.js","assets/vendor-mdast-util-from-markdown-PW8VQj7v.js","assets/vendor-micromark-CT66Bizv.js","assets/vendor-micromark-util-combine-extensions-D0lltlzb.js","assets/vendor-micromark-util-chunked-3k3e5hER.js","assets/vendor-micromark-factory-space-BuxqzSY_.js","assets/vendor-micromark-core-commonmark-CKya-DGW.js","assets/vendor-micromark-util-classify-character-xDUcR3gG.js","assets/vendor-micromark-util-resolve-all-U8fstr8o.js","assets/vendor-decode-named-character-reference-C-EXV6yX.js","assets/vendor-micromark-util-subtokenize-BM4KMHVE.js","assets/vendor-micromark-factory-destination-B-3w5mMe.js","assets/vendor-micromark-factory-label-Cod0aiTB.js","assets/vendor-micromark-factory-title-CWRBDKzc.js","assets/vendor-micromark-factory-whitespace-YzaPLww_.js","assets/vendor-micromark-util-normalize-identifier-CzKtq1sx.js","assets/vendor-micromark-util-html-tag-name-DbKNfynz.js","assets/vendor-micromark-util-decode-numeric-character-reference-qd59qYy-.js","assets/vendor-micromark-util-decode-string-DNFV-wAX.js","assets/vendor-mdast-util-to-string-Ck87fAyN.js","assets/vendor-remark-rehype-CW3p_88l.js","assets/vendor-trim-lines-C03Dth7Y.js","assets/vendor-mdast-util-definitions-BogZMgA2.js","assets/vendor-unist-util-generated-Bn-sJWM5.js","assets/markdown-D1yvlx7T.js","assets/vendor-micromark-extension-gfm-682ExYu2.js","assets/vendor-micromark-extension-gfm-autolink-literal-BvFU5B_M.js","assets/vendor-micromark-extension-gfm-footnote-BMow1uuh.js","assets/vendor-micromark-extension-gfm-strikethrough-DVLz2FyR.js","assets/vendor-micromark-extension-gfm-table-CFIISn7F.js","assets/vendor-micromark-extension-gfm-task-list-item-D0FwQzEf.js","assets/vendor-mdast-util-gfm-CITVQFii.js","assets/vendor-mdast-util-gfm-autolink-literal-C2X8JGT0.js","assets/vendor-ccount-D181NsKZ.js","assets/vendor-mdast-util-gfm-footnote-50hpPH2M.js","assets/vendor-mdast-util-to-markdown-DDpRuohb.js","assets/vendor-mdast-util-gfm-strikethrough-D1nk-Ogr.js","assets/vendor-mdast-util-gfm-table-0sjzvTgl.js","assets/vendor-markdown-table-BkNFvfyU.js","assets/vendor-mdast-util-gfm-task-list-item-BpXst3II.js","assets/vendor-micromark-extension-math-BZxG7iC7.js","assets/katex-Bv4lR2hj.js","assets/vendor-hast-util-from-html-isomorphic-ClxbSYim.js","assets/vendor-hast-util-from-dom-zfHBih9y.js","assets/vendor-web-namespaces-Cmx0dTen.js","assets/vendor-unist-util-visit-parents-DG4pNz9n.js","assets/vendor-unist-util-is-C5Jwnfs7.js","assets/vendor-hast-util-to-text-DoIMjO1v.js","assets/vendor-hast-util-is-element-Djts9Lmg.js","assets/vendor-unist-util-find-after-CQmqb-to.js","assets/katex-DVneG3Rq.css","assets/vendor-mdast-util-math-DMJofKo6.js","assets/vendor-longest-streak-D3RFUi6d.js","assets/vendor-node-emoji-DYLhFgjT.js","assets/vendor-sindresorhus-DhiBqWQZ.js","assets/vendor-emojilib-CaOLuxD8.js","assets/vendor-char-regex-C1IE5pyU.js","assets/vendor-emoticon-Cw9dttd9.js","assets/vendor-mdast-util-find-and-replace-0DgvSoin.js","assets/StreamingMessage-Bk4GS9U5.js","assets/react-syntax-highlighter-rQgkRzde.js","assets/vendor-babel-n5kzynIe.js","assets/refractor-core-CPle4AHE.js","assets/vendor-hastscript-DOIm2S7G.js","assets/vendor-xtend-Bx3ujlEJ.js","assets/vendor-hast-util-parse-selector-j38Qpric.js","assets/vendor-parse-entities-D4Dt79sy.js","assets/vendor-character-entities-legacy-C0-9l53Z.js","assets/vendor-character-reference-invalid-CXGT0v6U.js","assets/vendor-is-decimal-J_H0W03Q.js","assets/vendor-is-hexadecimal-B1wGafkN.js","assets/vendor-is-alphanumerical-z9x4zqKd.js","assets/vendor-is-alphabetical-Y2TTKzg7.js","assets/refractor-markup-CNhLbOs4.js","assets/refractor-css-D0oVyIz7.js","assets/refractor-clike-CzH4jCHD.js","assets/refractor-javascript-Bcy-LhR2.js","assets/formatters-KC3wC9z7.js","assets/formatters-BBWjJVcj.css","assets/index-DAcZPh8S.js","assets/utils-DyE1HC8q.js","assets/index-CZXmR9Lt.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./react-syntax-highlighter-rQgkRzde.js";import{j as s,r,A as t,G as a,l as o,f as i,m as n,n as m,o as l,p as c}from"./framework--d6mMtcS.js";import{c as d,s as p}from"./formatters-KC3wC9z7.js";import{f as u}from"./index-NlB2RBNk.js";import"./vendor-babel-n5kzynIe.js";import"./refractor-core-CPle4AHE.js";import"./vendor-hastscript-DOIm2S7G.js";import"./vendor-xtend-Bx3ujlEJ.js";import"./vendor-hast-util-parse-selector-j38Qpric.js";import"./vendor-parse-entities-D4Dt79sy.js";import"./vendor-character-entities-legacy-C0-9l53Z.js";import"./vendor-character-reference-invalid-CXGT0v6U.js";import"./vendor-is-decimal-J_H0W03Q.js";import"./vendor-is-hexadecimal-B1wGafkN.js";import"./vendor-is-alphanumerical-z9x4zqKd.js";import"./vendor-is-alphabetical-Y2TTKzg7.js";import"./refractor-markup-CNhLbOs4.js";import"./refractor-css-D0oVyIz7.js";import"./refractor-clike-CzH4jCHD.js";import"./refractor-javascript-Bcy-LhR2.js";import"./vendor-prop-types-CQCrBv66.js";import"./vendor-property-information-Bqm-w5SU.js";import"./vendor-unist-util-visit-CYGNQgsi.js";import"./vendor-hast-util-whitespace-Be7pfeyt.js";import"./vendor-space-separated-tokens-DO9R2H4G.js";import"./vendor-comma-separated-tokens-Df9LWCSf.js";import"./vendor-style-to-object-CxqtyswF.js";import"./vendor-inline-style-parser-D8_Zmyug.js";import"./vendor-bail-gCPcOVbC.js";import"./vendor-extend-tA__Z666.js";import"./vendor-is-plain-obj-DeEdtHJQ.js";import"./vendor-trough-zzWXwSIo.js";import"./vendor-vfile-C7KQ_xuq.js";import"./vendor-unist-util-stringify-position-CvSG9YTx.js";import"./vendor-mdast-util-from-markdown-PW8VQj7v.js";import"./vendor-micromark-CT66Bizv.js";import"./vendor-micromark-util-combine-extensions-D0lltlzb.js";import"./vendor-micromark-util-chunked-3k3e5hER.js";import"./vendor-micromark-factory-space-BuxqzSY_.js";import"./vendor-micromark-core-commonmark-CKya-DGW.js";import"./vendor-micromark-util-classify-character-xDUcR3gG.js";import"./vendor-micromark-util-resolve-all-U8fstr8o.js";import"./vendor-decode-named-character-reference-C-EXV6yX.js";import"./vendor-micromark-util-subtokenize-BM4KMHVE.js";import"./vendor-micromark-factory-destination-B-3w5mMe.js";import"./vendor-micromark-factory-label-Cod0aiTB.js";import"./vendor-micromark-factory-title-CWRBDKzc.js";import"./vendor-micromark-factory-whitespace-YzaPLww_.js";import"./vendor-micromark-util-normalize-identifier-CzKtq1sx.js";import"./vendor-micromark-util-html-tag-name-DbKNfynz.js";import"./vendor-micromark-util-decode-numeric-character-reference-qd59qYy-.js";import"./vendor-micromark-util-decode-string-DNFV-wAX.js";import"./vendor-mdast-util-to-string-Ck87fAyN.js";import"./vendor-remark-rehype-CW3p_88l.js";import"./vendor-trim-lines-C03Dth7Y.js";import"./vendor-mdast-util-definitions-BogZMgA2.js";import"./vendor-unist-util-generated-Bn-sJWM5.js";import"./index-DAcZPh8S.js";import"./utils-DyE1HC8q.js";import"./useProfilePicture-Ba4pQBF9.js";const j=r.lazy((()=>e((()=>import("./MarkdownRenderer-D0YqQJdC.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]))));function h({children:e}){return s.jsx(r.Suspense,{fallback:s.jsx("div",{children:e}),children:s.jsx(j,{children:e})})}const _=r.lazy((()=>e((()=>import("./StreamingMessage-Bk4GS9U5.js")),__vite__mapDeps([74,75,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]))));let g;const v=({message:e,isStreaming:j=!1,onEditMessage:v=null,overrideContent:M=null,avatarUrl:C=null})=>{const x=null!=M?M:e.content,[f,k]=r.useState(!1),y=r.useMemo((()=>"assistant"===e.role?x:d(x)),[x,e.role]),[N,b]=r.useState(y);r.useEffect((()=>{b(y)}),[y]),r.useEffect((()=>{if("assistant"!==e.role||"string"!=typeof x||"undefined"==typeof Worker)return;const s=e.timestamp,r=("undefined"==typeof Worker||g||(g=new Worker(new URL("/assets/texProcessor-CcAyMu_F.js",import.meta.url),{type:"module"})),g),t=e=>{e.data.id===s&&(e.data.success?b(e.data.data):b(x))};return r.addEventListener("message",t),r.postMessage({id:s,content:x}),()=>{r.removeEventListener("message",t)}}),[x,e.role,e.timestamp]);const z=r.useMemo((()=>{switch(e.role){case"user":return C?s.jsx("img",{src:C,alt:"User avatar",className:p.ChatMessage__avatarImg}):null;case"assistant":return s.jsx(o,{size:16,className:p.ChatMessage__icon});case"system":return s.jsx(a,{size:16,className:p.ChatMessage__icon});case"error":return s.jsx(t,{size:16,className:p.ChatMessage__icon});default:return null}}),[e.role,C]),T=r.useMemo((()=>{switch(e.role){case"user":return p["ChatMessage--user"];case"assistant":return p["ChatMessage--assistant"];case"system":return p["ChatMessage--system"];case"error":return p["ChatMessage--error"];default:return""}}),[e.role]),I=r.useMemo((()=>!("assistant"!==e.role||!e.metrics)),[e.role,e.metrics]),E=r.useCallback((()=>{const s="string"==typeof e.content?e.content:Array.isArray(e.content)?e.content.filter((e=>"text"===e.type)).map((e=>e.text)).join("\n"):"";navigator.clipboard.writeText(s).then((()=>{k(!0),setTimeout((()=>k(!1)),2e3)}))}),[e.content]),w=r.useMemo((()=>s.jsx("button",{className:`${p.ChatMessage__copyMessageButton} ${"assistant"===e.role&&I?p.ChatMessage__copyMessageButtonInMetrics:p.ChatMessage__copyMessageButtonBottomRight}`,onClick:E,"aria-label":"Copy message",title:"Copy message",children:f?s.jsx(i,{size:16}):s.jsx(n,{size:16})})),[E,e.role,I,f]),S=r.useCallback((()=>{v&&v(e)}),[v,e]),L=r.useMemo((()=>"user"===e.role?s.jsx("button",{className:p.ChatMessage__editMessageButton,onClick:S,"aria-label":"Edit message",title:"Edit message",children:s.jsx(m,{size:16})}):null),[e.role,S]);return s.jsxs("div",{className:p.ChatMessage+" "+T,children:[s.jsxs("div",{className:p.ChatMessage__body,children:[z&&s.jsx("div",{className:p.ChatMessage__avatar,children:z}),s.jsxs("div",{className:p.ChatMessage__contentWrapper,children:[s.jsx(r.Suspense,{fallback:null,children:s.jsx("div",{className:p.ChatMessage__content,children:"assistant"===e.role?s.jsx(_,{content:N,isStreaming:j}):s.jsx(h,{children:N})})}),"assistant"===e.role&&(()=>{if(!I||!e.metrics)return null;const r=j,{elapsedTime:a,tokenCount:i,tokensPerSecond:n,timeToFirstToken:m,promptTokens:d,completionTokens:h,totalTokens:_,finishReason:g}=e.metrics;return null!=a||null!=i||null!=n||null!=m||null!=d||null!=h||null!=_||null!=g?s.jsxs("div",{className:p.ChatMessage__metricsContainer,children:[null!=m&&0!==m&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(l,{size:14,className:p.ChatMessage__metricIcon}),"First Token: ",u(m)]}),null!=a&&0!==a&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(l,{size:14,className:p.ChatMessage__metricIcon}),"Total Time: ",u(a)]}),null!=i&&0!==i&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(o,{size:14,className:p.ChatMessage__metricIcon}),"Tokens: ",i]}),null!=d&&0!==d&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(o,{size:14,className:p.ChatMessage__metricIcon}),"Prompt: ",d]}),null!=h&&0!==h&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(o,{size:14,className:p.ChatMessage__metricIcon}),"Completion: ",h]}),null!=_&&0!==_&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(o,{size:14,className:p.ChatMessage__metricIcon}),"Total: ",_]}),null!=n&&0!==n&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(c,{size:14,className:p.ChatMessage__metricIcon}),"Speed: ",n," t/s"]}),null!=g&&""!==g&&"stop"!==g.toLowerCase()&&"unknown"!==g.toLowerCase()&&s.jsxs("span",{className:p.ChatMessage__metric,children:[s.jsx(t,{size:14,className:p.ChatMessage__metricIcon}),g]}),r&&s.jsxs("span",{className:`${p.ChatMessage__metric} ${p.ChatMessage__generatingIndicator}`,children:[s.jsx("span",{className:p.ChatMessage__generatingDot}),"Generating..."]}),w]}):null})(),"user"!==e.role&&("assistant"!==e.role||!I)&&w]})]}),"user"===e.role&&s.jsxs("div",{className:p.ChatMessage__actions,children:[L,w]})]})};v.displayName="ChatMessage";const M=r.memo(v);export{M as default};
//# sourceMappingURL=index-Ct4k9cTk.js.map
