import{r as t}from"./framework--d6mMtcS.js";import{h as e}from"./index-DAcZPh8S.js";const r=r=>{const a=`profilePicture_${r}`,[n,o]=e(a,null),[i,s]=t.useState(null),[l,u]=t.useState(!1),[f,m]=t.useState(null);return t.useEffect((()=>{let t=!0;if(!r)return s(null),void u(!1);let e=n;if(e){if("string"==typeof e){const t={data:e,timestamp:Date.now()};o(t),e=t}if(e.timestamp&&Date.now()-e.timestamp<864e5&&e.data)return s(e.data),void u(!1);o(null)}return u(!0),fetch(r).then((t=>{if(!t.ok)throw new Error(`Failed to fetch image: ${t.status}`);return t.blob()})).then((t=>new Promise(((e,r)=>{const a=new FileReader;a.onloadend=()=>e(a.result),a.onerror=r,a.readAsDataURL(t)})))).then((e=>{if(!t)return;const r={data:e,timestamp:Date.now()};o(r),s(e)})).catch((e=>{t&&m(e)})).finally((()=>{t&&u(!1)})),()=>{t=!1}}),[r,n,o]),{profilePicture:i,loading:l,error:f}};export{r as u};
//# sourceMappingURL=useProfilePicture-Ba4pQBF9.js.map
