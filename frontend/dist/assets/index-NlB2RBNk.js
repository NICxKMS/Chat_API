const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Ct4k9cTk.js","assets/react-syntax-highlighter-rQgkRzde.js","assets/framework--d6mMtcS.js","assets/vendor-prop-types-CQCrBv66.js","assets/vendor-property-information-Bqm-w5SU.js","assets/vendor-unist-util-visit-CYGNQgsi.js","assets/vendor-hast-util-whitespace-Be7pfeyt.js","assets/vendor-space-separated-tokens-DO9R2H4G.js","assets/vendor-comma-separated-tokens-Df9LWCSf.js","assets/vendor-style-to-object-CxqtyswF.js","assets/vendor-inline-style-parser-D8_Zmyug.js","assets/vendor-bail-gCPcOVbC.js","assets/vendor-extend-tA__Z666.js","assets/vendor-is-plain-obj-DeEdtHJQ.js","assets/vendor-trough-zzWXwSIo.js","assets/vendor-vfile-C7KQ_xuq.js","assets/vendor-unist-util-stringify-position-CvSG9YTx.js","assets/vendor-mdast-util-from-markdown-PW8VQj7v.js","assets/vendor-micromark-CT66Bizv.js","assets/vendor-micromark-util-combine-extensions-D0lltlzb.js","assets/vendor-micromark-util-chunked-3k3e5hER.js","assets/vendor-micromark-factory-space-BuxqzSY_.js","assets/vendor-micromark-core-commonmark-CKya-DGW.js","assets/vendor-micromark-util-classify-character-xDUcR3gG.js","assets/vendor-micromark-util-resolve-all-U8fstr8o.js","assets/vendor-decode-named-character-reference-C-EXV6yX.js","assets/vendor-micromark-util-subtokenize-BM4KMHVE.js","assets/vendor-micromark-factory-destination-B-3w5mMe.js","assets/vendor-micromark-factory-label-Cod0aiTB.js","assets/vendor-micromark-factory-title-CWRBDKzc.js","assets/vendor-micromark-factory-whitespace-YzaPLww_.js","assets/vendor-micromark-util-normalize-identifier-CzKtq1sx.js","assets/vendor-micromark-util-html-tag-name-DbKNfynz.js","assets/vendor-micromark-util-decode-numeric-character-reference-qd59qYy-.js","assets/vendor-micromark-util-decode-string-DNFV-wAX.js","assets/vendor-mdast-util-to-string-Ck87fAyN.js","assets/vendor-remark-rehype-CW3p_88l.js","assets/vendor-trim-lines-C03Dth7Y.js","assets/vendor-mdast-util-definitions-BogZMgA2.js","assets/vendor-unist-util-generated-Bn-sJWM5.js","assets/vendor-babel-n5kzynIe.js","assets/refractor-core-CPle4AHE.js","assets/vendor-hastscript-DOIm2S7G.js","assets/vendor-xtend-Bx3ujlEJ.js","assets/vendor-hast-util-parse-selector-j38Qpric.js","assets/vendor-parse-entities-D4Dt79sy.js","assets/vendor-character-entities-legacy-C0-9l53Z.js","assets/vendor-character-reference-invalid-CXGT0v6U.js","assets/vendor-is-decimal-J_H0W03Q.js","assets/vendor-is-hexadecimal-B1wGafkN.js","assets/vendor-is-alphanumerical-z9x4zqKd.js","assets/vendor-is-alphabetical-Y2TTKzg7.js","assets/refractor-markup-CNhLbOs4.js","assets/refractor-css-D0oVyIz7.js","assets/refractor-clike-CzH4jCHD.js","assets/refractor-javascript-Bcy-LhR2.js","assets/formatters-KC3wC9z7.js","assets/formatters-BBWjJVcj.css","assets/index-DAcZPh8S.js","assets/utils-DyE1HC8q.js","assets/index-CZXmR9Lt.css","assets/useProfilePicture-Ba4pQBF9.js","assets/index-bdAgy8-2.js","assets/index-D61JzonZ.css","assets/firebaseConfig-BCNoxiWp.js","assets/firebase-7FRIWL1f.js","assets/vendor-idb-CFK1l90-.js","assets/vendor-tslib-Cv3dJDD7.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./react-syntax-highlighter-rQgkRzde.js";import{r as t,j as s}from"./framework--d6mMtcS.js";import{c as a}from"./index-DAcZPh8S.js";import{u as r}from"./useProfilePicture-Ba4pQBF9.js";const i="_MessageList_16h6v_1",n="_MessageList__messageRow_16h6v_47",l="_MessageList__imageContainer_16h6v_245",o="_MessageList__messageImage_16h6v_269",u="_MessageList__clickableImage_16h6v_291";function m(e){return e?e<1e3?`${e}ms`:`${(e/1e3).toFixed(1)}s`:"0.0s"}const _=t.lazy((()=>e((()=>import("./index-Ct4k9cTk.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61])))),c=t.lazy((()=>e((()=>import("./index-bdAgy8-2.js")),__vite__mapDeps([62,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,63])))),g=t.forwardRef((({messages:m,error:g,onEditMessage:d},h)=>{const{isWaitingForResponse:p}=a(),[f,x]=t.useState(null),{profilePicture:j}=r(f),[v,y]=t.useState((()=>localStorage.getItem("idToken"))),[A,E]=t.useState(null);t.useEffect((()=>{if(!v)return;let t;return(async()=>{const{getFirebaseAuth:s}=await e((async()=>{const{getFirebaseAuth:e}=await import("./firebaseConfig-BCNoxiWp.js");return{getFirebaseAuth:e}}),__vite__mapDeps([64,65,66,67])),{onAuthStateChanged:a}=await e((async()=>{const{onAuthStateChanged:e}=await import("./firebase-7FRIWL1f.js");return{onAuthStateChanged:e}}),__vite__mapDeps([65,66,67])),r=s();r&&(t=a(r,(async e=>{if(e){x(e.photoURL||null);try{const t=await e.getIdToken();y(t)}catch{y(null)}}else x(null),y(null)})))})(),()=>{t&&t()}}),[v]);const S=t.useMemo((()=>{const e=[...m];if(g){const t=Date.now();e.push({id:t,role:"error",content:g,timestamp:t})}return e}),[m,g]);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:i,ref:h,"aria-live":"polite","aria-relevant":"additions text",children:S.map(((e,a)=>{var r;const i=a===S.length-1,m="assistant"===e.role&&i&&p&&!(null==(r=e.metrics)?void 0:r.isComplete),{images:c,text:g}=function(e){if(!e)return{images:[],text:e};if(Array.isArray(e)){const{images:t,texts:s}=e.reduce(((e,t)=>("image_url"===t.type?e.images.push({url:t.image_url.url,alt:t.image_url.alt||t.alt||null}):"text"===t.type&&e.texts.push(t.text),e)),{images:[],texts:[]});return{images:t,text:s.join(" ")}}return{images:[],text:e}}(e.content),h=e.timestamp?`${e.role}-${e.timestamp}-${a}`:`${e.role}-${a}`;return s.jsxs("div",{className:n,children:["user"===e.role&&c.length>0&&s.jsx("div",{className:l,children:c.map(((e,t)=>s.jsx("img",{src:e.url,alt:e.alt||`Uploaded image ${t+1}`,className:`${o} ${u}`,onClick:()=>{return t=e.url,void E(t);var t}},`${h}-img-${t}`)))}),(g||"user"!==e.role)&&s.jsx(t.Suspense,{fallback:null,children:s.jsx(_,{message:e,overrideContent:g||void 0,isStreaming:m,onEditMessage:"user"===e.role?d:void 0,avatarUrl:"user"===e.role&&v?j||f:void 0})})]},h)}))}),A&&s.jsx(t.Suspense,{fallback:null,children:s.jsx(c,{src:A,alt:"Image preview",onClose:()=>{E(null)}})})]})}));g.displayName="MessageList";const d=t.memo(g),h=Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"}));export{m as f,h as i};
//# sourceMappingURL=index-NlB2RBNk.js.map
