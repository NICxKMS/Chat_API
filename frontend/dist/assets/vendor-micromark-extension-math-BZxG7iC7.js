import{f as e}from"./vendor-micromark-factory-space-BuxqzSY_.js";import"./katex-Bv4lR2hj.js";function t(e){return null!==e&&e<-2}const n={tokenize:function(n,i,u){const c=this,o=c.events[c.events.length-1],a=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0;let l=0;return function(e){return n.enter("mathFlow"),n.enter("mathFlowFence"),n.enter("mathFlowFenceSequence"),m(e)};function m(t){return 36===t?(n.consume(t),l++,m):l<2?u(t):(n.exit("mathFlowFenceSequence"),e(n,s,"whitespace")(t))}function s(e){return null===e||t(e)?h(e):(n.enter("mathFlowFenceMeta"),n.enter("chunkString",{contentType:"string"}),f(e))}function f(e){return null===e||t(e)?(n.exit("chunkString"),n.exit("mathFlowFenceMeta"),h(e)):36===e?u(e):(n.consume(e),f)}function h(e){return n.exit("mathFlowFence"),c.interrupt?i(e):n.attempt(r,p,g)(e)}function p(e){return n.attempt({tokenize:w,partial:!0},g,x)(e)}function x(t){return(a?e(n,F,"linePrefix",a+1):F)(t)}function F(e){return null===e?g(e):t(e)?n.attempt(r,p,g)(e):(n.enter("mathFlowValue"),d(e))}function d(e){return null===e||t(e)?(n.exit("mathFlowValue"),F(e)):(n.consume(e),d)}function g(e){return n.exit("mathFlow"),i(e)}function w(n,r,i){let u=0;return e(n,(function(e){return n.enter("mathFlowFence"),n.enter("mathFlowFenceSequence"),o(e)}),"linePrefix",c.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function o(t){return 36===t?(u++,n.consume(t),o):u<l?i(t):(n.exit("mathFlowFenceSequence"),e(n,a,"whitespace")(t))}function a(e){return null===e||t(e)?(n.exit("mathFlowFence"),r(e)):i(e)}}},concrete:!0},r={tokenize:function(e,t,n){const r=this;return function(n){if(null===n)return t(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};function i(e){let n=(e||{}).singleDollarTextMath;return null==n&&(n=!0),{tokenize:function(e,r,i){let u,c,o=0;return function(t){return e.enter("mathText"),e.enter("mathTextSequence"),a(t)};function a(t){return 36===t?(e.consume(t),o++,a):o<2&&!n?i(t):(e.exit("mathTextSequence"),l(t))}function l(n){return null===n?i(n):36===n?(c=e.enter("mathTextSequence"),u=0,s(n)):32===n?(e.enter("space"),e.consume(n),e.exit("space"),l):t(n)?(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),l):(e.enter("mathTextData"),m(n))}function m(n){return null===n||32===n||36===n||t(n)?(e.exit("mathTextData"),l(n)):(e.consume(n),m)}function s(t){return 36===t?(e.consume(t),u++,s):u===o?(e.exit("mathTextSequence"),e.exit("mathText"),r(t)):(c.type="mathTextData",m(t))}},resolve:u,previous:c}}function u(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[i][1].type="mathTextPadding",i+=2,r-=2;break}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function c(e){return 36!==e||"characterEscape"===this.events[this.events.length-1][1].type}function o(e){return{flow:{36:n},text:{36:i(e)}}}export{o as m};
//# sourceMappingURL=vendor-micromark-extension-math-BZxG7iC7.js.map
