"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["chat-container"],{57557:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(85908),l=a(89827),s=a(42379),r=a(39740),i=a(17696),o=a.n(i),c=a(44440);const d=(0,n.RZ)((()=>Promise.all([a.e("worker-bundle"),a.e("styles-daab9c0a"),a.e("styles-e96e9bea"),a.e("styles-b2c1640e"),a.e("styles-b4afe919"),a.e("styles-31743c5a"),a.e("styles-61a228d7"),a.e("styles-c388cea0"),a.e("app-large-4f064d56"),a.e("app-large-8367718c"),a.e("app-large-f55bbebb"),a.e("app-large-102ff935"),a.e("app-large-6b882012"),a.e("app-chat-ChatMessage"),a.e("common")]).then(a.bind(a,33219)))),h=(0,n.RZ)((()=>Promise.all([a.e("styles-daab9c0a"),a.e("styles-e96e9bea"),a.e("styles-b2c1640e"),a.e("styles-b4afe919"),a.e("styles-31743c5a"),a.e("styles-61a228d7"),a.e("styles-c388cea0"),a.e("large-vendor-primer"),a.e("app-chat-ChatInput")]).then(a.bind(a,6682)))),u=(0,n.RZ)((()=>Promise.all([a.e("styles-daab9c0a"),a.e("styles-e96e9bea"),a.e("styles-b2c1640e"),a.e("styles-b4afe919"),a.e("styles-31743c5a"),a.e("styles-61a228d7"),a.e("styles-c388cea0"),a.e("common")]).then(a.bind(a,12813)))),C=(0,n.RZ)((()=>Promise.all([a.e("styles-daab9c0a"),a.e("styles-e96e9bea"),a.e("styles-b2c1640e"),a.e("styles-b4afe919"),a.e("styles-31743c5a"),a.e("styles-61a228d7"),a.e("styles-c388cea0"),a.e("model-selector-button")]).then(a.bind(a,28032)))),m=(0,n.ph)((e=>{let{selectedModel:t,isLoadingModels:a,toggleModelSelector:i,onToggleSettings:m,isSidebarOpen:p,isSettingsOpen:b,isModelSelectorOpen:v}=e;const{chatHistory:g,isWaitingForResponse:y,error:_,metrics:A,selectedModel:f,handleSendMessage:Y}=(0,l.e)(),[N,M]=(0,n.J0)(null),S=(0,n.li)(null),k=(0,n.li)(null),$=(0,n.li)(null),I=g.length>0,[J,T]=(0,n.J0)(!1),E=(0,n.li)(y),F=(0,n.hb)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";k.current&&(k.current.scrollTo({top:k.current.scrollHeight,behavior:e}),T(!1))}),[]),P=(0,n.hb)((()=>{const e=k.current;if(!e)return;const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;T(!t)}),[]),w=(0,n.Kr)((()=>o()(P,100)),[P]),D=(0,n.hb)((()=>{setTimeout((()=>{const e=document.querySelector("textarea."+r.A.chatInput)||document.querySelector('textarea[aria-label="Chat message input"]');e&&e.focus()}),100)}),[]);(0,n.vJ)((()=>{D()}),[D]),(0,n.vJ)((()=>{E.current&&!y&&!(p||b||v||N)&&D(),E.current=y}),[y,p,b,v,N,D]),(0,n.vJ)((()=>{const e=k.current;if(e)return w(),e.addEventListener("scroll",w,{passive:!0}),()=>{e.removeEventListener("scroll",w),w.cancel()}}),[w]),(0,n.vJ)((()=>{const e=k.current;if(!e)return;const t=()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;T(!t)};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)}),[J]),(0,n.vJ)((()=>{const e=setTimeout((()=>w()),100);return()=>clearTimeout(e)}),[g,w]);const L=null==t?void 0:t.name,x=null==t?void 0:t.provider,H=(0,n.hb)((e=>{y||(M(e),setTimeout((()=>{document.querySelector(`.${r.A.ChatContainer__fixedInputArea}`)}),100))}),[y]),R=(0,n.hb)((()=>{M(null)}),[]);(0,n.vJ)((()=>{y&&N&&M(null)}),[y,N]);const q=`${r.A.ChatContainer} ${I?r.A["ChatContainer--activeChat"]:r.A["ChatContainer--emptyChat"]} ${N?r.A["ChatContainer--editingMode"]:""}`,B=e=>{const t=!I;return(0,c.FD)(c.FK,{children:[e&&!N&&(0,c.Y)(n.tY,{fallback:(0,c.Y)("div",{className:r.A.globalMetricsPlaceholder}),children:(0,c.Y)(u,{metrics:null==A?void 0:A.session,modelName:null==f?void 0:f.name})}),(0,c.Y)("div",{className:r.A.ChatContainer__inputControlsWrapper,children:(0,c.Y)(n.tY,{fallback:(0,c.Y)("div",{className:r.A.ChatContainer__inputPlaceholder}),children:(0,c.Y)(h,{isInitialChat:t,onSendMessage:Y,disabled:y,selectedModel:f,editingMessage:N,onCancelEdit:R,isStreaming:y,toggleModelSelector:i,onFocus:D})})})]})};return(0,n.vJ)((()=>{if(!g.length)return;const e=$.current;if(!e)return;const t=()=>{const t=e.querySelector(`.${r.A.ChatContainer__fixedInputArea}`);if(t){const a=t.getBoundingClientRect().height;e.style.setProperty("--input-height",`${a}px`)}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[g]),(0,c.FD)("div",{ref:$,className:q,children:[(0,c.Y)("div",{className:r.A.ChatContainer__modelButtonContainer,children:(0,c.Y)(n.tY,{fallback:null,children:(0,c.Y)(C,{selectedModelName:L,providerName:x,onClick:i,disabled:a})})}),(0,c.FD)("div",{className:r.A.ChatContainer__chatAreaWrapper,children:[(0,c.Y)("div",{className:r.A.ChatContainer__chatArea,children:I?(0,c.Y)("div",{className:r.A.ChatContainer__scrollContainer,ref:k,children:(0,c.Y)("div",{className:r.A.ChatContainer__scrollInner,children:(0,c.Y)(n.tY,{fallback:(0,c.Y)("div",{className:r.A.messagePlaceholder}),children:(0,c.Y)(d,{ref:S,messages:g,error:_,onEditMessage:H})})})}):(0,c.FD)("div",{className:r.A.ChatContainer__emptyChatContent,children:[(0,c.FD)("div",{className:r.A.ChatContainer__greetingMessage,children:[(0,c.Y)("h2",{children:"Welcome to AI Chat!"}),(0,c.Y)("p",{children:"Select a model above and start your conversation."})]}),(0,c.Y)("div",{className:`${r.A.ChatContainer__inputArea} ${r.A.ChatContainer__staticInputArea}`,children:B(!1)})]})}),J&&I&&(0,c.Y)("button",{className:r.A.ChatContainer__scrollToBottomButton,onClick:()=>F("smooth"),"aria-label":"Scroll to bottom",title:"Scroll to bottom",children:(0,c.Y)(s.D3D,{size:20})})]}),I&&(0,c.Y)("div",{className:`${r.A.ChatContainer__inputArea} ${r.A.ChatContainer__fixedInputArea}`,children:B(!0)})]})}));m.displayName="ChatContainer";const p=m}}]);
//# sourceMappingURL=chat-container.de84391c9a.chunk.v1_9_5.js.map