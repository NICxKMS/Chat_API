"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["app-large-4f064d56"],{16473:(e,r,t)=>{t.d(r,{A:()=>i,O:()=>d});var o=t(85908),a=t(98096),n=t(1681),s=t(44440);const l=(0,o.q6)(),i=()=>{const e=(0,o.NT)(l);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:r}=e;const[i,d]=(0,o.J0)(null),[c,f]=(0,o.J0)(null),[m,p]=(0,o.J0)(!1),[,u,y]=(0,n.M3)("auth"),[b,v]=(0,o.J0)(null),[h,g]=(0,o.J0)(!1),[_,w]=(0,o.J0)(!1),{showToast:k}=(0,a.d)();(0,o.vJ)((()=>{m?u():y()}),[m,u,y]);const P=(0,o.hb)((async()=>{g(!0)}),[g]),T=(0,o.hb)((async()=>{if(!_)return;const{getFirebaseAuth:e}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("firebase-auth")]).then(t.bind(t,71752)),{signOut:r}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("firebase-auth")]).then(t.bind(t,2660)),o=e();if(!o){const e="Firebase not initialized.";return v(e),void k({type:"error",message:e})}try{await r(o)}catch(a){const e=a.message||"Failed to logout.";v(e),k({type:"error",message:e})}}),[_,v,k]);(0,o.vJ)((()=>{let e=null;const r=()=>{w(!0),o()},o=async()=>{p(!0);const{getFirebaseAuth:r}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("firebase-auth")]).then(t.bind(t,71752)),{onAuthStateChanged:o}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("firebase-auth")]).then(t.bind(t,2660)),a=r();a?e=o(a,(async e=>{if(d(e),e)try{const t=await e.getIdToken();f(t);try{localStorage.setItem("idToken",t)}catch(r){}v(null),g(!1)}catch(o){const e="Failed to get authentication token.";v(e),k({type:"error",message:e}),f(null);const{signOut:r}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("firebase-auth")]).then(t.bind(t,2660));await r(a)}else{f(null);try{localStorage.removeItem("idToken")}catch(r){}g(!1)}p(!1)})):p(!1)};return window.addEventListener("firebaseInitialized",r),()=>{window.removeEventListener("firebaseInitialized",r),"function"==typeof e&&e()}}),[k]);const C=(0,o.Kr)((()=>({currentUser:i,idToken:c,loading:m,error:b,login:P,logout:T,isAuthenticated:!!i&&!!c,isLoggingIn:h,setIsLoggingIn:g,isFirebaseInitialized:_})),[i,c,m,b,P,T,h,g,_]);return(0,s.Y)(l.Provider,{value:C,children:r})}},33804:(e,r,t)=>{t.d(r,{P:()=>i,h:()=>d});var o=t(85908),a=t(69643),n=t(66883),s=t(44440);const l=(0,o.q6)(),i=()=>{const e=(0,o.NT)(l);if(void 0===e)throw new Error("useChatState must be used within a ChatStateProvider");return e},d=e=>{let{children:r}=e;const{chatHistory:t,chatHistoryRef:i}=(0,a.m)(),{isWaitingForResponse:d,error:c}=(0,n.A)(),f=(0,o.Kr)((()=>({chatHistory:t,chatHistoryRef:i,isWaitingForResponse:d,error:c})),[t,i,d,c]);return(0,s.Y)(l.Provider,{value:f,children:r})}},54860:(e,r,t)=>{t.d(r,{n:()=>v,r:()=>b});var o=t(85908),a=t(69817),n=t(35406),s=t(21344),l=t(16473),i=t(69643),d=t(66883),c=t(72378),f=t(16594),m=t(93827),p=t(98096),u=t(44440);const y=(0,o.q6)(),b=()=>{const e=(0,o.NT)(y);if(void 0===e)throw new Error("useChatControl must be used within a ChatControlProvider");return e},v=e=>{let{children:r}=e;const t=(0,o.li)(null),{apiUrl:b}=(0,a.g)(),{selectedModel:v}=(0,n.fn)(),{settings:h,getModelAdjustedSettings:g}=(0,s.t)(),{idToken:_}=(0,l.A)(),{chatHistoryRef:w,setChatHistory:k,addMessageToHistory:P}=(0,i.m)(),{setIsWaitingForResponse:T,setError:C}=(0,d.A)(),{resetPerformanceMetrics:j,startPerformanceTimer:x,setTokenMetricsForLastMessage:A}=(0,c.B)(),{streamMessageWithFetch:I,stopStreaming:E}=(0,f.$)(),{showToast:L}=(0,p.d)(),R=(0,o.hb)((e=>e&&e.provider&&e.id?`${e.provider}/${e.id}`:null),[]),S=(0,o.hb)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const o="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)+Date.now().toString(36);t.current=o;const a=null!==r&&Number.isInteger(r)&&r>=0;if(h.streaming)return I(e,a?r:null);if(!e||!v)return C("Please enter a message and select a model"),null;const n=R(v);if(!n)return C("Invalid model selection"),null;let s;a?k((t=>{const o=t.slice(0,r),a=t[r];return s={...a,content:e},[...o,s]})):s=P("user",e);const l=Date.now();T(!0),C(null);try{var i,d,c,f,p,u,y;const e=g(v),r=w.current.map((e=>{let{metrics:r,...t}=e;return t}));!e.systemPrompt||r.length&&"system"===r[0].role||r.unshift({role:"system",content:e.systemPrompt,timestamp:Date.now()-1}),r.push(s);const t={requestId:o,model:n,messages:r,temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty};j(),x();const a={"Content-Type":"application/json",Accept:"application/json"};_&&(a.Authorization=`Bearer ${_}`);const h=await(0,m.J)(new URL("/api/chat/completions",b).toString(),{method:"POST",headers:a,body:JSON.stringify(t)});if(!h.ok){let e=`API error: ${h.status}`;try{var A;const r=await h.json();e=(null==r||null===(A=r.error)||void 0===A?void 0:A.message)||(null==r?void 0:r.message)||e}catch{}throw new Error(e)}const k=await h.json();if(null!==(i=k.error)&&void 0!==i&&i.message||"error"===k.finishReason){var E,L,S,M,N,O,F;const e=(null===(E=k.error)||void 0===E?void 0:E.message)||"Error occurred during generation";C(e);const r=k.usage||{},t=null!==(L=null!==(S=r.promptTokens)&&void 0!==S?S:r.prompt_tokens)&&void 0!==L?L:0,o=null!==(M=null!==(N=r.completionTokens)&&void 0!==N?N:r.completion_tokens)&&void 0!==M?M:0,a=null!==(O=null!==(F=r.totalTokens)&&void 0!==F?F:r.total_tokens)&&void 0!==O?O:o,n=Date.now(),s=n-l,i={startTime:l,endTime:n,elapsedTime:s,tokenCount:o,tokensPerSecond:s?Math.round(o/(s/1e3)*10)/10:null,isComplete:!0,timeToFirstToken:null,promptTokens:t,completionTokens:o,totalTokens:a,finishReason:k.finishReason||"error",error:!0};return P("assistant",e,i),null}const T=k.content||"No Response returned",I=k.usage||{},R=null!==(d=null!==(c=I.promptTokens)&&void 0!==c?c:I.prompt_tokens)&&void 0!==d?d:0,D=null!==(f=null!==(p=I.completionTokens)&&void 0!==p?p:I.completion_tokens)&&void 0!==f?f:0,Y=null!==(u=null!==(y=I.totalTokens)&&void 0!==y?y:I.total_tokens)&&void 0!==u?u:D,z=Date.now(),H=z-l,J=D>0?D:0,U={startTime:l,endTime:z,elapsedTime:H,tokenCount:J,tokensPerSecond:H?Math.round(J/(H/1e3)*10)/10:null,isComplete:!0,timeToFirstToken:null,promptTokens:R,completionTokens:D,totalTokens:Y,finishReason:k.finishReason};return P("assistant",T,U),T}catch(D){return C(D.message),P("assistant",D.message||"An error occurred"),null}finally{t.current=null,T(!1)}}),[b,v,h.streaming,g,_,w,k,P,I,R,j,x,C,T]),M=(0,o.hb)((async()=>(E(),!0)),[E]),N=(0,o.hb)((()=>{k([]),j()}),[k,j]),O=(0,o.hb)((()=>{w.current.length>0&&N()}),[w,N]),F=(0,o.hb)((()=>{0!==w.current.length&&window.confirm("Are you sure you want to clear the current chat?")&&(N(),L({type:"info",message:"Chat has been cleared"}))}),[w,N,L]),D=(0,o.hb)((()=>{const e=w.current;if(e.length)try{const r=e.map((e=>{const r="user"===e.role?"You":"assistant"===e.role?(null==v?void 0:v.name)||"Assistant":e.role;let t="";return"string"==typeof e.content?t=e.content:Array.isArray(e.content)&&(t=e.content.map((e=>"text"===e.type?e.text:"[Image]")).join("\n")),`${r}: ${t}\n`})).join(""),t=new Blob([r],{type:"text/plain"}),o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download=`chat_${(new Date).toISOString().replace(/:/g,"-")}.txt`,document.body.appendChild(a),a.click(),L({type:"success",message:"Chat downloaded successfully"}),document.body.removeChild(a),URL.revokeObjectURL(o)}catch(r){L({type:"error",message:"Failed to download chat. Please try again."})}}),[w,v,L]),Y=(0,o.hb)((e=>{}),[]),z=(0,o.Kr)((()=>({sendMessage:S,stopGeneration:M,addMessageToHistory:P,clearChat:N,newChat:O,resetChat:F,downloadChat:D,getOrCreateConversation:Y,setTokenMetricsForLastMessage:A})),[S,M,P,N,O,F,D,Y,A]);return(0,u.Y)(y.Provider,{value:z,children:r})}},66883:(e,r,t)=>{t.d(r,{A:()=>l,g:()=>i});var o=t(85908),a=t(1681),n=t(44440);const s=(0,o.q6)(),l=()=>{const e=(0,o.NT)(s);if(void 0===e)throw new Error("useChatStatus must be used within a ChatStatusProvider");return e},i=e=>{let{children:r}=e;const[t,l]=(0,o.J0)(!1),[i,d]=(0,o.J0)(null),[,c,f]=(0,a.M3)("chat");(0,o.vJ)((()=>{t?c():f()}),[t,c,f]);const m=(0,o.Kr)((()=>({isWaitingForResponse:t,setIsWaitingForResponse:l,error:i,setError:d})),[t,i]);return(0,n.Y)(s.Provider,{value:m,children:r})}},69643:(e,r,t)=>{t.d(r,{U:()=>l,m:()=>s});var o=t(85908),a=t(44440);const n=(0,o.q6)(),s=()=>{const e=(0,o.NT)(n);if(void 0===e)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return e},l=e=>{let{children:r}=e;const[t,s]=(0,o.J0)([]),l=(0,o.li)([]),i=(0,o.hb)((e=>{s((r=>{const t="function"==typeof e?e(r):e;return l.current=t,t}))}),[]),d=(0,o.hb)(((e,r,t)=>{const o=Date.now(),a={id:o,role:e,content:r,timestamp:o,...t&&{metrics:t}};return i((e=>[...e,a])),a}),[i]),c=(0,o.hb)((e=>{i((r=>{const t=r.length-1;if(t<0)return r;const o=r[t];if("assistant"!==o.role||o.content===e)return r;const a=[...r];return a[t]={...o,content:e},a}))}),[i]),f=(0,o.Kr)((()=>({chatHistory:t,chatHistoryRef:l,setChatHistory:i,addMessageToHistory:d,updateChatWithContent:c})),[t,i,d,c]);return(0,a.Y)(n.Provider,{value:f,children:r})}},69817:(e,r,t)=>{t.d(r,{K:()=>l,g:()=>s});var o=t(85908),a=t(44440);const n=(0,o.q6)(),s=()=>{const e=(0,o.NT)(n);if(void 0===e)throw new Error("useApi must be used within an ApiProvider");return e},l=e=>{let{children:r}=e;const[t]=(0,o.J0)("http://localhost:3000"),s=(0,o.Kr)((()=>({apiUrl:t})),[t]);return(0,a.Y)(n.Provider,{value:s,children:r})}},75360:(e,r,t)=>{t.r(r),t.d(r,{default:()=>k});var o=t(85908),a=t(16473),n=t(99928),s=t(44002),l=t(10943),i=t(1245),d=t(44440);const c={layout:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("core-layout")]).then(t.bind(t,95166)),spinner:()=>Promise.resolve().then(t.bind(t,44002))},f={chatContainer:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("chat-container")]).then(t.bind(t,57557)),chatInput:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-chat-ChatInput")]).then(t.bind(t,6682)),messageList:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("app-chat-ChatMessage"),t.e("common")]).then(t.bind(t,33219)),sidebar:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("layout-sidebar")]).then(t.bind(t,59416)),mainContent:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("layout-main")]).then(t.bind(t,38250))},m=(0,i.vL)([()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,85251)),()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,89382)),()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,86876)),()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,70102)),()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,89079))],"ui-controls"),p=(0,i.vL)([()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("features")]).then(t.bind(t,12813)),()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("features")]).then(t.bind(t,80255)),()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("features")]).then(t.bind(t,86366))],"features"),u={markdownRenderer:()=>Promise.all([t.e("katex-9241dc7c"),t.e("katex-6f17a2aa"),t.e("utils"),t.e("large-vendor-micromark-core-commonmark"),t.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),t.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),t.e("vendors-node_modules_extend_index_js-node_modules_inline-style-parser_index_js-node_modules_b-132821"),t.e("vendors-node_modules_micromark-factory-destination_index_js-node_modules_micromark-factory-la-b99e24"),t.e("vendors-node_modules_micromark_lib_parse_js-node_modules_micromark_lib_postprocess_js-node_mo-6de913"),t.e("vendors-node_modules_property-information_index_js-node_modules_property-information_lib_find-e02ac5"),t.e("vendors-node_modules_react-markdown_lib_react-markdown_js"),t.e("vendors-node_modules_remark-rehype_lib_index_js"),t.e("vendors-node_modules_space-separated-tokens_index_js-node_modules_style-to-object_index_mjs-n-286e03"),t.e("vendors-node_modules_vfile_lib_index_js"),t.e("vendors-node_modules_mdast-util-gfm_lib_index_js"),t.e("vendors-node_modules_mdast-util-to-markdown_lib_handle_inline-code_js-node_modules_mdast-util-fe523e"),t.e("vendors-node_modules_micromark-extension-gfm-autolink-literal_lib_syntax_js-node_modules_micr-143c10"),t.e("vendors-node_modules_remark-gfm_index_js"),t.e("vendors-node_modules_hast-util-from-html-isomorphic_lib_browser_js"),t.e("vendors-node_modules_hast-util-to-text_lib_index_js-node_modules_web-namespaces_index_js"),t.e("vendors-node_modules_remark-math_index_js"),t.e("heavy-markdown")]).then(t.bind(t,18623)),streamingMessage:()=>Promise.all([t.e("syntax-highlighter"),t.e("vendor-refractor-f166f706"),t.e("vendor-refractor-e13012a4"),t.e("vendor-refractor-a3ee49af"),t.e("vendor-refractor-ad9cabf8"),t.e("vendor-refractor-3dcca97d"),t.e("vendor-refractor-e7fb9445"),t.e("vendor-refractor-7927cc25"),t.e("vendor-refractor-b9bc2889"),t.e("vendor-refractor-47716238"),t.e("vendor-refractor-d5dfd146"),t.e("vendor-refractor-6072c7a0"),t.e("vendor-refractor-b8620171"),t.e("vendor-refractor-4c8050b1"),t.e("vendor-refractor-a311b4ea"),t.e("vendor-refractor-cd8e6b90"),t.e("vendor-refractor-d0c4690c"),t.e("vendor-refractor-d5760a01"),t.e("vendor-refractor-e811d444"),t.e("vendor-refractor-e0f65d05"),t.e("vendor-refractor-287bb3d1"),t.e("vendor-refractor-237489f7"),t.e("vendor-refractor-a81a7d65"),t.e("vendor-refractor-43d68cfb"),t.e("vendor-refractor-914a1695"),t.e("vendor-refractor-ba3be5d7"),t.e("vendor-refractor-9f93ebfe"),t.e("vendor-refractor-db67aad0"),t.e("vendor-refractor-25029dc1"),t.e("vendor-refractor-0ff0ca8f"),t.e("vendor-refractor-982e62b4"),t.e("vendor-refractor-fc1e4540"),t.e("vendor-refractor-37070081"),t.e("vendor-refractor-f5ea4339"),t.e("vendor-refractor-6880b3ce"),t.e("vendor-refractor-d68713e4"),t.e("vendor-refractor-6bdb02c4"),t.e("vendor-refractor-3ec14123"),t.e("vendor-refractor-afec7163"),t.e("vendor-refractor-3939e9ff"),t.e("vendor-refractor-982ce542"),t.e("vendor-refractor-5f65df01"),t.e("vendor-refractor-e3ea52e9"),t.e("vendor-refractor-72796416"),t.e("vendor-refractor-4fe07799"),t.e("vendor-refractor-00889692"),t.e("vendor-refractor-9b4721ba"),t.e("vendor-refractor-fcbddd77"),t.e("vendor-refractor-73543ba5"),t.e("vendor-refractor-dff4b716"),t.e("vendor-refractor-1fce3037"),t.e("vendor-refractor-69bdd742"),t.e("vendor-refractor-a1617118"),t.e("vendor-refractor-29bd2d4f"),t.e("vendor-refractor-aa25e9ce"),t.e("vendor-refractor-80d3e6d7"),t.e("vendor-refractor-c934ee85"),t.e("vendor-refractor-b7180c25"),t.e("vendor-refractor-ae79dce2"),t.e("vendor-refractor-f72f697c"),t.e("vendor-refractor-8c9e628c"),t.e("vendor-refractor-bb8c4fba"),t.e("vendor-refractor-1e30d89f"),t.e("vendor-refractor-18110b50"),t.e("vendor-refractor-9cfd4f54"),t.e("vendor-refractor-2c300606"),t.e("vendor-refractor-b7b7f258"),t.e("vendor-refractor-a56c4d73"),t.e("vendor-refractor-de6256ae"),t.e("vendor-refractor-b6f3a405"),t.e("vendor-refractor-58aaa442"),t.e("vendor-refractor-509a7a9e"),t.e("vendor-refractor-0e0508a9"),t.e("vendor-refractor-217b7b8a"),t.e("vendor-refractor-5034beef"),t.e("vendor-refractor-2069139d"),t.e("vendor-refractor-4ef87f2b"),t.e("vendor-refractor-1c85f667"),t.e("vendor-refractor-cc9bc6eb"),t.e("vendor-refractor-f0f0f757"),t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("app-chat-ChatMessage"),t.e("vendors-node_modules_hastscript_index_js-node_modules_parse-entities_index_js-node_modules_co-c1cec7"),t.e("common")]).then(t.bind(t,65026)),loginModal:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("vendors-node_modules_react-icons_fa_index_mjs"),t.e("vendors-node_modules_react-icons_fc_index_mjs"),t.e("vendors-node_modules_react-icons_io_index_mjs"),t.e("vendors-node_modules_react-icons_lib_index_mjs"),t.e("heavy-auth-modal")]).then(t.bind(t,32869)),imageOverlay:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("common")]).then(t.bind(t,21798)),typingIndicator:()=>Promise.all([t.e("styles-b2c1640e"),t.e("styles-31743c5a"),t.e("styles-b4afe919"),t.e("styles-88d3322f"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("heavy-typing")]).then(t.bind(t,45143))},y={firebase:()=>Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("firebase-auth")]).then(t.bind(t,71752)).then((()=>{window.dispatchEvent(new Event("firebaseInitialized"))}))},b=(0,i.vL)([()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.bind(t,51189)),()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.t.bind(t,26331,23)),()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.t.bind(t,17696,23)),()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.bind(t,54934))],"micro-bundle"),v=(0,o.RZ)(c.layout),h=(0,o.RZ)(u.loginModal),g=(0,i.CS)(),_=(0,i.qq)();function w(){const[e,r]=(0,o.J0)("initializing"),[t,n]=(0,o.J0)(new Set),[w,k]=(0,o.J0)(null),{isLoggingIn:P,setIsLoggingIn:T}=(0,a.A)();return(0,o.vJ)((()=>{let t=!1;return async function(){l.Hp.mark(l.wz.APP_START);const o=_.getStrategy();k(o);try{if(r("core"),g.startLoad("core"),await(0,i.$n)(c,{groupName:"core",timeout:o.timeout,retries:o.skipNonEssential?1:2}),t)return;if(g.endLoad("core",!0),l.Hp.mark(l.wz.IMPORTANT_COMPONENTS_LOADED),n((e=>new Set([...e,"core"]))),r("essential"),g.startLoad("essential"),await(0,i.$n)(f,{groupName:"essential",timeout:o.timeout,retries:o.skipNonEssential?1:2}),t)return;if(g.endLoad("essential",!0),n((e=>new Set([...e,"essential"]))),r("controls"),g.startLoad("ui-controls"),await(0,i.$n)(m,{groupName:"ui-controls",timeout:o.timeout,retries:1}),t)return;g.endLoad("ui-controls",!0),l.Hp.mark(l.wz.COMPONENT_LOAD),l.Hp.measure(l.l9.COMPONENT_LOAD,l.wz.APP_START,l.wz.COMPONENT_LOAD),n((e=>new Set([...e,"controls"]))),r("ready"),requestAnimationFrame((()=>{if(!t&&(l.Hp.mark(l.wz.APP_INTERACTIVE),l.Hp.measure(l.l9.TIME_TO_INTERACTIVE,l.wz.APP_START,l.wz.APP_INTERACTIVE),!o.skipNonEssential)){const e={"secondary-features":{imports:p,priority:0,options:{timeout:o.timeout}},"heavy-components":{imports:u,priority:1,options:{timeout:1.5*o.timeout}},"external-services":{imports:y,priority:2,options:{timeout:2*o.timeout}},"micro-components":{imports:b,priority:3,options:{timeout:o.timeout}}};(0,i.Oj)(e,{maxConcurrent:o.maxConcurrent,priorityDelay:o.priorityDelay,idleTimeout:o.timeout}),Object.keys(e).forEach((e=>{g.startLoad(e)}))}}))}catch(a){g.endLoad(e,!1),r("error")}}(),()=>{t=!0,l.Hp.clear()}}),[]),"ready"===e||t.has("controls"),"initializing"===e||"core"===e?(0,d.FD)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[(0,d.Y)(s.default,{size:"medium"}),(0,d.FD)("div",{style:{fontSize:"0.875rem",opacity:.7},children:["Loading ",e,"...",w&&(0,d.FD)("div",{style:{fontSize:"0.75rem",marginTop:"0.5rem"},children:["Network: ",w.effectiveType||"detecting..."]})]})]}):"error"===e?(0,d.FD)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[(0,d.Y)("div",{children:"⚠️ Loading Error"}),(0,d.Y)("button",{onClick:()=>window.location.reload(),children:"Reload App"}),!1]}):(0,d.FD)(d.FK,{children:[(0,d.Y)(o.tY,{fallback:(0,d.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:(0,d.Y)(s.default,{size:"small"})}),children:(0,d.Y)(v,{})}),P&&t.has("heavy-components")&&(0,d.Y)(o.tY,{fallback:(0,d.Y)(s.default,{size:"small"}),children:(0,d.Y)(h,{onClose:()=>T(!1)})}),!1]})}function k(){return(0,d.Y)(a.O,{children:(0,d.Y)(n.v,{children:(0,d.Y)(w,{})})})}}}]);
//# sourceMappingURL=app-large-4f064d56.59295da8e6.v1_9_0.js.map