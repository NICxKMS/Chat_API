"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["app-large-4f064d56"],{16473:(e,r,t)=>{t.d(r,{A:()=>i,O:()=>d});var a=t(85908),o=t(98096),s=t(1681),n=t(44440);const l=(0,a.q6)(),i=()=>{const e=(0,a.NT)(l);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},d=e=>{let{children:r}=e;const[i,d]=(0,a.J0)(null),[c,f]=(0,a.J0)(null),[p,b]=(0,a.J0)(!1),[,m,u]=(0,s.M3)("auth"),[y,g]=(0,a.J0)(null),[h,v]=(0,a.J0)(!1),[_,w]=(0,a.J0)(!1),{showToast:k}=(0,o.d)();(0,a.vJ)((()=>{p?m():u()}),[p,m,u]);const T=(0,a.hb)((async()=>{if(_)return!0;try{const{getFirebaseAuth:e}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("firebase-auth")]).then(t.bind(t,71752));if(e())return w(!0),!0;throw new Error("Firebase Auth could not be initialized by ensureFirebaseReady")}catch(e){return g(e.message||"Failed to initialize authentication service."),w(!1),k({type:"error",message:e.message||"Failed to initialize auth service."}),!1}}),[_,k]),P=(0,a.hb)((async()=>{v(!0),await T()}),[v,T]),C=(0,a.hb)((async()=>{if(!await T())return void k({type:"error",message:"Authentication service not ready for logout."});const{getFirebaseAuth:e}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("firebase-auth")]).then(t.bind(t,71752)),{signOut:r}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("firebase-auth")]).then(t.bind(t,2660)),a=e();if(!a){const e="Firebase not initialized for logout.";return g(e),void k({type:"error",message:e})}try{await r(a)}catch(o){const e=o.message||"Failed to logout.";g(e),k({type:"error",message:e})}}),[T,g,k]);(0,a.vJ)((()=>{let e=null;return(async()=>{if(!await T())return;b(!0);const{getFirebaseAuth:r}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("firebase-auth")]).then(t.bind(t,71752)),{onAuthStateChanged:a}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("firebase-auth")]).then(t.bind(t,2660)),o=r();o?e=a(o,(async e=>{if(d(e),e)try{const t=await e.getIdToken();f(t);try{localStorage.setItem("idToken",t)}catch(r){}g(null),v(!1)}catch(a){const e="Failed to get authentication token.";g(e),k({type:"error",message:e}),f(null);try{const{signOut:e}=await Promise.all([t.e("firebase-19f9d112"),t.e("firebase-e7e1e1be"),t.e("large-vendor-firebase"),t.e("firebase-auth")]).then(t.bind(t,2660));await e(o)}catch(s){}}else{f(null);try{localStorage.removeItem("idToken")}catch(r){}v(!1)}b(!1)})):b(!1)})(),()=>{"function"==typeof e&&e()}}),[k,T]);const A=(0,a.Kr)((()=>({currentUser:i,idToken:c,loading:p,error:y,login:P,logout:C,isAuthenticated:!!i&&!!c,isLoggingIn:h,setIsLoggingIn:v,isFirebaseReady:_,ensureFirebaseReady:T})),[i,c,p,y,P,C,h,v,_,T]);return(0,n.Y)(l.Provider,{value:A,children:r})}},33804:(e,r,t)=>{t.d(r,{P:()=>i,h:()=>d});var a=t(85908),o=t(69643),s=t(66883),n=t(44440);const l=(0,a.q6)(),i=()=>{const e=(0,a.NT)(l);if(void 0===e)throw new Error("useChatState must be used within a ChatStateProvider");return e},d=e=>{let{children:r}=e;const{chatHistory:t,chatHistoryRef:i}=(0,o.m)(),{isWaitingForResponse:d,error:c}=(0,s.A)(),f=(0,a.Kr)((()=>({chatHistory:t,chatHistoryRef:i,isWaitingForResponse:d,error:c})),[t,i,d,c]);return(0,n.Y)(l.Provider,{value:f,children:r})}},54860:(e,r,t)=>{t.d(r,{n:()=>g,r:()=>y});var a=t(85908),o=t(69817),s=t(35406),n=t(21344),l=t(16473),i=t(69643),d=t(66883),c=t(72378),f=t(16594),p=t(93827),b=t(98096),m=t(44440);const u=(0,a.q6)(),y=()=>{const e=(0,a.NT)(u);if(void 0===e)throw new Error("useChatControl must be used within a ChatControlProvider");return e},g=e=>{let{children:r}=e;const t=(0,a.li)(null),{apiUrl:y}=(0,o.g)(),{selectedModel:g}=(0,s.fn)(),{settings:h,getModelAdjustedSettings:v}=(0,n.t)(),{idToken:_}=(0,l.A)(),{chatHistoryRef:w,setChatHistory:k,addMessageToHistory:T}=(0,i.m)(),{setIsWaitingForResponse:P,setError:C}=(0,d.A)(),{resetPerformanceMetrics:A,startPerformanceTimer:j,setTokenMetricsForLastMessage:x}=(0,c.B)(),{streamMessageWithFetch:R,stopStreaming:I}=(0,f.$)(),{showToast:E}=(0,b.d)(),S=(0,a.hb)((e=>e&&e.provider&&e.id?`${e.provider}/${e.id}`:null),[]),L=(0,a.hb)((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)+Date.now().toString(36);t.current=a;const o=null!==r&&Number.isInteger(r)&&r>=0;if(h.streaming)return R(e,o?r:null);if(!e||!g)return C("Please enter a message and select a model"),null;const s=S(g);if(!s)return C("Invalid model selection"),null;let n;o?k((t=>{const a=t.slice(0,r),o=t[r];return n={...o,content:e},[...a,n]})):n=T("user",e);const l=Date.now();P(!0),C(null);try{var i,d,c,f,b,m,u;const e=v(g),r=w.current.map((e=>{let{metrics:r,...t}=e;return t}));!e.systemPrompt||r.length&&"system"===r[0].role||r.unshift({role:"system",content:e.systemPrompt,timestamp:Date.now()-1}),r.push(n);const t={requestId:a,model:s,messages:r,temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty};A(),j();const o={"Content-Type":"application/json",Accept:"application/json"};_&&(o.Authorization=`Bearer ${_}`);const h=await(0,p.J)(new URL("/api/chat/completions",y).toString(),{method:"POST",headers:o,body:JSON.stringify(t)});if(!h.ok){let e=`API error: ${h.status}`;try{var x;const r=await h.json();e=(null==r||null===(x=r.error)||void 0===x?void 0:x.message)||(null==r?void 0:r.message)||e}catch{}throw new Error(e)}const k=await h.json();if(null!==(i=k.error)&&void 0!==i&&i.message||"error"===k.finishReason){var I,E,L,F,N,O,M;const e=(null===(I=k.error)||void 0===I?void 0:I.message)||"Error occurred during generation";C(e);const r=k.usage||{},t=null!==(E=null!==(L=r.promptTokens)&&void 0!==L?L:r.prompt_tokens)&&void 0!==E?E:0,a=null!==(F=null!==(N=r.completionTokens)&&void 0!==N?N:r.completion_tokens)&&void 0!==F?F:0,o=null!==(O=null!==(M=r.totalTokens)&&void 0!==M?M:r.total_tokens)&&void 0!==O?O:a,s=Date.now(),n=s-l,i={startTime:l,endTime:s,elapsedTime:n,tokenCount:a,tokensPerSecond:n?Math.round(a/(n/1e3)*10)/10:null,isComplete:!0,timeToFirstToken:null,promptTokens:t,completionTokens:a,totalTokens:o,finishReason:k.finishReason||"error",error:!0};return T("assistant",e,i),null}const P=k.content||"No Response returned",R=k.usage||{},S=null!==(d=null!==(c=R.promptTokens)&&void 0!==c?c:R.prompt_tokens)&&void 0!==d?d:0,D=null!==(f=null!==(b=R.completionTokens)&&void 0!==b?b:R.completion_tokens)&&void 0!==f?f:0,H=null!==(m=null!==(u=R.totalTokens)&&void 0!==u?u:R.total_tokens)&&void 0!==m?m:D,Y=Date.now(),z=Y-l,J=D>0?D:0,U={startTime:l,endTime:Y,elapsedTime:z,tokenCount:J,tokensPerSecond:z?Math.round(J/(z/1e3)*10)/10:null,isComplete:!0,timeToFirstToken:null,promptTokens:S,completionTokens:D,totalTokens:H,finishReason:k.finishReason};return T("assistant",P,U),P}catch(D){return C(D.message),T("assistant",D.message||"An error occurred"),null}finally{t.current=null,P(!1)}}),[y,g,h.streaming,v,_,w,k,T,R,S,A,j,C,P]),F=(0,a.hb)((async()=>(I(),!0)),[I]),N=(0,a.hb)((()=>{k([]),A()}),[k,A]),O=(0,a.hb)((()=>{w.current.length>0&&N()}),[w,N]),M=(0,a.hb)((()=>{0!==w.current.length&&window.confirm("Are you sure you want to clear the current chat?")&&(N(),E({type:"info",message:"Chat has been cleared"}))}),[w,N,E]),D=(0,a.hb)((()=>{const e=w.current;if(e.length)try{const r=e.map((e=>{const r="user"===e.role?"You":"assistant"===e.role?(null==g?void 0:g.name)||"Assistant":e.role;let t="";return"string"==typeof e.content?t=e.content:Array.isArray(e.content)&&(t=e.content.map((e=>"text"===e.type?e.text:"[Image]")).join("\n")),`${r}: ${t}\n`})).join(""),t=new Blob([r],{type:"text/plain"}),a=URL.createObjectURL(t),o=document.createElement("a");o.href=a,o.download=`chat_${(new Date).toISOString().replace(/:/g,"-")}.txt`,document.body.appendChild(o),o.click(),E({type:"success",message:"Chat downloaded successfully"}),document.body.removeChild(o),URL.revokeObjectURL(a)}catch(r){E({type:"error",message:"Failed to download chat. Please try again."})}}),[w,g,E]),H=(0,a.hb)((e=>{}),[]),Y=(0,a.Kr)((()=>({sendMessage:L,stopGeneration:F,addMessageToHistory:T,clearChat:N,newChat:O,resetChat:M,downloadChat:D,getOrCreateConversation:H,setTokenMetricsForLastMessage:x})),[L,F,T,N,O,M,D,H,x]);return(0,m.Y)(u.Provider,{value:Y,children:r})}},66883:(e,r,t)=>{t.d(r,{A:()=>l,g:()=>i});var a=t(85908),o=t(1681),s=t(44440);const n=(0,a.q6)(),l=()=>{const e=(0,a.NT)(n);if(void 0===e)throw new Error("useChatStatus must be used within a ChatStatusProvider");return e},i=e=>{let{children:r}=e;const[t,l]=(0,a.J0)(!1),[i,d]=(0,a.J0)(null),[,c,f]=(0,o.M3)("chat");(0,a.vJ)((()=>{t?c():f()}),[t,c,f]);const p=(0,a.Kr)((()=>({isWaitingForResponse:t,setIsWaitingForResponse:l,error:i,setError:d})),[t,i]);return(0,s.Y)(n.Provider,{value:p,children:r})}},69643:(e,r,t)=>{t.d(r,{U:()=>l,m:()=>n});var a=t(85908),o=t(44440);const s=(0,a.q6)(),n=()=>{const e=(0,a.NT)(s);if(void 0===e)throw new Error("useChatHistory must be used within a ChatHistoryProvider");return e},l=e=>{let{children:r}=e;const[t,n]=(0,a.J0)([]),l=(0,a.li)([]),i=(0,a.hb)((e=>{n((r=>{const t="function"==typeof e?e(r):e;return l.current=t,t}))}),[]),d=(0,a.hb)(((e,r,t)=>{const a=Date.now(),o={id:a,role:e,content:r,timestamp:a,...t&&{metrics:t}};return i((e=>[...e,o])),o}),[i]),c=(0,a.hb)((e=>{i((r=>{const t=r.length-1;if(t<0)return r;const a=r[t];if("assistant"!==a.role||a.content===e)return r;const o=[...r];return o[t]={...a,content:e},o}))}),[i]),f=(0,a.Kr)((()=>({chatHistory:t,chatHistoryRef:l,setChatHistory:i,addMessageToHistory:d,updateChatWithContent:c})),[t,i,d,c]);return(0,o.Y)(s.Provider,{value:f,children:r})}},69817:(e,r,t)=>{t.d(r,{K:()=>l,g:()=>n});var a=t(85908),o=t(44440);const s=(0,a.q6)(),n=()=>{const e=(0,a.NT)(s);if(void 0===e)throw new Error("useApi must be used within an ApiProvider");return e},l=e=>{let{children:r}=e;const[t]=(0,a.J0)("http://localhost:3000"),n=(0,a.Kr)((()=>({apiUrl:t})),[t]);return(0,o.Y)(s.Provider,{value:n,children:r})}},75360:(e,r,t)=>{t.r(r),t.d(r,{default:()=>k});var a=t(85908),o=t(16473),s=t(99928),n=t(44002),l=t(10943),i=t(1245),d=t(44440);const c={layout:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("core-layout")]).then(t.bind(t,95166)),spinner:()=>Promise.resolve().then(t.bind(t,44002))},f={chatContainer:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("chat-container")]).then(t.bind(t,57557)),chatInput:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-chat-ChatInput")]).then(t.bind(t,6682)),messageList:()=>Promise.all([t.e("worker-bundle"),t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("app-chat-ChatMessage"),t.e("common")]).then(t.bind(t,33219)),sidebar:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("layout-sidebar")]).then(t.bind(t,59416)),mainContent:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("layout-main")]).then(t.bind(t,38250))},p=()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("vendors-node_modules_react-icons_fa_index_mjs"),t.e("vendors-node_modules_react-icons_fc_index_mjs"),t.e("vendors-node_modules_react-icons_io_index_mjs"),t.e("vendors-node_modules_react-icons_lib_index_mjs"),t.e("login-modal")]).then(t.bind(t,32869)),b=(0,i.vL)([()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,85251)),()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,89382)),()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,86876)),()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,70102)),()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("utils"),t.e("large-vendor-primer"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common")]).then(t.bind(t,89079))],"ui-controls"),m=(0,i.vL)([()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("features")]).then(t.bind(t,12813)),()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("features")]).then(t.bind(t,80255)),()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("common"),t.e("features")]).then(t.bind(t,47718))],"features"),u={markdownRenderer:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("katex-6f17a2aa"),t.e("katex-7736f8b5"),t.e("utils"),t.e("large-vendor-micromark-core-commonmark"),t.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),t.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),t.e("vendors-node_modules_extend_index_js-node_modules_inline-style-parser_index_js-node_modules_b-132821"),t.e("vendors-node_modules_micromark-factory-destination_index_js-node_modules_micromark-factory-la-b99e24"),t.e("vendors-node_modules_micromark_lib_parse_js-node_modules_micromark_lib_postprocess_js-node_mo-6de913"),t.e("vendors-node_modules_property-information_index_js-node_modules_property-information_lib_find-e02ac5"),t.e("vendors-node_modules_react-markdown_lib_react-markdown_js"),t.e("vendors-node_modules_remark-rehype_lib_index_js"),t.e("vendors-node_modules_space-separated-tokens_index_js-node_modules_style-to-object_index_mjs-n-286e03"),t.e("vendors-node_modules_vfile_lib_index_js"),t.e("vendors-node_modules_mdast-util-gfm_lib_index_js"),t.e("vendors-node_modules_mdast-util-to-markdown_lib_handle_inline-code_js-node_modules_mdast-util-fe523e"),t.e("vendors-node_modules_micromark-extension-gfm-autolink-literal_lib_syntax_js-node_modules_micr-143c10"),t.e("vendors-node_modules_remark-gfm_index_js"),t.e("vendors-node_modules_hast-util-from-html-isomorphic_lib_browser_js"),t.e("vendors-node_modules_hast-util-to-text_lib_index_js-node_modules_web-namespaces_index_js"),t.e("vendors-node_modules_remark-math_index_js"),t.e("heavy-markdown")]).then(t.bind(t,18623)),streamingMessage:()=>Promise.all([t.e("syntax-highlighter"),t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("vendor-refractor-15684089"),t.e("vendor-refractor-e13012a4"),t.e("vendor-refractor-a3ee49af"),t.e("vendor-refractor-ad9cabf8"),t.e("vendor-refractor-3dcca97d"),t.e("vendor-refractor-e7fb9445"),t.e("vendor-refractor-7927cc25"),t.e("vendor-refractor-b9bc2889"),t.e("vendor-refractor-47716238"),t.e("vendor-refractor-d5dfd146"),t.e("vendor-refractor-6072c7a0"),t.e("vendor-refractor-b8620171"),t.e("vendor-refractor-4c8050b1"),t.e("vendor-refractor-a311b4ea"),t.e("vendor-refractor-cd8e6b90"),t.e("vendor-refractor-d0c4690c"),t.e("vendor-refractor-d5760a01"),t.e("vendor-refractor-e811d444"),t.e("vendor-refractor-e0f65d05"),t.e("vendor-refractor-287bb3d1"),t.e("vendor-refractor-237489f7"),t.e("vendor-refractor-a81a7d65"),t.e("vendor-refractor-43d68cfb"),t.e("vendor-refractor-914a1695"),t.e("vendor-refractor-ba3be5d7"),t.e("vendor-refractor-9f93ebfe"),t.e("vendor-refractor-db67aad0"),t.e("vendor-refractor-25029dc1"),t.e("vendor-refractor-0ff0ca8f"),t.e("vendor-refractor-982e62b4"),t.e("vendor-refractor-fc1e4540"),t.e("vendor-refractor-37070081"),t.e("vendor-refractor-f5ea4339"),t.e("vendor-refractor-6880b3ce"),t.e("vendor-refractor-d68713e4"),t.e("vendor-refractor-6bdb02c4"),t.e("vendor-refractor-3ec14123"),t.e("vendor-refractor-afec7163"),t.e("vendor-refractor-3939e9ff"),t.e("vendor-refractor-982ce542"),t.e("vendor-refractor-5f65df01"),t.e("vendor-refractor-e3ea52e9"),t.e("vendor-refractor-72796416"),t.e("vendor-refractor-4fe07799"),t.e("vendor-refractor-00889692"),t.e("vendor-refractor-9b4721ba"),t.e("vendor-refractor-fcbddd77"),t.e("vendor-refractor-73543ba5"),t.e("vendor-refractor-dff4b716"),t.e("vendor-refractor-1fce3037"),t.e("vendor-refractor-69bdd742"),t.e("vendor-refractor-a1617118"),t.e("vendor-refractor-29bd2d4f"),t.e("vendor-refractor-aa25e9ce"),t.e("vendor-refractor-80d3e6d7"),t.e("vendor-refractor-c934ee85"),t.e("vendor-refractor-b7180c25"),t.e("vendor-refractor-ae79dce2"),t.e("vendor-refractor-f72f697c"),t.e("vendor-refractor-8c9e628c"),t.e("vendor-refractor-bb8c4fba"),t.e("vendor-refractor-1e30d89f"),t.e("vendor-refractor-18110b50"),t.e("vendor-refractor-9cfd4f54"),t.e("vendor-refractor-2c300606"),t.e("vendor-refractor-b7b7f258"),t.e("vendor-refractor-a56c4d73"),t.e("vendor-refractor-de6256ae"),t.e("vendor-refractor-b6f3a405"),t.e("vendor-refractor-58aaa442"),t.e("vendor-refractor-509a7a9e"),t.e("vendor-refractor-0e0508a9"),t.e("vendor-refractor-217b7b8a"),t.e("vendor-refractor-5034beef"),t.e("vendor-refractor-2069139d"),t.e("vendor-refractor-4ef87f2b"),t.e("vendor-refractor-1c85f667"),t.e("vendor-refractor-cc9bc6eb"),t.e("vendor-refractor-f0f0f757"),t.e("app-large-4f064d56"),t.e("app-large-8367718c"),t.e("app-large-f55bbebb"),t.e("app-large-102ff935"),t.e("app-large-6b882012"),t.e("app-chat-ChatMessage"),t.e("vendors-node_modules_hastscript_index_js-node_modules_parse-entities_index_js-node_modules_ba-4ae368"),t.e("common")]).then(t.bind(t,65026)),imageOverlay:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("common")]).then(t.bind(t,21798)),typingIndicator:()=>Promise.all([t.e("styles-daab9c0a"),t.e("styles-e96e9bea"),t.e("styles-b2c1640e"),t.e("styles-b4afe919"),t.e("styles-31743c5a"),t.e("styles-61a228d7"),t.e("styles-c388cea0"),t.e("heavy-typing")]).then(t.bind(t,45143))},y=(0,i.vL)([()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.bind(t,51189)),()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.t.bind(t,26331,23)),()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.t.bind(t,17696,23)),()=>Promise.all([t.e("utils"),t.e("common"),t.e("micro-bundle")]).then(t.bind(t,54934))],"micro-bundle"),g=(0,a.RZ)(c.layout),h=(0,a.RZ)(p),v=(0,i.CS)(),_=(0,i.qq)();function w(){const[e,r]=(0,a.J0)("initializing"),[t,s]=(0,a.J0)(new Set),[p,w]=(0,a.J0)(null),{isLoggingIn:k,setIsLoggingIn:T}=(0,o.A)();return(0,a.vJ)((()=>{let t=!1;return async function(){l.Hp.mark(l.wz.APP_START);const a=_.getStrategy();w(a);try{if(r("core"),v.startLoad("core"),await(0,i.$n)(c,{groupName:"core",timeout:a.timeout,retries:a.skipNonEssential?1:2}),t)return;if(v.endLoad("core",!0),l.Hp.mark(l.wz.IMPORTANT_COMPONENTS_LOADED),s((e=>new Set([...e,"core"]))),r("essential"),v.startLoad("essential"),await(0,i.$n)(f,{groupName:"essential",timeout:a.timeout,retries:a.skipNonEssential?1:2}),t)return;if(v.endLoad("essential",!0),s((e=>new Set([...e,"essential"]))),r("controls"),v.startLoad("ui-controls"),await(0,i.$n)(b,{groupName:"ui-controls",timeout:a.timeout,retries:1}),t)return;v.endLoad("ui-controls",!0),l.Hp.mark(l.wz.COMPONENT_LOAD),l.Hp.measure(l.l9.COMPONENT_LOAD,l.wz.APP_START,l.wz.COMPONENT_LOAD),s((e=>new Set([...e,"ui-controls"]))),r("ready"),requestAnimationFrame((()=>{if(!t&&(l.Hp.mark(l.wz.APP_INTERACTIVE),l.Hp.measure(l.l9.TIME_TO_INTERACTIVE,l.wz.APP_START,l.wz.APP_INTERACTIVE),!a.skipNonEssential)){l.Hp.mark(l.wz.POST_INTERACTIVE_PRELOAD_START);const e={"secondary-features":{imports:m,priority:0,options:{timeout:a.timeout}},"heavy-components":{imports:u,priority:1,options:{timeout:1.5*a.timeout}},"external-services":{imports:EXTERNAL_IMPORTS,priority:2,options:{timeout:2*a.timeout}},"micro-components":{imports:y,priority:3,options:{timeout:a.timeout}}};(0,i.Oj)(e,{maxConcurrent:2*a.maxConcurrent,priorityDelay:a.priorityDelay,idleTimeout:a.timeout}),Object.keys(e).forEach((e=>{v.startLoad(e)}))}}))}catch(o){v.endLoad(e,!1),r("error")}}(),()=>{t=!0,l.Hp.clear()}}),[]),"ready"===e||t.has("ui-controls"),"initializing"===e||"core"===e?(0,d.FD)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[(0,d.Y)(n.default,{size:"medium"}),(0,d.FD)("div",{style:{fontSize:"0.875rem",opacity:.7},children:["Loading ",e,"...",p&&(0,d.FD)("div",{style:{fontSize:"0.75rem",marginTop:"0.5rem"},children:["Network: ",p.effectiveType||"detecting..."]})]})]}):"error"===e?(0,d.FD)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[(0,d.Y)("div",{children:"⚠️ Loading Error"}),(0,d.Y)("button",{onClick:()=>window.location.reload(),children:"Reload App"}),!1]}):(0,d.FD)(d.FK,{children:[(0,d.Y)(a.tY,{fallback:(0,d.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:(0,d.Y)(n.default,{size:"small"})}),children:(0,d.Y)(g,{})}),k&&t.has("ui-controls")&&(0,d.Y)(a.tY,{fallback:(0,d.Y)(n.default,{size:"small"}),children:(0,d.Y)(h,{onClose:()=>T(!1)})}),!1]})}function k(){return(0,d.Y)(o.O,{children:(0,d.Y)(s.v,{children:(0,d.Y)(w,{})})})}}}]);
//# sourceMappingURL=app-large-4f064d56.83777a9881.v1_9_5.js.map