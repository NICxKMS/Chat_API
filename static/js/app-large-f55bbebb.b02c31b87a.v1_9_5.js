"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["app-large-f55bbebb"],{16594:(e,t,n)=>{n.d(t,{$:()=>v,V:()=>b});var r=n(85908),o=n(69817),i=n(35406),s=n(21344),a=n(16473),l=n(69643),c=n(66883),d=n(72378),u=n(93827),p=n(26331),m=n.n(p),h=n(96824),g=n.n(h),y=n(44440);const f=(0,r.q6)(),v=()=>{const e=(0,r.NT)(f);if(void 0===e)throw new Error("useStreamingEvents must be used within a StreamingEventsProvider");return e},b=e=>{let{children:t}=e;const{apiUrl:n}=(0,o.g)(),{selectedModel:p}=(0,i.fn)(),{getModelAdjustedSettings:h}=(0,s.t)(),{idToken:v}=(0,a.A)(),{chatHistoryRef:b,setChatHistory:w,addMessageToHistory:T,updateChatWithContent:k}=(0,l.m)(),{setIsWaitingForResponse:x,setError:C}=(0,c.A)(),{resetPerformanceMetrics:S,startPerformanceTimer:E,updatePerformanceMetrics:P}=(0,d.B)(),A=(0,r.li)(""),_=(0,r.li)(null),q=(0,r.li)(null),D=(0,r.li)(!1),I=(0,r.li)(!1),$=(0,r.Kr)((()=>m()((e=>k(e)),20)),[k]),M=((0,r.li)(null),(0,r.li)(null)),R=(0,r.hb)((()=>(M.current||(M.current=new(g())),M.current)),[]),O=(0,r.hb)((e=>new Promise(((t,n)=>{const r=R();r.onmessage=e=>t(e.data),r.onerror=n,r.postMessage(e)}))),[R]),F=(0,r.hb)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)+Date.now().toString(36);_.current=r;const o=null!==t&&Number.isInteger(t)&&t>=0;if(!e||!p)return C("Please enter a message and select a model"),null;const i=`${p.provider}/${p.id}`;if(!i)return C("Invalid model selection"),null;let s;o?w((n=>{const r=n.slice(0,t),o=n[t];return s={...o,content:e},[...r,s]})):s=T("user",e),S(),E(),I.current=!1,x(!0),C(null),A.current="",D.current=!0,T("assistant","");let a=setTimeout((()=>{var e;null===(e=q.current)||void 0===e||e.abort("timeout"),C("Connection timed out"),x(!1)}),6e4);const l=new AbortController;q.current=l;try{const e=h(p),t=b.current.slice(0,-1).map((e=>{let{metrics:t,...n}=e;return n}));!e.systemPrompt||t.length&&"system"===t[0].role||t.unshift({role:"system",content:e.systemPrompt,timestamp:Date.now()-1});const o={requestId:r,model:i,messages:t,temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty},s={"Content-Type":"application/json",Accept:"text/event-stream","Cache-Control":"no-cache"};v&&(s.Authorization=`Bearer ${v}`);const f=await(0,u.J)(new URL("/api/chat/stream",n).toString(),{method:"POST",headers:s,body:JSON.stringify(o),signal:l.signal,cache:"no-store"});if(!f.ok)throw new Error(`API error: ${f.status}`);const T=f.body.getReader(),S=new TextDecoder("utf-8");let E="";for(;;){const{done:e,value:t}=await T.read();if(clearTimeout(a),a=setTimeout((()=>{var e;null===(e=q.current)||void 0===e||e.abort(),C("Connection timed out"),x(!1)}),6e4),e)break;const n=S.decode(t,{stream:!0});try{const e=await O(n);for(const t of e){var c,d,m;if(null!==(c=t.rawChunk)&&void 0!==c&&c.error||"error"===t.finishReason){var g,y;const e=(null===(g=t.rawChunk)||void 0===g||null===(y=g.error)||void 0===y?void 0:y.message)||"Error occurred during generation";return C(e),w((t=>{const n=[...t],r=n[n.length-1];return r&&"assistant"===r.role&&(r.content+=`\n\n**Error:** ${e}`,r.metrics&&(r.metrics.isComplete=!0,r.metrics.error=!0)),n})),null}t.content&&(I.current||(P(1),I.current=!0),E+=t.content,A.current=E,$(E));const e=null!==(d=null===(m=t.usage)||void 0===m?void 0:m.completionTokens)&&void 0!==d?d:0;P(e,t.isDone,t.usage,t.finishReason)}}catch{}}return $.flush(),k(A.current),A.current}catch(f){return C(f.message),w((e=>{const t=[...e],n=t[t.length-1];return n&&"assistant"===n.role&&(n.content+=`\n\n**Error:** ${f.message||"Error occurred during generation"}`,n.metrics&&(n.metrics.isComplete=!0,n.metrics.error=!0)),t})),null}finally{clearTimeout(a),D.current=!1,x(!1),_.current=null}}),[n,p,h,v,b,w,T,k,$,C,x,S,E,P,O]),U=(0,r.hb)((async()=>{q.current&&q.current.abort("user_stopped");const e=_.current;if(e){const t={"Content-Type":"application/json"};v&&(t.Authorization=`Bearer ${v}`);try{await(0,u.J)(new URL("/api/chat/stop",n).toString(),{method:"POST",headers:t,body:JSON.stringify({requestId:e})})}catch{}finally{_.current=null,q.current=null}}return D.current=!1,x(!1),!0}),[n,v,x]),W=(0,r.Kr)((()=>({streamMessageWithFetch:F,stopStreaming:U,parseStreamChunk:O,streamingTextRef:A,isStreaming:()=>D.current})),[F,U,O]);return(0,y.Y)(f.Provider,{value:W,children:t})}},21344:(e,t,n)=>{n.d(t,{Z:()=>c,t:()=>l});var r=n(85908),o=n(9055),i=n(44440);const s={temperature:.7,top_p:1,max_tokens:8191,frequency_penalty:0,presence_penalty:0,streaming:!0,systemPrompt:"# 🧠 System Instruction: University-Level AI Assistant Guide\n\n**You are a knowledgeable, friendly, and supportive university-level assistant.**\nYour mission is to help students understand complex topics with clarity, encouragement, and structure—like a brilliant but approachable mentor or senior student.\n\n---\n\n## ✨ Core Principles for Every Response\n\nTo ensure clarity, efficiency, and student comprehension, adhere to these fundamental principles in **every response**:\n\n*   **📊 Prioritize Visuals over Dense Text:** **Always try to use tabular or other visual information in place of text if possible.** Use tables, structured lists, and simplified diagrams (described in text) to convey maximum information in minimal words, making concepts immediately graspable.\n*   **🎯 Direct, Concise & Focused:** **Only answer what is directly asked for, and do not explain in detail unless explicitly requested** (e.g., \"explain in detail,\" \"tell me more\"). Always strive for **concise and compact** explanations, avoiding extraneous information. Provide comprehensive content or deeper dives only when prompted or when the topic's inherent complexity *for the specific question* absolutely necessitates it for foundational understanding.\n*   **📐 Mandatory Math & Code Formatting:** Correct markdown formatting for **mathematical formulas ($ $$)** and **code blocks** is strictly required whenever they are included.\n\n---\n\n## 📝 Response Structure & Content Guidelines\n\nWhile highly adaptable to the specific query, aim to incorporate these elements for optimal learning:\n\n### ✅ 1. Welcoming Introduction\n\nStart every response with a **positive, encouraging, and supportive intro** to set a friendly and helpful tone.\n\n> *Examples:*\n> *   \"Alright! Let's break this down together—I'll explain everything step by step with clear examples and helpful tips!\"\n> *   \"You've got this! Here's a structured and easy-to-follow explanation tailored just for you.\"\n\n### 2. Adaptive Content Organization\n\nOrganize your content clearly using markdown headings and visual aids. The specific headings, their order, and their depth should **adapt to best suit the query's complexity and the required level of detail.**\n\n*   **Heading Hierarchy:** Use markdown heading levels ('##', '###', '####', etc.) to create a clear, logical, and multi-level hierarchy. **Maintain an appropriate level/depth for both headings and the content they introduce.** Avoid unnecessary deep nesting; only use more multi-level answering if explicitly requested or inherently necessary for clarity.\n*   **Emoji Usage:** Use emojis **mildly and thoughtfully**, primarily at the start of headings or to highlight key points. They should be **relevant and contextually appropriate**, subtly enhancing clarity and engagement without being overwhelming or purely decorative.\n*   **Whitespace & Readability:** Ensure generous whitespace between sections, paragraphs, and list items. Consistently use bullet points, numbered lists, and clear spacing to enhance readability.\n\n### 3. Core Explanation Elements (Flexible)\n\nIntegrate the following elements as needed, choosing their inclusion, order, and depth based on the user's request and the topic's demands:\n\n*   **Concept Definition:** What is it? Why does it matter? Define jargon.\n*   **Operational Details:** How does it work? Practical applications.\n*   **Examples:** Concrete instances, including formulas or code.\n*   **Key Insights:** Tips, best practices, common pitfalls, comparisons.\n\n### 4. Math & Code Formatting\n\n*   **📐 Math:**\n    *   Inline: '$E = mc^2$'\n    *   Block:\n        '\n        $$\n        E = mc^2\n        $$\n        '\n\n### 5. Clear Concluding Sections\n\nConclude each response with **one** summary section, using bold headers and bullets:\n\n*   '# ✅ Key Takeaways' — *Concise summary for revision.*\n*   '# 🔍 Next Steps / Related Topics' — *Suggestions for deeper exploration or application.*\n\n### 6. Offer Optional Extras\n\nAlways conclude by offering further resources or different learning formats to empower the student:\n\n> \"Would you like me to share any of these optional extras to help you even more?\"\n> *   📋 A summary table\n> *   💻 Specific code snippets\n> *   🧠 Quick revision notes\n> *   📘 Further reading suggestions\n\n---\n\n## 🗣️ Tone & Formatting Principles\n\n*   **🧑‍🏫 Tone:** Friendly, motivating, and peer-like—never robotic or dry. Aim for an approachable, expert voice.\n*   **💡 Accuracy:** Ensure all information is academically sound and precise.\n*   **🧼 Formatting Details:**\n    *   **Bold** for emphasis.\n    *   *Italics* for subtle notes or definitions.\n    *   Tables, structured lists, and simplified diagrams for dense or comparative info.\n    *   Emojis used thoughtfully to enhance context.\n\n---\n## 🌟 The Golden Rule\n\n**Prioritize clarity, accuracy, and student comprehension above all else.** Every element of your response should be directly relevant to the student's query, making learning effective and enjoyable while maintaining a high standard of presentation."},a=(0,r.q6)(),l=()=>{const e=(0,r.NT)(a);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e},c=e=>{let{children:t}=e;const[n,l]=(0,o.M)("appSettings",s),c=(0,r.hb)(((e,t)=>{e in s&&l((n=>({...n,[e]:t})))}),[l]),d=(0,r.hb)((()=>{l(s)}),[l]),u=(0,r.hb)((e=>!!e&&(!0===e.requiresFixedTemperature||e.properties&&e.properties.includes("fixed_temperature")||e.id&&e.id.toLowerCase().startsWith("o")||e.series&&"o-series"===e.series.toLowerCase())),[]),p=(0,r.hb)((e=>u(e)?{...n,temperature:1}:n),[n,u]),m=(0,r.Kr)((()=>({settings:n,updateSetting:c,resetSettings:d,shouldRestrictTemperature:u,getModelAdjustedSettings:p})),[n,c,d,u,p]);return(0,i.Y)(a.Provider,{value:m,children:t})}},96926:(e,t,n)=>{n.d(t,{D:()=>s,N:()=>a});var r=n(85908),o=n(44440);const i=(0,r.q6)(),s=()=>{const e=(0,r.NT)(i);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},a=e=>{let{children:t}=e;const[n,s]=(0,r.J0)((()=>localStorage.getItem("theme")||"dark")),a=(0,r.hb)((()=>{s((e=>{const t="dark"===e?"light":"dark";return localStorage.setItem("theme",t),t}))}),[]);(0,r.vJ)((()=>{document.body.classList.remove("light-mode","dark-mode"),document.body.classList.add(`${n}-mode`)}),[n]);const l=(0,r.Kr)((()=>({theme:n,toggleTheme:a,isDark:"dark"===n})),[n,a]);return(0,o.Y)(i.Provider,{value:l,children:t})}},98096:(e,t,n)=>{n.d(t,{d:()=>a,t:()=>u});var r=n(85908),o=n(20163),i=n(44440);const s=(0,r.q6)(),a=()=>{const e=(0,r.NT)(s);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},l="ADD_TOAST",c="REMOVE_TOAST";function d(e,t){switch(t.type){case l:return[...e,t.payload];case c:return e.filter((e=>e.id!==t.payload));default:return e}}const u=e=>{let{children:t}=e;const[n,a]=(0,r.WO)(d,[]),u=(0,r.hb)((e=>{let{type:t,message:n,duration:r=3e3}=e;const o=Date.now().toString()+Math.random().toString(36).substr(2,9);return a({type:l,payload:{id:o,type:t,message:n,duration:r}}),setTimeout((()=>a({type:c,payload:o})),r),o}),[]),p=(0,r.hb)((e=>{a({type:c,payload:e})}),[]);return(0,i.FD)(s.Provider,{value:{showToast:u,dismissToast:p},children:[t,(0,i.Y)(o.A,{toasts:n,dismissToast:p})]})}}}]);
//# sourceMappingURL=app-large-f55bbebb.b02c31b87a.v1_9_5.js.map