"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([[3428],{13005:(e,t,r)=>{r.d(t,{D:()=>a,N:()=>i});var n=r(65043),o=r(70579);const s=(0,n.createContext)(),a=()=>{const e=(0,n.useContext)(s);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},i=e=>{let{children:t}=e;const[r,a]=(0,n.useState)((()=>localStorage.getItem("theme")||"dark")),i=(0,n.useCallback)((()=>{a((e=>{const t="dark"===e?"light":"dark";return localStorage.setItem("theme",t),t}))}),[]);(0,n.useEffect)((()=>{document.body.classList.remove("light-mode","dark-mode"),document.body.classList.add(`${r}-mode`)}),[r]);const c=(0,n.useMemo)((()=>({theme:r,toggleTheme:i,isDark:"dark"===r})),[r,i]);return(0,o.jsx)(s.Provider,{value:c,children:t})}},14255:(e,t,r)=>{r.d(t,{B:()=>i,b:()=>c});var n=r(65043),o=r(52932),s=r(70579);const a=(0,n.createContext)(),i=()=>{const e=(0,n.useContext)(a);if(void 0===e)throw new Error("usePerformanceMetrics must be used within a PerformanceMetricsProvider");return e},c=e=>{let{children:t}=e;const{setChatHistory:r}=(0,o.m)(),[i,c]=(0,n.useState)({startTime:null,endTime:null,elapsedTime:null,tokenCount:null,tokensPerSecond:null,isComplete:!1,timeToFirstToken:null,promptTokens:null,completionTokens:null,totalTokens:null,finishReason:null}),l=(0,n.useCallback)((()=>{c({startTime:null,endTime:null,elapsedTime:null,tokenCount:null,tokensPerSecond:null,isComplete:!1,timeToFirstToken:null,promptTokens:null,completionTokens:null,totalTokens:null,finishReason:null})}),[]),u=(0,n.useCallback)((()=>{c((e=>({...e,startTime:Date.now(),isComplete:!1})))}),[]),d=(0,n.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c((o=>{const s=Date.now(),a=o.startTime?s-o.startTime:0,i=e&&a?Math.round(e/(a/1e3)*10)/10:o.tokensPerSecond,c=o.timeToFirstToken||(e>0?a:null);return{startTime:o.startTime,endTime:s,elapsedTime:a,tokenCount:e,tokensPerSecond:i,isComplete:t,timeToFirstToken:c,promptTokens:(null==r?void 0:r.promptTokens)||o.promptTokens,completionTokens:(null==r?void 0:r.completionTokens)||o.completionTokens,totalTokens:(null==r?void 0:r.totalTokens)||o.totalTokens,finishReason:n||o.finishReason}}))}),[]);(0,n.useEffect)((()=>{null!=i.endTime&&r((e=>{const t=[...e],r=t[t.length-1];return r&&"assistant"===r.role&&(r.metrics={...i}),t}))}),[i,r]);const m=(0,n.useCallback)((e=>{r((t=>{const r=[...t],n=r[r.length-1];return n&&"assistant"===n.role&&(n.metrics={...n.metrics||{},...e,isComplete:!0}),r}))}),[r]),p=(0,n.useMemo)((()=>({currentMessageMetrics:i,resetPerformanceMetrics:l,startPerformanceTimer:u,updatePerformanceMetrics:d,setTokenMetricsForLastMessage:m})),[i,l,u,d,m]);return(0,s.jsx)(a.Provider,{value:p,children:t})}},20409:(e,t,r)=>{r.d(t,{Z:()=>l,t:()=>c});var n=r(65043),o=r(94916),s=r(70579);const a={temperature:.7,top_p:1,max_tokens:8191,frequency_penalty:0,presence_penalty:0,streaming:!0,systemPrompt:"You are ChatGPT, a helpful and knowledgeable AI assistant. Your primary role is to assist Nikhil, a university engineering student, by providing clear, concise, and technically accurate information. Adopt a friendly and approachable tone, akin to a knowledgeable peer or mentor. Enhance your responses with relevant emojis to convey tone and emotion, making interactions more engaging. Structure your answers logically, using bullet points or numbered lists where appropriate to enhance clarity. When applicable, incorporate interactive elements such as code snippets or diagrams to facilitate deeper understanding. Encourage curiosity by suggesting related topics or questions that Nikhil might explore further. Always tailor your assistance to support Nikhil's academic and personal growth in the field of engineering"},i=(0,n.createContext)(),c=()=>{const e=(0,n.useContext)(i);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e},l=e=>{let{children:t}=e;const[r,c]=(0,o.M)("appSettings",a),l=(0,n.useCallback)(((e,t)=>{e in a&&c((r=>({...r,[e]:t})))}),[c]),u=(0,n.useCallback)((()=>{c(a)}),[c]),d=(0,n.useCallback)((e=>!!e&&(!0===e.requiresFixedTemperature||e.properties&&e.properties.includes("fixed_temperature")||e.id&&e.id.toLowerCase().startsWith("o")||e.series&&"o-series"===e.series.toLowerCase())),[]),m=(0,n.useCallback)((e=>d(e)?{...r,temperature:1}:r),[r,d]),p=(0,n.useMemo)((()=>({settings:r,updateSetting:l,resetSettings:u,shouldRestrictTemperature:d,getModelAdjustedSettings:m})),[r,l,u,d,m]);return(0,s.jsx)(i.Provider,{value:p,children:t})}},23400:(e,t,r)=>{r.d(t,{Hp:()=>s,l9:()=>o,wz:()=>n});const n={APP_START:"app-start",CONTEXT_INIT:"context-init",COMPONENT_LOAD:"component-load",IMPORTANT_COMPONENTS_LOADED:"important-components-loaded",FORMATTING_COMPONENTS_LOADED:"formatting-components-loaded",MODEL_SELECTOR_COMPONENTS_LOADED:"model-selector-components-loaded",FIRST_PAINT:"first-paint",FIRST_CONTENTFUL_PAINT:"first-contentful-paint",APP_INTERACTIVE:"app-interactive",APP_READY:"app-ready"},o={TOTAL_LOAD:"total-load-time",CONTEXT_INIT:"context-init-time",COMPONENT_LOAD:"component-load-time",TIME_TO_INTERACTIVE:"time-to-interactive",IMPORTANT_LOAD_TIME:"important-load-time",FORMATTING_LOAD_TIME:"formatting-load-time",MODEL_SELECTOR_LOAD_TIME:"model-selector-load-time"};const s=new class{constructor(){this.marks=new Set,this.measures=new Set,"undefined"!=typeof window&&"performance"in window&&"PerformanceObserver"in window&&this.trackPaintMetrics()}trackPaintMetrics(){try{new PerformanceObserver((e=>{e.getEntries().forEach((e=>{const t="first-paint"===e.name?n.FIRST_PAINT:n.FIRST_CONTENTFUL_PAINT;performance.mark(t),this.marks.add(t);const r="first-paint"===e.name?"time-to-first-paint":"time-to-first-contentful-paint";try{performance.measure(r,n.APP_START,t),this.measures.add(r)}catch(e){}}))})).observe({entryTypes:["paint"]})}catch(e){}}mark(e){performance&&performance.mark&&(performance.mark(e),this.marks.add(e))}measure(e,t,r){if(performance&&performance.measure)try{performance.measure(e,t,r),this.measures.add(e)}catch(e){}}getMeasures(){return performance&&performance.getEntriesByType?performance.getEntriesByType("measure"):[]}clear(){performance&&(performance.clearMarks(),performance.clearMeasures(),this.marks.clear(),this.measures.clear())}logMetrics(){this.getMeasures().forEach((e=>{})),window}}},25960:(e,t,r)=>{var n=r(65043),o=r(84391),s=(r(70682),r(63956),r(11711),r(59555),r(54111));const a=e=>{e&&e instanceof Function&&r.e(3453).then(r.bind(r,2488)).then((t=>{let{getCLS:r,getFID:n,getFCP:o,getLCP:s,getTTFB:a}=t;r(e),n(e),o(e),s(e),a(e)}))},i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const r=e.installing;null!=r&&(r.onstatechange=()=>{"installed"===r.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((e=>{}))}var l=r(47035),u=r(50578),d=r(88046),m=r(70579);const p=window.matchMedia("(prefers-color-scheme: dark)").matches;document.body.classList.add(p?"dark-mode":"light-mode");o.createRoot(document.getElementById("root")).render((0,m.jsx)(n.StrictMode,{children:(0,m.jsx)(l.t,{children:(0,m.jsxs)(u.oo,{children:[(0,m.jsx)(n.Suspense,{fallback:(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}),children:(0,m.jsx)(s.A,{})}),(0,m.jsx)(d.A,{})]})})})),a((function(){})),function(e){if("service-worker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="/service-worker.js";i?function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((r=>{const n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):c(e,t)})).catch((()=>{}))}(t,e):c(t,e)}))}}({onUpdate:e=>{const t=e.waiting;t&&(t.addEventListener("statechange",(e=>{"activated"===e.target.state&&window.location.reload()})),t.postMessage({type:"SKIP_WAITING"}))}})},47035:(e,t,r)=>{r.d(t,{d:()=>i,t:()=>d});var n=r(65043),o=r(57040),s=r(70579);const a=(0,n.createContext)(),i=()=>{const e=(0,n.useContext)(a);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},c="ADD_TOAST",l="REMOVE_TOAST";function u(e,t){switch(t.type){case c:return[...e,t.payload];case l:return e.filter((e=>e.id!==t.payload));default:return e}}const d=e=>{let{children:t}=e;const[r,i]=(0,n.useReducer)(u,[]),d=(0,n.useCallback)((e=>{let{type:t,message:r,duration:n=3e3}=e;const o=Date.now().toString()+Math.random().toString(36).substr(2,9);return i({type:c,payload:{id:o,type:t,message:r,duration:n}}),setTimeout((()=>i({type:l,payload:o})),n),o}),[]),m=(0,n.useCallback)((e=>{i({type:l,payload:e})}),[]);return(0,s.jsxs)(a.Provider,{value:{showToast:d,dismissToast:m},children:[t,(0,s.jsx)(o.A,{toasts:r,dismissToast:m})]})}},64339:(e,t,r)=>{e.exports=r.p+"static/media/streamProcessor.2f8268fe106a51a9877d.js"},71789:(e,t,r)=>{r.d(t,{$:()=>g,V:()=>T});var n=r(65043),o=r(91578),s=r(96377),a=r(20409),i=r(35016),c=r(52932),l=r(36514),u=r(14255),d=r(87164),m=r(10446),p=r.n(m),h=r(70579);const f=(0,n.createContext)(),g=()=>{const e=(0,n.useContext)(f);if(void 0===e)throw new Error("useStreamingEvents must be used within a StreamingEventsProvider");return e},T=e=>{let{children:t}=e;const{apiUrl:m}=(0,o.g)(),{selectedModel:g}=(0,s.fn)(),{getModelAdjustedSettings:T}=(0,a.t)(),{idToken:w}=(0,i.A)(),{chatHistoryRef:k,setChatHistory:y,addMessageToHistory:v,updateChatWithContent:C}=(0,c.m)(),{setIsWaitingForResponse:S,setError:b}=(0,l.A)(),{resetPerformanceMetrics:M,startPerformanceTimer:E,updatePerformanceMetrics:P}=(0,u.B)(),_=(0,n.useRef)(""),O=(0,n.useRef)(null),A=(0,n.useRef)(null),I=(0,n.useRef)(!1),R=(0,n.useRef)(!1),N=(0,n.useMemo)((()=>p()((e=>C(e)),20)),[C]),x=(0,n.useRef)(null),D=(0,n.useRef)(null),L=(0,n.useCallback)((()=>(D.current||(x.current||(x.current=new URL(r(64339),r.b)),D.current=new Worker(x.current,{type:"module"})),D.current)),[]),j=(0,n.useCallback)((e=>new Promise(((t,r)=>{const n=L();n.onmessage=e=>t(e.data),n.onerror=r,n.postMessage(e)}))),[L]),F=(0,n.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)+Date.now().toString(36);O.current=r;const n=null!==t&&Number.isInteger(t)&&t>=0;if(!e||!g)return b("Please enter a message and select a model"),null;const o=`${g.provider}/${g.id}`;if(!o)return b("Invalid model selection"),null;let s;n?y((r=>{const n=r.slice(0,t),o=r[t];return s={...o,content:e},[...n,s]})):s=v("user",e),M(),E(),R.current=!1,S(!0),b(null),_.current="",I.current=!0,v("assistant","");let a=setTimeout((()=>{var e;null===(e=A.current)||void 0===e||e.abort("timeout"),b("Connection timed out"),S(!1)}),6e4);const i=new AbortController;A.current=i;try{const e=T(g),t=k.current.map((e=>{let{metrics:t,...r}=e;return r}));!e.systemPrompt||t.length&&"system"===t[0].role||t.unshift({role:"system",content:e.systemPrompt,timestamp:Date.now()-1}),t.push(s);const n={requestId:r,model:o,messages:t,temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty},f={"Content-Type":"application/json",Accept:"text/event-stream","Cache-Control":"no-cache"};w&&(f.Authorization=`Bearer ${w}`);const v=await(0,d.J)(new URL("/api/chat/stream",m).toString(),{method:"POST",headers:f,body:JSON.stringify(n),signal:i.signal,cache:"no-store"});if(!v.ok)throw new Error(`API error: ${v.status}`);const M=v.body.getReader(),E=new TextDecoder("utf-8");let O="";for(;;){const{done:e,value:t}=await M.read();if(clearTimeout(a),a=setTimeout((()=>{var e;null===(e=A.current)||void 0===e||e.abort(),b("Connection timed out"),S(!1)}),6e4),e)break;const r=E.decode(t,{stream:!0});try{const e=await j(r);for(const t of e){var c,l,u;if(null!==(c=t.rawChunk)&&void 0!==c&&c.error||"error"===t.finishReason){var p,h;const e=(null===(p=t.rawChunk)||void 0===p||null===(h=p.error)||void 0===h?void 0:h.message)||"Error occurred during generation";return b(e),y((t=>{const r=[...t],n=r[r.length-1];return n&&"assistant"===n.role&&(n.content=e,n.metrics&&(n.metrics.isComplete=!0,n.metrics.error=!0)),r})),null}t.content&&(R.current||(P(1),R.current=!0),O+=t.content,_.current=O,N(O));const e=null!==(l=null===(u=t.usage)||void 0===u?void 0:u.completionTokens)&&void 0!==l?l:0;P(e,t.isDone,t.usage,t.finishReason)}}catch{}}return N.flush(),C(_.current),_.current}catch(e){return b(e.message),y((t=>{const r=[...t],n=r[r.length-1];return n&&"assistant"===n.role&&(n.content=e.message||"Error occurred during generation",n.metrics&&(n.metrics.isComplete=!0,n.metrics.error=!0)),r})),null}finally{clearTimeout(a),I.current=!1,S(!1),O.current=null}}),[m,g,T,w,k,y,v,C,N,b,S,M,E,P,j]),U=(0,n.useCallback)((async()=>{A.current&&A.current.abort("user_stopped");const e=O.current;if(e){const t={"Content-Type":"application/json"};w&&(t.Authorization=`Bearer ${w}`);try{await(0,d.J)(new URL("/api/chat/stop",m).toString(),{method:"POST",headers:t,body:JSON.stringify({requestId:e})})}catch{}finally{O.current=null,A.current=null}}return I.current=!1,S(!1),!0}),[m,w,S]),W=(0,n.useMemo)((()=>({streamMessageWithFetch:F,stopStreaming:U,parseStreamChunk:j,streamingTextRef:_,isStreaming:()=>I.current})),[F,U,j]);return(0,h.jsx)(f.Provider,{value:W,children:t})}},72152:(e,t,r)=>{r.d(t,{Y:()=>s});var n=r(65043),o=r(94916);const s=()=>{const[e,t]=(0,o.M)("modelCacheEnabled",!0),r=(0,n.useCallback)((()=>{try{localStorage.removeItem("modelDropdownCache")}catch(e){}}),[]),s=(0,n.useCallback)((n=>{const o="boolean"==typeof n?n:!e;return o||r(),t(o),o}),[e,t,r]),a=(0,n.useCallback)((()=>{r()}),[r]);return(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=window.isCacheValid;return window.isCacheValid=function(t){return"false"!==localStorage.getItem("modelCacheEnabled")&&("function"==typeof e?e(t):t&&t.timestamp&&Date.now()-t.timestamp<3e5&&t.allModels&&t.processedModels&&t.experimentalModels)},()=>{window.isCacheValid=e}}),[]),{cacheEnabled:e,toggleCache:s,clearModelCache:r,refreshModels:a}}},87164:(e,t,r)=>{async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=0;for(;;)try{const r=await fetch(e,t);if(!r.ok)throw new Error(`Network error: ${r.status}`);return r}catch(e){if(o>=r)throw e;const t=n*Math.pow(2,o)+100*Math.random();await new Promise((e=>setTimeout(e,t))),o++}}r.d(t,{J:()=>n})},94916:(e,t,r)=>{r.d(t,{M:()=>o});var n=r(65043);const o=(e,t)=>{const r=(0,n.useRef)(t),[o,s]=(0,n.useState)((()=>{try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):r.current}catch(e){return r.current}})),a=(0,n.useCallback)((t=>{try{const r=t instanceof Function?t(o):t;s(r),window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}}),[e,o]);return(0,n.useEffect)((()=>{try{const t=window.localStorage.getItem(e);s(t?JSON.parse(t):r.current)}catch(e){s(r.current)}}),[e]),[o,a]}}},e=>{e.O(0,[3428],(()=>{[4314,208,5764,2042,4370,1042,4912,4910,268,496,6716,8990,8360,4377,3542,8467,5419,5174,7007,1524,5433,4431,9173,4537,1802,4191,5028,535,5100,393,5039,5444,2412,6017,399,4917,7777,438,662,7272,7390,4734,6755,4182,4582,8162,6760,1217,822,4335,6814,2489,9734,5522,5080,1927,9283,8476,5816,4120,7295,237,9104,2993,9889,392,7514,8482,5418,1506,5796,4266,7210,3484,9579].map(e.E)}),5);e.O(0,[9624,8466,6017,399,4917,7777,438,662,7272,7390,5271,3326],(()=>{return t=25960,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main-31743c5a.eceb93110b.v1_7_5.js.map