"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["app-chat-ChatMessage"],{17277:(e,r,o)=>{o.d(r,{A:()=>v});var a=o(85908),s=o(42379),n=o(45436),t=o(46797),d=o(87722),i=o(98121),l=o(53081),c=o.n(l),_=o(44440);const m=(0,a.RZ)((()=>Promise.all([o.e("syntax-highlighter"),o.e("vendor-refractor-15684089"),o.e("vendor-refractor-e13012a4"),o.e("vendor-refractor-a3ee49af"),o.e("vendor-refractor-ad9cabf8"),o.e("vendor-refractor-3dcca97d"),o.e("vendor-refractor-e7fb9445"),o.e("vendor-refractor-7927cc25"),o.e("vendor-refractor-b9bc2889"),o.e("vendor-refractor-47716238"),o.e("vendor-refractor-d5dfd146"),o.e("vendor-refractor-6072c7a0"),o.e("vendor-refractor-b8620171"),o.e("vendor-refractor-4c8050b1"),o.e("vendor-refractor-a311b4ea"),o.e("vendor-refractor-cd8e6b90"),o.e("vendor-refractor-d0c4690c"),o.e("vendor-refractor-d5760a01"),o.e("vendor-refractor-e811d444"),o.e("vendor-refractor-e0f65d05"),o.e("vendor-refractor-287bb3d1"),o.e("vendor-refractor-237489f7"),o.e("vendor-refractor-a81a7d65"),o.e("vendor-refractor-43d68cfb"),o.e("vendor-refractor-914a1695"),o.e("vendor-refractor-ba3be5d7"),o.e("vendor-refractor-9f93ebfe"),o.e("vendor-refractor-db67aad0"),o.e("vendor-refractor-25029dc1"),o.e("vendor-refractor-0ff0ca8f"),o.e("vendor-refractor-982e62b4"),o.e("vendor-refractor-fc1e4540"),o.e("vendor-refractor-37070081"),o.e("vendor-refractor-f5ea4339"),o.e("vendor-refractor-6880b3ce"),o.e("vendor-refractor-d68713e4"),o.e("vendor-refractor-6bdb02c4"),o.e("vendor-refractor-3ec14123"),o.e("vendor-refractor-afec7163"),o.e("vendor-refractor-3939e9ff"),o.e("vendor-refractor-982ce542"),o.e("vendor-refractor-5f65df01"),o.e("vendor-refractor-e3ea52e9"),o.e("vendor-refractor-72796416"),o.e("vendor-refractor-4fe07799"),o.e("vendor-refractor-00889692"),o.e("vendor-refractor-9b4721ba"),o.e("vendor-refractor-fcbddd77"),o.e("vendor-refractor-73543ba5"),o.e("vendor-refractor-dff4b716"),o.e("vendor-refractor-1fce3037"),o.e("vendor-refractor-69bdd742"),o.e("vendor-refractor-a1617118"),o.e("vendor-refractor-29bd2d4f"),o.e("vendor-refractor-aa25e9ce"),o.e("vendor-refractor-80d3e6d7"),o.e("vendor-refractor-c934ee85"),o.e("vendor-refractor-b7180c25"),o.e("vendor-refractor-ae79dce2"),o.e("vendor-refractor-f72f697c"),o.e("vendor-refractor-8c9e628c"),o.e("vendor-refractor-bb8c4fba"),o.e("vendor-refractor-1e30d89f"),o.e("vendor-refractor-18110b50"),o.e("vendor-refractor-9cfd4f54"),o.e("vendor-refractor-2c300606"),o.e("vendor-refractor-b7b7f258"),o.e("vendor-refractor-a56c4d73"),o.e("vendor-refractor-de6256ae"),o.e("vendor-refractor-b6f3a405"),o.e("vendor-refractor-58aaa442"),o.e("vendor-refractor-509a7a9e"),o.e("vendor-refractor-0e0508a9"),o.e("vendor-refractor-217b7b8a"),o.e("vendor-refractor-5034beef"),o.e("vendor-refractor-2069139d"),o.e("vendor-refractor-4ef87f2b"),o.e("vendor-refractor-1c85f667"),o.e("vendor-refractor-cc9bc6eb"),o.e("vendor-refractor-f0f0f757"),o.e("app-chat-ChatMessage"),o.e("vendors-node_modules_hastscript_index_js-node_modules_parse-entities_index_js-node_modules_ba-4ae368"),o.e("common")]).then(o.bind(o,65026))));let u;const f=e=>{let{message:r,isStreaming:o=!1,onEditMessage:l=null,overrideContent:f=null,avatarUrl:v=null}=e;const h=null!=f?f:r.content,[b,g]=(0,a.J0)(!1),p=(0,a.Kr)((()=>"assistant"===r.role?h:(0,d.rP)(h)),[h,r.role]),[k,x]=(0,a.J0)(p);(0,a.vJ)((()=>{x(p)}),[p]),(0,a.vJ)((()=>{if("assistant"!==r.role||"string"!=typeof h||"undefined"==typeof Worker)return;const e=r.timestamp,o=("undefined"==typeof Worker||u||(u=new(c())),u),a=r=>{r.data.id===e&&(r.data.success?x(r.data.data):x(h))};return o.addEventListener("message",a),o.postMessage({id:e,content:h}),()=>{o.removeEventListener("message",a)}}),[h,r.role,r.timestamp]);const j=(0,a.Kr)((()=>{switch(r.role){case"user":return v?(0,_.Y)("img",{src:v,alt:"User avatar",className:n.A.ChatMessage__avatarImg}):null;case"assistant":return(0,_.Y)(s.MiJ,{size:16,className:n.A.ChatMessage__icon});case"system":return(0,_.Y)(s.L64,{size:16,className:n.A.ChatMessage__icon});case"error":return(0,_.Y)(s._0O,{size:16,className:n.A.ChatMessage__icon});default:return null}}),[r.role,v]),C=(0,a.Kr)((()=>{switch(r.role){case"user":return n.A["ChatMessage--user"];case"assistant":return n.A["ChatMessage--assistant"];case"system":return n.A["ChatMessage--system"];case"error":return n.A["ChatMessage--error"];default:return""}}),[r.role]),A=(0,a.Kr)((()=>!("assistant"!==r.role||!r.metrics)),[r.role,r.metrics]),M=(0,a.hb)((()=>{const e="string"==typeof r.content?r.content:Array.isArray(r.content)?r.content.filter((e=>"text"===e.type)).map((e=>e.text)).join("\n"):"";navigator.clipboard.writeText(e).then((()=>{g(!0),setTimeout((()=>g(!1)),2e3)}))}),[r.content]),y=(0,a.Kr)((()=>(0,_.Y)("button",{className:`${n.A.ChatMessage__copyMessageButton} ${"assistant"===r.role&&A?n.A.ChatMessage__copyMessageButtonInMetrics:n.A.ChatMessage__copyMessageButtonBottomRight}`,onClick:M,"aria-label":"Copy message",title:"Copy message",children:b?(0,_.Y)(s.Srz,{size:16}):(0,_.Y)(s.TdU,{size:16})})),[M,r.role,A,b]),w=(0,a.hb)((()=>{l&&l(r)}),[l,r]),Y=(0,a.Kr)((()=>"user"===r.role?(0,_.Y)("button",{className:n.A.ChatMessage__editMessageButton,onClick:w,"aria-label":"Edit message",title:"Edit message",children:(0,_.Y)(s.R2l,{size:16})}):null),[r.role,w]);return(0,_.FD)("div",{className:n.A.ChatMessage+" "+C,children:[(0,_.FD)("div",{className:n.A.ChatMessage__body,children:[j&&(0,_.Y)("div",{className:n.A.ChatMessage__avatar,children:j}),(0,_.FD)("div",{className:n.A.ChatMessage__contentWrapper,children:[(0,_.Y)(a.tY,{fallback:null,children:(0,_.Y)("div",{className:n.A.ChatMessage__content,children:"assistant"===r.role?(0,_.Y)(m,{content:k,isStreaming:o}):(0,_.Y)(i.A,{children:k})})}),"assistant"===r.role&&(()=>{if(!A||!r.metrics)return null;const e=o,{elapsedTime:a,tokenCount:d,tokensPerSecond:i,timeToFirstToken:l,promptTokens:c,completionTokens:m,totalTokens:u,finishReason:f}=r.metrics;return null!=a||null!=d||null!=i||null!=l||null!=c||null!=m||null!=u||null!=f?(0,_.FD)("div",{className:n.A.ChatMessage__metricsContainer,children:[null!=l&&0!==l&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.O4,{size:14,className:n.A.ChatMessage__metricIcon}),"First Token: ",(0,t.f)(l)]}),null!=a&&0!==a&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.O4,{size:14,className:n.A.ChatMessage__metricIcon}),"Total Time: ",(0,t.f)(a)]}),null!=d&&0!==d&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Tokens: ",d]}),null!=c&&0!==c&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Prompt: ",c]}),null!=m&&0!==m&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Completion: ",m]}),null!=u&&0!==u&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Total: ",u]}),null!=i&&0!==i&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s.BHx,{size:14,className:n.A.ChatMessage__metricIcon}),"Speed: ",i," t/s"]}),null!=f&&""!==f&&"stop"!==f.toLowerCase()&&"unknown"!==f.toLowerCase()&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(s._0O,{size:14,className:n.A.ChatMessage__metricIcon}),f]}),e&&(0,_.FD)("span",{className:`${n.A.ChatMessage__metric} ${n.A.ChatMessage__generatingIndicator}`,children:[(0,_.Y)("span",{className:n.A.ChatMessage__generatingDot}),"Generating..."]}),y]}):null})(),"user"!==r.role&&("assistant"!==r.role||!A)&&y]})]}),"user"===r.role&&(0,_.FD)("div",{className:n.A.ChatMessage__actions,children:[Y,y]})]})};f.displayName="ChatMessage";const v=(0,a.ph)(f)},65026:(e,r,o)=>{o.r(r),o.d(r,{default:()=>u});var a=o(85908),s=o(45436),n=o(96926),t=o(87722),d=o(79692),i=o(44440);const l=new Set,c=()=>(0,i.FD)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"14",height:"14",children:[(0,i.Y)("path",{fillRule:"evenodd",d:"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"}),(0,i.Y)("path",{fillRule:"evenodd",d:"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"})]}),_=()=>(0,i.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"14",height:"14",children:(0,i.Y)("path",{fillRule:"evenodd",d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"})}),m=(0,a.RZ)((async()=>{const[e,r,a,s,n]=await Promise.all([Promise.all([o.e("utils"),o.e("large-vendor-micromark-core-commonmark"),o.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),o.e("vendors-node_modules_extend_index_js-node_modules_inline-style-parser_index_js-node_modules_b-132821"),o.e("vendors-node_modules_micromark-factory-destination_index_js-node_modules_micromark-factory-la-b99e24"),o.e("vendors-node_modules_micromark_lib_parse_js-node_modules_micromark_lib_postprocess_js-node_mo-6de913"),o.e("vendors-node_modules_property-information_index_js-node_modules_property-information_lib_find-e02ac5"),o.e("vendors-node_modules_react-markdown_lib_react-markdown_js"),o.e("vendors-node_modules_remark-rehype_lib_index_js"),o.e("vendors-node_modules_space-separated-tokens_index_js-node_modules_style-to-object_index_mjs-n-286e03"),o.e("vendors-node_modules_vfile_lib_index_js"),o.e("node_modules_react-markdown_index_js")]).then(o.bind(o,91541)),Promise.all([o.e("large-vendor-micromark-core-commonmark"),o.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),o.e("vendors-node_modules_mdast-util-gfm_lib_index_js"),o.e("vendors-node_modules_mdast-util-to-markdown_lib_handle_inline-code_js-node_modules_mdast-util-fe523e"),o.e("vendors-node_modules_micromark-extension-gfm-autolink-literal_lib_syntax_js-node_modules_micr-143c10"),o.e("vendors-node_modules_remark-gfm_index_js")]).then(o.bind(o,26505)),Promise.all([o.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),o.e("vendors-node_modules_remark-emoji_index_js"),o.e("vendors-node_modules_emojilib_emojis_json")]).then(o.bind(o,8012)),Promise.all([o.e("vendors-node_modules_remark-math_index_js"),o.e("node_modules_mdast-util-to-markdown_lib_util_safe_js-node_modules_mdast-util-to-markdown_lib_-23b9bc")]).then(o.bind(o,78573)),Promise.all([o.e("katex-9241dc7c"),o.e("katex-6f17a2aa"),o.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),o.e("vendors-node_modules_hast-util-from-html-isomorphic_lib_browser_js"),o.e("vendors-node_modules_hast-util-to-text_lib_index_js-node_modules_web-namespaces_index_js"),o.e("node_modules_comma-separated-tokens_index_js-node_modules_space-separated-tokens_index_js")]).then(o.bind(o,94163)),Promise.all([o.e("katex-9241dc7c"),o.e("katex-6f17a2aa")]).then(o.bind(o,96106))]);return{default:o=>{let{children:t,components:d}=o;return(0,i.Y)(e.default,{remarkPlugins:[r.default||r,a.default||a,s.default||s],rehypePlugins:[n.default||n],components:d,children:t})}}}));"undefined"!=typeof window&&(window.requestIdleCallback||(e=>setTimeout(e,2e3)))((()=>{o.e("syntax-highlighter").then(o.bind(o,81254)),o.e("syntax-highlighter").then(o.bind(o,4323)),Promise.all([o.e("utils"),o.e("large-vendor-micromark-core-commonmark"),o.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),o.e("vendors-node_modules_extend_index_js-node_modules_inline-style-parser_index_js-node_modules_b-132821"),o.e("vendors-node_modules_micromark-factory-destination_index_js-node_modules_micromark-factory-la-b99e24"),o.e("vendors-node_modules_micromark_lib_parse_js-node_modules_micromark_lib_postprocess_js-node_mo-6de913"),o.e("vendors-node_modules_property-information_index_js-node_modules_property-information_lib_find-e02ac5"),o.e("vendors-node_modules_react-markdown_lib_react-markdown_js"),o.e("vendors-node_modules_remark-rehype_lib_index_js"),o.e("vendors-node_modules_space-separated-tokens_index_js-node_modules_style-to-object_index_mjs-n-286e03"),o.e("vendors-node_modules_vfile_lib_index_js"),o.e("node_modules_react-markdown_index_js")]).then(o.bind(o,91541)),Promise.all([o.e("large-vendor-micromark-core-commonmark"),o.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),o.e("vendors-node_modules_mdast-util-gfm_lib_index_js"),o.e("vendors-node_modules_mdast-util-to-markdown_lib_handle_inline-code_js-node_modules_mdast-util-fe523e"),o.e("vendors-node_modules_micromark-extension-gfm-autolink-literal_lib_syntax_js-node_modules_micr-143c10"),o.e("vendors-node_modules_remark-gfm_index_js")]).then(o.bind(o,26505)),Promise.all([o.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),o.e("vendors-node_modules_remark-emoji_index_js"),o.e("vendors-node_modules_emojilib_emojis_json")]).then(o.bind(o,8012)),Promise.all([o.e("vendors-node_modules_remark-math_index_js"),o.e("node_modules_mdast-util-to-markdown_lib_util_safe_js-node_modules_mdast-util-to-markdown_lib_-23b9bc")]).then(o.bind(o,78573)),Promise.all([o.e("katex-9241dc7c"),o.e("katex-6f17a2aa"),o.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),o.e("vendors-node_modules_hast-util-from-html-isomorphic_lib_browser_js"),o.e("vendors-node_modules_hast-util-to-text_lib_index_js-node_modules_web-namespaces_index_js"),o.e("node_modules_comma-separated-tokens_index_js-node_modules_space-separated-tokens_index_js")]).then(o.bind(o,94163)),Promise.all([o.e("katex-9241dc7c"),o.e("katex-6f17a2aa")]).then(o.bind(o,96106))}));const u=e=>{let{content:r,isStreaming:u}=e;const{isDark:f}=(0,n.D)(),[v,h]=(0,a.J0)({}),[b,g]=(0,a.J0)(null);(0,a.vJ)((()=>{(async()=>{try{if(f){const e=await o.e("syntax-highlighter").then(o.bind(o,81254));g(e.default)}else{const e=await o.e("syntax-highlighter").then(o.bind(o,4323));g(e.default)}}catch(e){}})()}),[f]);const p=(0,a.hb)(((e,r)=>{navigator.clipboard.writeText(e).then((()=>{h((e=>({...e,[r]:!0}))),setTimeout((()=>{h((e=>({...e,[r]:!1})))}),2e3)}))}),[]),k=(0,a.hb)((e=>{var r,n,t;let{node:m,inline:u,className:f,children:h,...g}=e;const k=/language-(\w+)/.exec(f||""),x=k?k[1]:"plaintext";x&&!l.has(x)&&o(60076)(`./${x}.js`).then((e=>{d.A.registerLanguage(x,e.default||e),l.add(x)})).catch((e=>{}));const j=String(h).replace(/\n$/,""),C=null!==(r=null==m||null===(n=m.position)||void 0===n||null===(t=n.start)||void 0===t?void 0:t.offset)&&void 0!==r?r:j.substring(0,20),A=v[C];return u?(0,i.Y)("code",{className:`${s.A.inlineCode} ${f||""}`,...g,children:h}):(0,i.FD)("div",{className:s.A.codeBlockContainer,children:[(0,i.FD)("div",{className:s.A.codeHeader,children:[(0,i.Y)("span",{className:s.A.language,children:x}),(0,i.Y)("button",{className:s.A.copyButton,onClick:()=>p(j,C),disabled:A,children:A?(0,i.FD)(i.FK,{children:[" ",(0,i.Y)(_,{})," Copied! "]}):(0,i.FD)(i.FK,{children:[" ",(0,i.Y)(c,{})," Copy "]})})]}),(0,i.Y)(a.tY,{fallback:(0,i.Y)("pre",{className:s.A.pre,children:j}),children:b?(0,i.Y)(d.A,{style:b,customStyle:{background:"transparent"},language:x,PreTag:"div",className:s.A.pre,wrapLines:!0,...g,children:j}):(0,i.Y)("pre",{className:s.A.pre,children:j})})]})}),[b,p,v]),x=(0,a.Kr)((()=>({code:k})),[k]),j=`${s.A.markdown} ${s.A.ChatMessage__streamingContent} ${u?s.A["ChatMessage__streamingContent--streaming"]:""}`,C="string"==typeof r?r:String(r||""),A=C?(0,t.rP)(C):"​";return(0,i.Y)("div",{className:j,children:(0,i.Y)(a.tY,{fallback:(0,i.Y)("div",{children:A}),children:(0,i.Y)(m,{components:x,children:A})})})}}}]);
//# sourceMappingURL=app-chat-ChatMessage.fe2a1f061e.chunk.v1_9_0.js.map