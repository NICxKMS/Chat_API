"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([[8403],{73882:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var n=s(65043),l=s(3970),o=s(94692),r=s(60247),a=s(70579);const c=(0,n.lazy)((()=>Promise.all([s.e(3011),s.e(5087),s.e(8810),s.e(2845),s.e(9793),s.e(6017),s.e(399),s.e(4917),s.e(7777),s.e(7316),s.e(3294),s.e(912),s.e(8417),s.e(6056),s.e(9469),s.e(8896),s.e(652),s.e(8513),s.e(5391),s.e(5417),s.e(6986),s.e(4833),s.e(8447)]).then(s.bind(s,14039)))),i=(0,n.lazy)((()=>Promise.all([s.e(3011),s.e(5087),s.e(8810),s.e(2845),s.e(9793),s.e(6017),s.e(399),s.e(4917),s.e(7777),s.e(7316),s.e(3294),s.e(7218)]).then(s.bind(s,19217)))),d=(0,n.lazy)((()=>Promise.all([s.e(6017),s.e(399),s.e(4917),s.e(7777),s.e(7316),s.e(3294),s.e(912),s.e(8417),s.e(6056),s.e(9469),s.e(8896),s.e(652),s.e(8513),s.e(5391),s.e(5417),s.e(6986),s.e(4833),s.e(8447)]).then(s.bind(s,92932)))),u=(0,n.lazy)((()=>Promise.all([s.e(3011),s.e(5087),s.e(8810),s.e(2845),s.e(9793),s.e(6017),s.e(399),s.e(4917),s.e(7777),s.e(7316),s.e(3294),s.e(912),s.e(8417),s.e(6056),s.e(9469),s.e(8896),s.e(652),s.e(8513),s.e(5391),s.e(5417),s.e(6986),s.e(4833),s.e(8447)]).then(s.bind(s,84275)))),h=(0,n.memo)((e=>{let{selectedModel:t,isLoadingModels:s,toggleModelSelector:h,onNewChat:m,onResetChat:f,onDownloadChat:p,onToggleSettings:g,isSidebarOpen:v,isSettingsOpen:x,isModelSelectorOpen:A}=e;const{chatHistory:b,isWaitingForResponse:j,error:C,metrics:S,selectedModel:N,handleSendMessage:y}=(0,l.e)(),[M,k]=(0,n.useState)(null),E=(0,n.useRef)(null),$=(0,n.useRef)(null),I=b.length>0,[T,P]=(0,n.useState)(!1),q=(0,n.useRef)(b.length),w=(0,n.useRef)(j);(0,n.useEffect)((()=>{const e=()=>{const e=document.querySelector(".inputContainer")||document.querySelector(`.${r.A.fixedInputArea}`);if(e){const t=e.offsetHeight;document.documentElement.style.setProperty("--input-height",`${t}px`)}};e();const t=new ResizeObserver(e),s=document.querySelector(".inputContainer")||document.querySelector(`.${r.A.fixedInputArea}`);return s&&t.observe(s),()=>{s&&t.unobserve(s),t.disconnect()}}),[b,M]);const H=(0,n.useCallback)((()=>{setTimeout((()=>{const e=document.querySelector("textarea."+r.A.chatInput)||document.querySelector('textarea[aria-label="Chat message input"]');e&&e.focus()}),100)}),[]);(0,n.useEffect)((()=>{H()}),[H]),(0,n.useEffect)((()=>{if(w.current&&!j){!(v||x||A||M)&&H()}w.current=j}),[j,v,x,A,M,H]);const R=(0,n.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";$.current&&($.current.scrollTo({top:$.current.scrollHeight,behavior:e}),P(!1))}),[]);(0,n.useEffect)((()=>{$.current&&I&&(b.length,q.current,q.current=b.length)}),[b,I]),(0,n.useEffect)((()=>{const e=$.current;if(!e)return;const t=()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;P(!t)};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)}),[T]),(0,n.useEffect)((()=>{const e=$.current;if(!e)return;const t=setTimeout((()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;P(!t)}),100);return()=>clearTimeout(t)}),[b]);const z=null==t?void 0:t.name,L=null==t?void 0:t.provider,O=(0,n.useCallback)((e=>{j||(k(e),setTimeout((()=>{const e=document.querySelector(`.${r.A.fixedInputArea}`);e&&e.scrollIntoView({behavior:"smooth"})}),100))}),[j]),W=(0,n.useCallback)((()=>{k(null)}),[]);(0,n.useEffect)((()=>{j&&M&&k(null)}),[j,M]);const _=`${r.A.chatContainer} ${I?r.A.activeChat:r.A.emptyChat} ${M?r.A.editingMode:""}`,B=e=>{const t=!e;return(0,a.jsxs)(a.Fragment,{children:[e&&!M&&(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:r.A.globalMetricsPlaceholder}),children:(0,a.jsx)(d,{metrics:null==S?void 0:S.session,modelName:null==N?void 0:N.name})}),(0,a.jsx)("div",{className:r.A.inputControlsWrapper,children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:r.A.inputPlaceholder}),children:(0,a.jsx)(i,{onSendMessage:y,disabled:j,selectedModel:N,onNewChat:m,isStaticLayout:t,editingMessage:M,onCancelEdit:W,isStreaming:j,toggleModelSelector:h,onFocus:H})})})]})};return(0,a.jsxs)("div",{className:_,children:[(0,a.jsx)("div",{className:r.A.modelButtonContainer,children:(0,a.jsx)(n.Suspense,{fallback:null,children:(0,a.jsx)(u,{selectedModelName:z,providerName:L,onClick:h,disabled:s})})}),(0,a.jsxs)("div",{className:r.A.chatAreaWrapper,children:[(0,a.jsx)("div",{className:r.A.chatArea,children:I?(0,a.jsx)("div",{className:r.A.scrollContainer,ref:$,children:(0,a.jsx)("div",{className:r.A.scrollInner,children:(0,a.jsx)(n.Suspense,{fallback:(0,a.jsx)("div",{className:r.A.messagePlaceholder}),children:(0,a.jsx)(c,{ref:E,messages:b,error:C,onEditMessage:O})})})}):(0,a.jsxs)("div",{className:r.A.emptyChatContent,children:[(0,a.jsxs)("div",{className:r.A.greetingMessage,children:[(0,a.jsx)("h2",{children:"Welcome to AI Chat!"}),(0,a.jsx)("p",{children:"Select a model above and start your conversation."})]}),(0,a.jsx)("div",{className:`${r.A.inputArea} ${r.A.staticInputArea}`,children:B(!1)})]})}),T&&I&&(0,a.jsx)("button",{className:r.A.scrollToBottomButton,onClick:()=>R("smooth"),"aria-label":"Scroll to bottom",title:"Scroll to bottom",children:(0,a.jsx)(o.D3D,{size:20})})]}),I&&(0,a.jsx)("div",{className:`${r.A.inputArea} ${r.A.fixedInputArea}`,children:B(!0)})]})}));h.displayName="ChatContainer";const m=h}}]);
//# sourceMappingURL=chat-container.d121a8f3.chunk.js.map