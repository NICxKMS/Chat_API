"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["chat-container"],{57557:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(85908),l=n(89827),s=n(42379),r=n(39740),i=n(17696),o=n.n(i),c=n(44440);const d=(0,a.RZ)((()=>Promise.all([n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-c388cea0"),n.e("app-large-4f064d56"),n.e("app-large-8367718c"),n.e("app-large-102ff935"),n.e("app-large-6b882012"),n.e("app-chat-ChatMessage"),n.e("common")]).then(n.bind(n,33219)))),h=(0,a.RZ)((()=>Promise.all([n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-c388cea0"),n.e("large-vendor-primer"),n.e("app-chat-ChatInput")]).then(n.bind(n,6682)))),u=(0,a.RZ)((()=>Promise.all([n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-c388cea0"),n.e("common")]).then(n.bind(n,12813)))),C=(0,a.RZ)((()=>Promise.all([n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-c388cea0"),n.e("model-selector-button")]).then(n.bind(n,28032)))),m=(0,a.ph)((e=>{let{selectedModel:t,isLoadingModels:n,toggleModelSelector:i,onToggleSettings:m,isSidebarOpen:p,isSettingsOpen:v,isModelSelectorOpen:g}=e;const{chatHistory:b,isWaitingForResponse:_,error:y,metrics:f,selectedModel:A,handleSendMessage:Y}=(0,l.e)(),[N,M]=(0,a.J0)(null),S=(0,a.li)(null),k=(0,a.li)(null),$=(0,a.li)(null),I=b.length>0,[J,T]=(0,a.J0)(!1),E=(0,a.li)(_),F=(0,a.hb)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";k.current&&(k.current.scrollTo({top:k.current.scrollHeight,behavior:e}),T(!1))}),[]),P=(0,a.hb)((()=>{const e=k.current;if(!e)return;const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;T(!t)}),[]),D=(0,a.Kr)((()=>o()(P,100)),[P]),L=(0,a.hb)((()=>{setTimeout((()=>{const e=document.querySelector("textarea."+r.A.chatInput)||document.querySelector('textarea[aria-label="Chat message input"]');e&&e.focus()}),100)}),[]);(0,a.vJ)((()=>{L()}),[L]),(0,a.vJ)((()=>{E.current&&!_&&!(p||v||g||N)&&L(),E.current=_}),[_,p,v,g,N,L]),(0,a.vJ)((()=>{const e=k.current;if(e)return D(),e.addEventListener("scroll",D,{passive:!0}),()=>{e.removeEventListener("scroll",D),D.cancel()}}),[D]),(0,a.vJ)((()=>{const e=k.current;if(!e)return;const t=()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;T(!t)};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)}),[J]),(0,a.vJ)((()=>{const e=setTimeout((()=>D()),100);return()=>clearTimeout(e)}),[b,D]);const w=null==t?void 0:t.name,x=null==t?void 0:t.provider,H=(0,a.hb)((e=>{_||(M(e),setTimeout((()=>{document.querySelector(`.${r.A.ChatContainer__fixedInputArea}`)}),100))}),[_]),R=(0,a.hb)((()=>{M(null)}),[]);(0,a.vJ)((()=>{_&&N&&M(null)}),[_,N]);const q=`${r.A.ChatContainer} ${I?r.A["ChatContainer--activeChat"]:r.A["ChatContainer--emptyChat"]} ${N?r.A["ChatContainer--editingMode"]:""}`,B=e=>{const t=!I;return(0,c.FD)(c.FK,{children:[e&&!N&&(0,c.Y)(a.tY,{fallback:(0,c.Y)("div",{className:r.A.globalMetricsPlaceholder}),children:(0,c.Y)(u,{metrics:null==f?void 0:f.session,modelName:null==A?void 0:A.name})}),(0,c.Y)("div",{className:r.A.ChatContainer__inputControlsWrapper,children:(0,c.Y)(a.tY,{fallback:(0,c.Y)("div",{className:r.A.ChatContainer__inputPlaceholder}),children:(0,c.Y)(h,{isInitialChat:t,onSendMessage:Y,disabled:_,selectedModel:A,editingMessage:N,onCancelEdit:R,isStreaming:_,toggleModelSelector:i,onFocus:L})})})]})};return(0,a.vJ)((()=>{if(!b.length)return;const e=$.current;if(!e)return;const t=()=>{const t=e.querySelector(`.${r.A.ChatContainer__fixedInputArea}`);if(t){const n=t.getBoundingClientRect().height;e.style.setProperty("--input-height",`${n}px`)}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[b]),(0,c.FD)("div",{ref:$,className:q,children:[(0,c.Y)("div",{className:r.A.ChatContainer__modelButtonContainer,children:(0,c.Y)(a.tY,{fallback:null,children:(0,c.Y)(C,{selectedModelName:w,providerName:x,onClick:i,disabled:n})})}),(0,c.FD)("div",{className:r.A.ChatContainer__chatAreaWrapper,children:[(0,c.Y)("div",{className:r.A.ChatContainer__chatArea,children:I?(0,c.Y)("div",{className:r.A.ChatContainer__scrollContainer,ref:k,children:(0,c.Y)("div",{className:r.A.ChatContainer__scrollInner,children:(0,c.Y)(a.tY,{fallback:(0,c.Y)("div",{className:r.A.messagePlaceholder}),children:(0,c.Y)(d,{ref:S,messages:b,error:y,onEditMessage:H})})})}):(0,c.FD)("div",{className:r.A.ChatContainer__emptyChatContent,children:[(0,c.FD)("div",{className:r.A.ChatContainer__greetingMessage,children:[(0,c.Y)("h2",{children:"Welcome to AI Chat!"}),(0,c.Y)("p",{children:"Select a model above and start your conversation."})]}),(0,c.Y)("div",{className:`${r.A.ChatContainer__inputArea} ${r.A.ChatContainer__staticInputArea}`,children:B(!1)})]})}),J&&I&&(0,c.Y)("button",{className:r.A.ChatContainer__scrollToBottomButton,onClick:()=>F("smooth"),"aria-label":"Scroll to bottom",title:"Scroll to bottom",children:(0,c.Y)(s.D3D,{size:20})})]}),I&&(0,c.Y)("div",{className:`${r.A.ChatContainer__inputArea} ${r.A.ChatContainer__fixedInputArea}`,children:B(!0)})]})}));m.displayName="ChatContainer";const p=m}}]);
//# sourceMappingURL=chat-container.2a4f29a824.chunk.v1_9_0.js.map