(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["chat-container"],{4807:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(17906),i=n(92503),a=n(92167),s=n(96377),o=n(20409);const l=()=>{const{chatHistory:e,isWaitingForResponse:t,error:n,currentMessageMetrics:l}=(0,i.P)(),{sendMessage:c,clearChat:d,downloadChatHistory:u}=(0,a.r)(),{selectedModel:h}=(0,s.fn)(),{settings:f}=(0,o.t)(),m=(0,r.hb)((async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=!!n;if(((Array.isArray(t)?t.map((e=>"text"===e.type?e.text:"")).join(" ").trim():t)||Array.isArray(t))&&h)try{if(r){const r=n.uniqueId||n.id||n.timestamp,i=e.findIndex((e=>[e.uniqueId,e.id,e.timestamp].includes(r)||"string"==typeof e.content&&e.content===n.content&&"user"===e.role));if(-1===i)return;const a=Array.isArray(t)?t:{type:"text",text:t};Array.isArray(a),a.uniqueId=r,await c(a,i)}else{const e=`msg_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,n=Array.isArray(t)?t.map((t=>({...t,uniqueId:e}))):t;Array.isArray(n)||(n.uniqueId=e),await c(n)}}catch(e){}}),[h,c,e]);return{chatHistory:e,isWaitingForResponse:t,error:n,metrics:l,selectedModel:h,settings:f,handleSendMessage:m,resetChat:d,downloadChatHistory:u}};var c=n(94692),d=n(60247),u=n(70381),h=n.n(u),f=n(63121);const m=(0,r.RZ)((()=>Promise.all([n.e("icons-8b15a53d"),n.e("icons-c1b46ba6"),n.e("icons-8e8c8d13"),n.e("icons-4b3f4eb3"),n.e("icons-f2a4f970"),n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-fe5b6f8a"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-237f6cdc"),n.e("chat-messagelist")]).then(n.bind(n,43548)))),y=(0,r.RZ)((()=>Promise.all([n.e("icons-8b15a53d"),n.e("icons-c1b46ba6"),n.e("icons-8e8c8d13"),n.e("icons-4b3f4eb3"),n.e("icons-f2a4f970"),n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-fe5b6f8a"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-237f6cdc"),n.e("chat-input")]).then(n.bind(n,93912)))),v=(0,r.RZ)((()=>Promise.all([n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-fe5b6f8a"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-237f6cdc"),n.e("chat-globalmetrics")]).then(n.bind(n,92932)))),b=(0,r.RZ)((()=>Promise.all([n.e("styles-b2c1640e"),n.e("styles-31743c5a"),n.e("styles-b4afe919"),n.e("styles-fe5b6f8a"),n.e("styles-88d3322f"),n.e("styles-61a228d7"),n.e("styles-237f6cdc"),n.e("model-selector-button")]).then(n.bind(n,84275)))),g=(0,r.ph)((e=>{let{selectedModel:t,isLoadingModels:n,toggleModelSelector:i,onToggleSettings:a,isSidebarOpen:s,isSettingsOpen:o,isModelSelectorOpen:u}=e;const{chatHistory:g,isWaitingForResponse:p,error:C,metrics:A,selectedModel:_,handleSendMessage:Y}=l(),[M,N]=(0,r.J0)(null),S=(0,r.li)(null),x=(0,r.li)(null),w=(0,r.li)(null),T=g.length>0,[$,I]=(0,r.J0)(!1),j=(0,r.li)(p),E=(0,r.hb)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"smooth";x.current&&(x.current.scrollTo({top:x.current.scrollHeight,behavior:e}),I(!1))}),[]),F=(0,r.hb)((()=>{const e=x.current;if(!e)return;const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;I(!t)}),[]),k=(0,r.Kr)((()=>h()(F,100)),[F]),H=(0,r.hb)((()=>{setTimeout((()=>{const e=document.querySelector("textarea."+d.A.chatInput)||document.querySelector('textarea[aria-label="Chat message input"]');e&&e.focus()}),100)}),[]);(0,r.vJ)((()=>{H()}),[H]),(0,r.vJ)((()=>{if(j.current&&!p){!(s||o||u||M)&&H()}j.current=p}),[p,s,o,u,M,H]),(0,r.vJ)((()=>{const e=x.current;if(e)return k(),e.addEventListener("scroll",k,{passive:!0}),()=>{e.removeEventListener("scroll",k),k.cancel()}}),[k]),(0,r.vJ)((()=>{const e=x.current;if(!e)return;const t=()=>{const t=e.scrollHeight-e.scrollTop-e.clientHeight<10;I(!t)};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)}),[$]),(0,r.vJ)((()=>{const e=setTimeout((()=>k()),100);return()=>clearTimeout(e)}),[g,k]);const O=null==t?void 0:t.name,q=null==t?void 0:t.provider,D=(0,r.hb)((e=>{p||(N(e),setTimeout((()=>{document.querySelector(`.${d.A.ChatContainer__fixedInputArea}`)}),100))}),[p]),J=(0,r.hb)((()=>{N(null)}),[]);(0,r.vJ)((()=>{p&&M&&N(null)}),[p,M]);const P=`${d.A.ChatContainer} ${T?d.A["ChatContainer--activeChat"]:d.A["ChatContainer--emptyChat"]} ${M?d.A["ChatContainer--editingMode"]:""}`,W=e=>{const t=!T;return(0,f.FD)(f.FK,{children:[e&&!M&&(0,f.Y)(r.tY,{fallback:(0,f.Y)("div",{className:d.A.globalMetricsPlaceholder}),children:(0,f.Y)(v,{metrics:null==A?void 0:A.session,modelName:null==_?void 0:_.name})}),(0,f.Y)("div",{className:d.A.ChatContainer__inputControlsWrapper,children:(0,f.Y)(r.tY,{fallback:(0,f.Y)("div",{className:d.A.ChatContainer__inputPlaceholder}),children:(0,f.Y)(y,{isInitialChat:t,onSendMessage:Y,disabled:p,selectedModel:_,editingMessage:M,onCancelEdit:J,isStreaming:p,toggleModelSelector:i,onFocus:H})})})]})};return(0,r.vJ)((()=>{if(!g.length)return;const e=w.current;if(!e)return;const t=()=>{const t=e.querySelector(`.${d.A.ChatContainer__fixedInputArea}`);if(t){const n=t.getBoundingClientRect().height;e.style.setProperty("--input-height",`${n}px`)}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[g]),(0,f.FD)("div",{ref:w,className:P,children:[(0,f.Y)("div",{className:d.A.ChatContainer__modelButtonContainer,children:(0,f.Y)(r.tY,{fallback:null,children:(0,f.Y)(b,{selectedModelName:O,providerName:q,onClick:i,disabled:n})})}),(0,f.FD)("div",{className:d.A.ChatContainer__chatAreaWrapper,children:[(0,f.Y)("div",{className:d.A.ChatContainer__chatArea,children:T?(0,f.Y)("div",{className:d.A.ChatContainer__scrollContainer,ref:x,children:(0,f.Y)("div",{className:d.A.ChatContainer__scrollInner,children:(0,f.Y)(r.tY,{fallback:(0,f.Y)("div",{className:d.A.messagePlaceholder}),children:(0,f.Y)(m,{ref:S,messages:g,error:C,onEditMessage:D})})})}):(0,f.FD)("div",{className:d.A.ChatContainer__emptyChatContent,children:[(0,f.FD)("div",{className:d.A.ChatContainer__greetingMessage,children:[(0,f.Y)("h2",{children:"Welcome to AI Chat!"}),(0,f.Y)("p",{children:"Select a model above and start your conversation."})]}),(0,f.Y)("div",{className:`${d.A.ChatContainer__inputArea} ${d.A.ChatContainer__staticInputArea}`,children:W(!1)})]})}),$&&T&&(0,f.Y)("button",{className:d.A.ChatContainer__scrollToBottomButton,onClick:()=>E("smooth"),"aria-label":"Scroll to bottom",title:"Scroll to bottom",children:(0,f.Y)(c.D3D,{size:20})})]}),T&&(0,f.Y)("div",{className:`${d.A.ChatContainer__inputArea} ${d.A.ChatContainer__fixedInputArea}`,children:W(!0)})]})}));g.displayName="ChatContainer";const p=g},70381:(e,t,n)=>{var r="Expected a function",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),h=Object.prototype.toString,f=Math.max,m=Math.min,y=function(){return u.Date.now()};function v(e,t,n){var i,a,s,o,l,c,d=0,u=!1,h=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);function p(t){var n=i,r=a;return i=a=void 0,d=t,o=e.apply(r,n)}function C(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-d>=s}function A(){var e=y();if(C(e))return _(e);l=setTimeout(A,function(e){var n=t-(e-c);return h?m(n,s-(e-d)):n}(e))}function _(e){return l=void 0,v&&i?p(e):(i=a=void 0,o)}function Y(){var e=y(),n=C(e);if(i=arguments,a=this,c=e,n){if(void 0===l)return function(e){return d=e,l=setTimeout(A,t),u?p(e):o}(c);if(h)return l=setTimeout(A,t),p(c)}return void 0===l&&(l=setTimeout(A,t)),o}return t=g(t)||0,b(n)&&(u=!!n.leading,s=(h="maxWait"in n)?f(g(n.maxWait)||0,t):s,v="trailing"in n?!!n.trailing:v),Y.cancel=function(){void 0!==l&&clearTimeout(l),d=0,i=c=a=l=void 0},Y.flush=function(){return void 0===l?o:_(y())},Y}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||o.test(e)?l(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(r);return b(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),v(e,t,{leading:i,maxWait:t,trailing:a})}}}]);
//# sourceMappingURL=chat-container.ae839ee7c4.chunk.v1_9_0.js.map