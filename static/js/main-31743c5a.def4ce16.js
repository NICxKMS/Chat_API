"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([[3428],{13005:(e,t,r)=>{r.d(t,{D:()=>a,N:()=>i});var n=r(65043),o=r(70579);const s=(0,n.createContext)(),a=()=>{const e=(0,n.useContext)(s);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e},i=e=>{let{children:t}=e;const[r,a]=(0,n.useState)((()=>localStorage.getItem("theme")||"dark")),i=(0,n.useCallback)((()=>{a((e=>{const t="dark"===e?"light":"dark";return localStorage.setItem("theme",t),t}))}),[]);(0,n.useEffect)((()=>{document.body.classList.remove("light-mode","dark-mode"),document.body.classList.add(`${r}-mode`)}),[r]);const l=(0,n.useMemo)((()=>({theme:r,toggleTheme:i,isDark:"dark"===r})),[r,i]);return(0,o.jsx)(s.Provider,{value:l,children:t})}},14255:(e,t,r)=>{r.d(t,{B:()=>i,b:()=>l});var n=r(65043),o=r(52932),s=r(70579);const a=(0,n.createContext)(),i=()=>{const e=(0,n.useContext)(a);if(void 0===e)throw new Error("usePerformanceMetrics must be used within a PerformanceMetricsProvider");return e},l=e=>{let{children:t}=e;const{setChatHistory:r}=(0,o.m)(),[i,l]=(0,n.useState)({startTime:null,endTime:null,elapsedTime:null,tokenCount:null,tokensPerSecond:null,isComplete:!1,timeToFirstToken:null,promptTokens:null,completionTokens:null,totalTokens:null,finishReason:null}),c=(0,n.useCallback)((()=>{l({startTime:null,endTime:null,elapsedTime:null,tokenCount:null,tokensPerSecond:null,isComplete:!1,timeToFirstToken:null,promptTokens:null,completionTokens:null,totalTokens:null,finishReason:null})}),[]),u=(0,n.useCallback)((()=>{l((e=>({...e,startTime:Date.now(),isComplete:!1})))}),[]),d=(0,n.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l((o=>{const s=Date.now(),a=o.startTime?s-o.startTime:0,i=e&&a?Math.round(e/(a/1e3)*10)/10:o.tokensPerSecond,l=o.timeToFirstToken||(e>0?a:null);return{startTime:o.startTime,endTime:s,elapsedTime:a,tokenCount:e,tokensPerSecond:i,isComplete:t,timeToFirstToken:l,promptTokens:(null==r?void 0:r.promptTokens)||o.promptTokens,completionTokens:(null==r?void 0:r.completionTokens)||o.completionTokens,totalTokens:(null==r?void 0:r.totalTokens)||o.totalTokens,finishReason:n||o.finishReason}}))}),[]);(0,n.useEffect)((()=>{null!=i.endTime&&r((e=>{const t=[...e],r=t[t.length-1];return r&&"assistant"===r.role&&(r.metrics={...i}),t}))}),[i,r]);const m=(0,n.useCallback)((e=>{r((t=>{const r=[...t],n=r[r.length-1];return n&&"assistant"===n.role&&(n.metrics={...n.metrics||{},...e,isComplete:!0}),r}))}),[r]),p=(0,n.useMemo)((()=>({currentMessageMetrics:i,resetPerformanceMetrics:c,startPerformanceTimer:u,updatePerformanceMetrics:d,setTokenMetricsForLastMessage:m})),[i,c,u,d,m]);return(0,s.jsx)(a.Provider,{value:p,children:t})}},20409:(e,t,r)=>{r.d(t,{Z:()=>c,t:()=>l});var n=r(65043),o=r(94916),s=r(70579);const a={temperature:.7,top_p:1,max_tokens:8191,frequency_penalty:0,presence_penalty:0,streaming:!0,systemPrompt:"You are ChatGPT, a helpful and knowledgeable AI assistant. Your primary role is to assist Nikhil, a university engineering student, by providing clear, concise, and technically accurate information. Adopt a friendly and approachable tone, akin to a knowledgeable peer or mentor. Enhance your responses with relevant emojis to convey tone and emotion, making interactions more engaging. Structure your answers logically, using bullet points or numbered lists where appropriate to enhance clarity. When applicable, incorporate interactive elements such as code snippets or diagrams to facilitate deeper understanding. Encourage curiosity by suggesting related topics or questions that Nikhil might explore further. Always tailor your assistance to support Nikhil's academic and personal growth in the field of engineering"},i=(0,n.createContext)(),l=()=>{const e=(0,n.useContext)(i);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e},c=e=>{let{children:t}=e;const[r,l]=(0,o.M)("appSettings",a),c=(0,n.useCallback)(((e,t)=>{e in a&&l((r=>({...r,[e]:t})))}),[l]),u=(0,n.useCallback)((()=>{l(a)}),[l]),d=(0,n.useCallback)((e=>!!e&&(!0===e.requiresFixedTemperature||e.properties&&e.properties.includes("fixed_temperature")||e.id&&e.id.toLowerCase().startsWith("o")||e.series&&"o-series"===e.series.toLowerCase())),[]),m=(0,n.useCallback)((e=>d(e)?{...r,temperature:1}:r),[r,d]),p=(0,n.useMemo)((()=>({settings:r,updateSetting:c,resetSettings:u,shouldRestrictTemperature:d,getModelAdjustedSettings:m})),[r,c,u,d,m]);return(0,s.jsx)(i.Provider,{value:p,children:t})}},23400:(e,t,r)=>{r.d(t,{Hp:()=>s,l9:()=>o,wz:()=>n});const n={APP_START:"app-start",CONTEXT_INIT:"context-init",COMPONENT_LOAD:"component-load",IMPORTANT_COMPONENTS_LOADED:"important-components-loaded",FORMATTING_COMPONENTS_LOADED:"formatting-components-loaded",MODEL_SELECTOR_COMPONENTS_LOADED:"model-selector-components-loaded",FIRST_PAINT:"first-paint",FIRST_CONTENTFUL_PAINT:"first-contentful-paint",APP_INTERACTIVE:"app-interactive",APP_READY:"app-ready"},o={TOTAL_LOAD:"total-load-time",CONTEXT_INIT:"context-init-time",COMPONENT_LOAD:"component-load-time",TIME_TO_INTERACTIVE:"time-to-interactive",IMPORTANT_LOAD_TIME:"important-load-time",FORMATTING_LOAD_TIME:"formatting-load-time",MODEL_SELECTOR_LOAD_TIME:"model-selector-load-time"};const s=new class{constructor(){this.marks=new Set,this.measures=new Set,"undefined"!=typeof window&&"performance"in window&&"PerformanceObserver"in window&&this.trackPaintMetrics()}trackPaintMetrics(){try{new PerformanceObserver((e=>{e.getEntries().forEach((e=>{const t="first-paint"===e.name?n.FIRST_PAINT:n.FIRST_CONTENTFUL_PAINT;performance.mark(t),this.marks.add(t);const r="first-paint"===e.name?"time-to-first-paint":"time-to-first-contentful-paint";try{performance.measure(r,n.APP_START,t),this.measures.add(r)}catch(e){}}))})).observe({entryTypes:["paint"]})}catch(e){}}mark(e){performance&&performance.mark&&(performance.mark(e),this.marks.add(e))}measure(e,t,r){if(performance&&performance.measure)try{performance.measure(e,t,r),this.measures.add(e)}catch(e){}}getMeasures(){return performance&&performance.getEntriesByType?performance.getEntriesByType("measure"):[]}clear(){performance&&(performance.clearMarks(),performance.clearMeasures(),this.marks.clear(),this.measures.clear())}logMetrics(){this.getMeasures().forEach((e=>{})),window}}},25960:(e,t,r)=>{var n=r(65043),o=r(84391),s=(r(59555),r(54111));const a=e=>{e&&e instanceof Function&&r.e(3453).then(r.bind(r,2488)).then((t=>{let{getCLS:r,getFID:n,getFCP:o,getLCP:s,getTTFB:a}=t;r(e),n(e),o(e),s(e),a(e)}))},i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const r=e.installing;null!=r&&(r.onstatechange=()=>{"installed"===r.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((e=>{}))}var c=r(70579);o.createRoot(document.getElementById("root")).render((0,c.jsx)(n.StrictMode,{children:(0,c.jsx)(n.Suspense,{fallback:(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}),children:(0,c.jsx)(s.A,{})})})),a((function(){})),function(e){if("service-worker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="/service-worker.js";i?function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((r=>{const n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):l(e,t)})).catch((()=>{}))}(t,e):l(t,e)}))}}({onUpdate:e=>{const t=e.waiting;t&&(t.addEventListener("statechange",(e=>{"activated"===e.target.state&&window.location.reload()})),t.postMessage({type:"SKIP_WAITING"}))}})},64339:(e,t,r)=>{e.exports=r.p+"static/media/streamProcessor.2f8268fe106a51a9877d.js"},71789:(e,t,r)=>{r.d(t,{$:()=>g,V:()=>w});var n=r(65043),o=r(91578),s=r(96377),a=r(20409),i=r(35016),l=r(52932),c=r(36514),u=r(14255),d=r(87164),m=r(10446),p=r.n(m),h=r(70579);const f=(0,n.createContext)(),g=()=>{const e=(0,n.useContext)(f);if(void 0===e)throw new Error("useStreamingEvents must be used within a StreamingEventsProvider");return e},w=e=>{let{children:t}=e;const{apiUrl:m}=(0,o.g)(),{selectedModel:g}=(0,s.fn)(),{getModelAdjustedSettings:w}=(0,a.t)(),{idToken:T}=(0,i.A)(),{chatHistoryRef:k,setChatHistory:y,addMessageToHistory:C,updateChatWithContent:M}=(0,l.m)(),{setIsWaitingForResponse:v,setError:S}=(0,c.A)(),{resetPerformanceMetrics:E,startPerformanceTimer:b,updatePerformanceMetrics:P}=(0,u.B)(),O=(0,n.useRef)(""),x=(0,n.useRef)(null),I=(0,n.useRef)(null),N=(0,n.useRef)(!1),_=(0,n.useRef)(!1),A=(0,n.useMemo)((()=>p()((e=>M(e)),20)),[M]),R=(0,n.useRef)(null),D=(0,n.useRef)(null),L=(0,n.useCallback)((()=>(D.current||(R.current||(R.current=new URL(r(64339),r.b)),D.current=new Worker(R.current,{type:"module"})),D.current)),[]),F=(0,n.useCallback)((e=>new Promise(((t,r)=>{const n=L();n.onmessage=e=>t(e.data),n.onerror=r,n.postMessage(e)}))),[L]),j=(0,n.useCallback)((()=>{y((e=>{const t=[...e],r=t[t.length-1];if(r&&"assistant"===r.role){const e=r.content,t=" [Error occurred during generation]";e.includes(t)||(r.content=e?`${e}${t}`:"Error occurred during generation",r.metrics&&(r.metrics.isComplete=!0,r.metrics.error=!0))}return t}))}),[y]),J=(0,n.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2)+Date.now().toString(36);x.current=r;const n=null!==t&&Number.isInteger(t)&&t>=0;if(!e||!g)return S("Please enter a message and select a model"),null;const o=`${g.provider}/${g.id}`;if(!o)return S("Invalid model selection"),null;let s;n?y((r=>{const n=r.slice(0,t);return s={role:"user",content:e,timestamp:Date.now()},[...n,s]})):s=C("user",e),E(),b(),_.current=!1,v(!0),S(null),O.current="",N.current=!0,C("assistant","");let a=setTimeout((()=>{var e;null===(e=I.current)||void 0===e||e.abort("timeout"),S("Connection timed out"),v(!1)}),6e4);const i=new AbortController;I.current=i;try{const e=w(g),t=k.current.map((e=>{let{metrics:t,...r}=e;return r}));!e.systemPrompt||t.length&&"system"===t[0].role||t.unshift({role:"system",content:e.systemPrompt,timestamp:Date.now()-1}),t.push(s);const n={requestId:r,model:o,messages:t,temperature:e.temperature,max_tokens:e.max_tokens,top_p:e.top_p,frequency_penalty:e.frequency_penalty,presence_penalty:e.presence_penalty},u={"Content-Type":"application/json",Accept:"text/event-stream","Cache-Control":"no-cache"};T&&(u.Authorization=`Bearer ${T}`);const p=await(0,d.J)(new URL("/api/chat/stream",m).toString(),{method:"POST",headers:u,body:JSON.stringify(n),signal:i.signal,cache:"no-store"});if(!p.ok)throw new Error(`API error: ${p.status}`);const h=p.body.getReader(),f=new TextDecoder("utf-8");let y="";for(;;){const{done:e,value:t}=await h.read();if(clearTimeout(a),a=setTimeout((()=>{var e;null===(e=I.current)||void 0===e||e.abort(),S("Connection timed out"),v(!1)}),6e4),e)break;const r=f.decode(t,{stream:!0});try{const e=await F(r);for(const t of e){var l,c;t.content&&(_.current||(P(1),_.current=!0),y+=t.content,O.current=y,A(y));const e=null!==(l=null===(c=t.usage)||void 0===c?void 0:c.completionTokens)&&void 0!==l?l:0;P(e,t.isDone,t.usage,t.finishReason)}}catch{}}return A.flush(),M(O.current),O.current}catch(e){return j(),null}finally{clearTimeout(a),N.current=!1,v(!1),x.current=null}}),[m,g,w,T,k,y,C,M,A,S,v,E,b,P,F,j]),U=(0,n.useCallback)((async()=>{I.current&&I.current.abort("user_stopped");const e=x.current;if(e){const t={"Content-Type":"application/json"};T&&(t.Authorization=`Bearer ${T}`);try{await(0,d.J)(new URL("/api/chat/stop",m).toString(),{method:"POST",headers:t,body:JSON.stringify({requestId:e})})}catch{}finally{x.current=null,I.current=null}}return N.current=!1,v(!1),!0}),[m,T,v]),$=(0,n.useMemo)((()=>({streamMessageWithFetch:J,stopStreaming:U,parseStreamChunk:F,streamingTextRef:O,isStreaming:()=>N.current})),[J,U,F]);return(0,h.jsx)(f.Provider,{value:$,children:t})}},72152:(e,t,r)=>{r.d(t,{Y:()=>s});var n=r(65043),o=r(94916);const s=()=>{const[e,t]=(0,o.M)("modelCacheEnabled",!0),r=(0,n.useCallback)((()=>{try{localStorage.removeItem("modelDropdownCache")}catch(e){}}),[]),s=(0,n.useCallback)((n=>{const o="boolean"==typeof n?n:!e;return o||r(),t(o),o}),[e,t,r]),a=(0,n.useCallback)((()=>{r()}),[r]);return(0,n.useEffect)((()=>{if("undefined"==typeof window)return;const e=window.isCacheValid;return window.isCacheValid=function(t){return"false"!==localStorage.getItem("modelCacheEnabled")&&("function"==typeof e?e(t):t&&t.timestamp&&Date.now()-t.timestamp<3e5&&t.allModels&&t.processedModels&&t.experimentalModels)},()=>{window.isCacheValid=e}}),[]),{cacheEnabled:e,toggleCache:s,clearModelCache:r,refreshModels:a}}},87164:(e,t,r)=>{async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=0;for(;;)try{const r=await fetch(e,t);if(!r.ok)throw new Error(`Network error: ${r.status}`);return r}catch(e){if(o>=r)throw e;const t=n*Math.pow(2,o)+100*Math.random();await new Promise((e=>setTimeout(e,t))),o++}}r.d(t,{J:()=>n})},94916:(e,t,r)=>{r.d(t,{M:()=>o});var n=r(65043);const o=(e,t)=>{const r=(0,n.useRef)(t),[o,s]=(0,n.useState)((()=>{try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):r.current}catch(e){return r.current}})),a=(0,n.useCallback)((t=>{try{const r=t instanceof Function?t(o):t;s(r),window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}}),[e,o]);return(0,n.useEffect)((()=>{try{const t=window.localStorage.getItem(e);s(t?JSON.parse(t):r.current)}catch(e){s(r.current)}}),[e]),[o,a]}},96377:(e,t,r)=>{r.d(t,{N7:()=>m,fn:()=>d,lx:()=>p});var n=r(65043),o=r(91578),s=r(94916),a=r(35016),i=r(72152),l=r(70579);const c=(0,n.createContext)(),u=(0,n.createContext)(),d=()=>{const e=(0,n.useContext)(c);if(void 0===e)throw new Error("useModel must be used within a ModelProvider");return e},m=()=>{const e=(0,n.useContext)(u);if(void 0===e)throw new Error("useModelFilter must be used within a ModelProvider");return e},p=e=>{let{children:t}=e;const{cacheEnabled:d}=(0,i.Y)(),{apiUrl:m}=(0,o.g)(),{idToken:p}=(0,a.A)(),[h,f]=(0,n.useState)([]),[g,w]=(0,n.useState)({}),[T,k]=(0,n.useState)([]),[y,C]=(0,n.useState)(null),[M,v]=(0,n.useState)(!0),[S,E]=(0,n.useState)(null),[b,P]=(0,s.M)("showExperimental",!1),[O,x]=(0,n.useState)({search:"",categories:{Chat:!0,Image:!0,Embedding:!0}}),I=(0,n.useCallback)((e=>e&&e.timestamp&&Date.now()-e.timestamp<432e6&&e.allModels&&e.processedModels&&e.experimentalModels),[]);(0,n.useEffect)((()=>{if("undefined"!=typeof window)return window.isCacheValid=I,()=>{delete window.isCacheValid}}),[I]);const N=(0,n.useCallback)((e=>{try{const t={allModels:e.allModels,processedModels:e.processedModels,experimentalModels:e.experimentalModels,timestamp:Date.now()};localStorage.setItem("modelDropdownCache",JSON.stringify(t))}catch(e){}}),[]),_=(0,n.useCallback)(((e,t)=>{x((r=>({...r,categories:{...r.categories,[e]:t}})))}),[]),A=(0,n.useCallback)((e=>{x((t=>({...t,search:e})))}),[]),R=(0,n.useCallback)((e=>{(null==y?void 0:y.id)!==(null==e?void 0:e.id)&&C(e)}),[y,C]),D=(0,n.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(!0),E(null);try{const n={Accept:"application/json"};if(e){const e=t||p;e&&(n.Authorization=`Bearer ${e}`)}const o=new URL("/api/models/classified",m).toString(),s=await fetch(o,{headers:n});if(!s.ok){let e=`Error fetching models: ${s.status}`;throw new Error(e)}const a=await s.json(),i=new Worker(new URL(r.p+r.u(6961),r.b),{type:void 0});i.postMessage(a),i.onmessage=e=>{let{data:t}=e;if(t.error)E(t.error);else{const{allModels:e,processedModels:r,experimentalModels:n}=t;if(d){const t=localStorage.getItem("modelDropdownCache");let o;try{o=JSON.parse(t)}catch{o=null}(!o||JSON.stringify(o.allModels)!==JSON.stringify(e)||JSON.stringify(o.processedModels)!==JSON.stringify(r)||JSON.stringify(o.experimentalModels)!==JSON.stringify(n))&&(f(e),w(r),k(n),N({allModels:e,processedModels:r,experimentalModels:n}))}else f(e),w(r),k(n)}v(!1),i.terminate()},i.onerror=e=>{E(e.message),v(!1),i.terminate()}}catch(e){E(e.message||"Failed to load model data")}}),[m,N,p,d]),L=(0,n.useRef)(!1);(0,n.useEffect)((()=>{if(!L.current){if(d){const e=localStorage.getItem("modelDropdownCache");let t;try{t=JSON.parse(e)}catch{t=null}t&&window.isCacheValid(t)&&(f(t.allModels),w(t.processedModels),k(t.experimentalModels),v(!1))}let e=null;try{e=localStorage.getItem("idToken")}catch{}e?D(!0,e):D(!1),L.current=!0}}),[]),(0,n.useEffect)((()=>{L.current&&p&&D(!0)}),[p,D]),(0,n.useEffect)((()=>{!y&&h.length>0&&C(h[0])}),[h,y]);const F=(0,n.useCallback)((()=>{P((e=>!e))}),[P]),j=(0,n.useMemo)((()=>({allModels:h,processedModels:g,experimentalModels:T,selectedModel:y,isLoading:M,error:S,showExperimental:b,isExperimentalModelsEnabled:b,toggleExperimentalModels:F,setShowExperimental:P,selectModel:R,refreshModels:D})),[h,g,T,y,M,S,b,F,P,R,D]),J=(0,n.useMemo)((()=>({modelFilter:O,updateCategoryFilter:_,updateSearchFilter:A})),[O,_,A]);return(0,l.jsx)(c.Provider,{value:j,children:(0,l.jsx)(u.Provider,{value:J,children:t})})}}},e=>{e.O(0,[3428],(()=>{[4314,208,2179,3215,304,8457,7112,1569,1141,7187,5114,8398,648,8451,268,6060,610,6716,8990,3542,4644,8467,5419,9937,5174,6572,2360,5433,1327,3189,2500,5932,5444,2412,6017,399,4917,7777,7316,3294,4734,6755,4182,4582,8162,6760,1217,822,4335,6814,2489,9734,5522,5080,1927,9283,8476,5816,4120,7295,237,9104,2993,9889,392,7514,8482,5418,1506,9267,6604,9579].map(e.E)}),5);e.O(0,[9624,8466,6017,399,4917,7777,7316,3294,5271,3326],(()=>{return t=25960,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main-31743c5a.def4ce16.js.map