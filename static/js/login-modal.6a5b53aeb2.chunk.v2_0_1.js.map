{"version":3,"file":"static/js/login-modal.6a5b53aeb2.chunk.v2_0_1.js","mappings":"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","sources":["webpack://ai-chat-interface/./src/components/auth/LoginModal.module.css?42ca","components/auth/LoginModal.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"LoginModal\":\"LoginModal_LoginModal__kjTV3\",\"fadeIn\":\"LoginModal_fadeIn__j8gF4\",\"LoginModal__modal\":\"LoginModal_LoginModal__modal__7pDte\",\"slideIn\":\"LoginModal_slideIn__Af+r5\",\"LoginModal__closeButton\":\"LoginModal_LoginModal__closeButton__O2ypm\",\"LoginModal__title\":\"LoginModal_LoginModal__title__lhp1Q\",\"LoginModal__subtitle\":\"LoginModal_LoginModal__subtitle__Q-sjj\",\"LoginModal__providerList\":\"LoginModal_LoginModal__providerList__J7L-1\",\"LoginModal__providerButton\":\"LoginModal_LoginModal__providerButton__cJrE8\",\"LoginModal__providerIcon\":\"LoginModal_LoginModal__providerIcon__1XJqE\",\"LoginModal__spinnerContainer\":\"LoginModal_LoginModal__spinnerContainer__Jlk99\",\"LoginModal__error\":\"LoginModal_LoginModal__error__r7Ouy\",\"LoginModal__footerText\":\"LoginModal_LoginModal__footerText__XLzcx\",\"LoginModal__emailForm\":\"LoginModal_LoginModal__emailForm__KLllG\",\"LoginModal__inputField\":\"LoginModal_LoginModal__inputField__V0nE0\",\"LoginModal__emailButtonContainer\":\"LoginModal_LoginModal__emailButtonContainer__hi9Yr\",\"LoginModal__emailButton\":\"LoginModal_LoginModal__emailButton__RpJyU\",\"LoginModal__signUpButton\":\"LoginModal_LoginModal__signUpButton__e06OU\",\"LoginModal__backButton\":\"LoginModal_LoginModal__backButton__jOqcI\",\"LoginModal__alternativeLoginContainer\":\"LoginModal_LoginModal__alternativeLoginContainer__v8HNP\",\"LoginModal__alternativeLoginText\":\"LoginModal_LoginModal__alternativeLoginText__Hnyro\",\"LoginModal__providerIconContainer\":\"LoginModal_LoginModal__providerIconContainer__E9XWU\",\"LoginModal__providerIconButton\":\"LoginModal_LoginModal__providerIconButton__rUIFJ\",\"togglePasswordVisibility\":\"LoginModal_togglePasswordVisibility__2dE7n\"};","import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { IoMdClose } from 'react-icons/io';\nimport { FcGoogle } from 'react-icons/fc';\nimport { FaGithub } from 'react-icons/fa';\nimport Spinner from '../common/Spinner';\nimport styles from './LoginModal.module.css';\n// Assuming a Spinner component exists\n\n// Import icons using the correct paths\n// Icon for email/pass\n\nconst LoginModal = ({ onClose }) => {\n  const { setIsLoggingIn, error: authContextError } = useAuth();\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  // Clear local error when auth context error changes (e.g., token fetch error)\n  useEffect(() => {\n    if (authContextError) {\n      setError(authContextError);\n    }\n  }, [authContextError]);\n\n  const handleSignIn = async (provider) => {\n    // Dynamically import Firebase auth to defer load\n    const { getFirebaseAuth } = await import(/* webpackChunkName: \"firebase-config\" */ '../../firebaseConfig');\n    const { signInWithPopup } = await import(/* webpackChunkName: \"firebase-auth\" */ 'firebase/auth');\n    const auth = getFirebaseAuth();\n    if (!auth) {\n      setError(\"Firebase not initialized. Cannot sign in.\");\n      return;\n    }\n    setIsLoading(true);\n    setError(null); // Clear previous errors\n    try {\n      await signInWithPopup(auth, provider);\n      // onAuthStateChanged in AuthContext will handle the rest (closing modal, setting user state)\n      console.log(\"Popup sign-in successful.\");\n    } catch (err) {\n      console.error(\"Popup Sign-in Error:\", err);\n      // Customize error messages based on err.code\n      if (err.code === 'auth/popup-closed-by-user') {\n        console.log('Popup sign-in cancelled by user.');\n        // Close the modal as the user cancelled\n        setIsLoggingIn(false);\n        if (onClose) onClose();\n      } else if (err.code === 'auth/cancelled-popup-request') {\n        console.log('Popup sign-in cancelled (multiple requests).');\n        // Close the modal\n        setIsLoggingIn(false);\n        if (onClose) onClose();\n      } else if (err.code === 'auth/popup-blocked') {\n        setError('Popup blocked by browser. Please allow popups for this site.');\n        // Keep modal open to show the error in this case\n        setIsLoading(false);\n      } else {\n        setError(err.message || 'Failed to sign in. Please try again.');\n        // Keep modal open to show unexpected errors\n        setIsLoading(false);\n      }\n    }\n    // No finally block needed, loading is handled by success/error paths\n  };\n\n  const handleEmailSignIn = async (e) => {\n    e.preventDefault(); // Prevent form submission reload\n    const { getFirebaseAuth } = await import(/* webpackChunkName: \"firebase-config\" */ '../../firebaseConfig');\n    const { signInWithEmailAndPassword } = await import(/* webpackChunkName: \"firebase-auth\" */ 'firebase/auth');\n    const auth = getFirebaseAuth();\n    if (!auth) {\n      setError(\"Firebase not initialized.\");\n      return;\n    }\n    if (!email || !password) {\n        setError(\"Please enter both email and password.\");\n        return;\n    }\n    setIsLoading(true);\n    setError(null);\n    try {\n      await signInWithEmailAndPassword(auth, email, password);\n      // onAuthStateChanged handles the rest\n      console.log(\"Email/Password sign-in successful.\");\n    } catch (err) {\n      console.error(\"Email Sign-in Error:\", err);\n      setError(err.message || 'Failed to sign in with email.');\n      setIsLoading(false);\n    }\n  };\n\n  const handleEmailSignUp = async (e) => {\n    e.preventDefault(); // Prevent form submission reload\n    const { getFirebaseAuth } = await import(/* webpackChunkName: \"firebase-config\" */ '../../firebaseConfig');\n    const { createUserWithEmailAndPassword } = await import(/* webpackChunkName: \"firebase-auth\" */ 'firebase/auth');\n    const auth = getFirebaseAuth();\n    if (!auth) {\n      setError(\"Firebase not initialized.\");\n      return;\n    }\n    if (!email || !password) {\n        setError(\"Please enter both email and password.\");\n        return;\n    }\n    setIsLoading(true);\n    setError(null);\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n      // onAuthStateChanged handles the rest\n      console.log(\"Email/Password sign-up successful.\");\n    } catch (err) {\n      console.error(\"Email Sign-up Error:\", err);\n      setError(err.message || 'Failed to sign up with email.');\n      setIsLoading(false);\n    }\n  };\n\n  // Dynamically import GoogleAuthProvider to avoid bundling and missing reference\n  const handleGoogleSignIn = async () => {\n    const { GoogleAuthProvider } = await import(/* webpackChunkName: \"firebase-auth\" */ 'firebase/auth');\n    const googleProvider = new GoogleAuthProvider();\n    handleSignIn(googleProvider);\n  };\n\n  // Dynamically import GithubAuthProvider to avoid missing reference\n  const handleGithubSignIn = async () => {\n    const { GithubAuthProvider } = await import(/* webpackChunkName: \"firebase-auth\" */ 'firebase/auth');\n    const githubProvider = new GithubAuthProvider();\n    handleSignIn(githubProvider);\n  };\n\n  const closeModal = () => {\n    // Only close if not currently in the middle of a sign-in attempt\n    if (!isLoading) {\n      setIsLoggingIn(false);\n      if (onClose) onClose();\n    }\n  };\n\n  return (\n    <div className={styles.LoginModal} onClick={closeModal}>\n      <div className={styles.LoginModal__modal} onClick={(e) => e.stopPropagation()}>\n        <button className={styles.LoginModal__closeButton} onClick={closeModal} aria-label=\"Close login\">\n          <IoMdClose />\n        </button>\n        <h2 className={styles.LoginModal__title}>Login / Sign Up</h2>\n        <p className={styles.LoginModal__subtitle}>Choose a provider to continue</p>\n\n        {isLoading && (\n          <div className={styles.LoginModal__spinnerContainer}> {/* Make spinner take full height when loading */}\n            <Spinner size=\"large\" />\n            <p>Connecting...</p>\n          </div>\n        )}\n\n        {!isLoading && (\n          // Email/Password form is now the default content when not loading\n          <form className={styles.LoginModal__emailForm} onSubmit={handleEmailSignIn}> {/* Added onSubmit */} \n            <input\n              type=\"email\"\n              placeholder=\"Email Address\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n              className={styles.LoginModal__inputField}\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n              className={styles.LoginModal__inputField}\n            />\n            <div className={styles.LoginModal__emailButtonContainer}>\n              <button type=\"submit\" className={styles.LoginModal__emailButton} disabled={isLoading}>\n                Sign In\n              </button>\n              <button type=\"button\" onClick={handleEmailSignUp} className={`${styles.LoginModal__emailButton} ${styles.LoginModal__signUpButton}`} disabled={isLoading}>\n                Sign Up\n              </button>\n            </div>\n          </form>\n        )}\n\n        {/* Alternative Sign-in Providers (Icons) - Shown below email form when not loading */}\n        {!isLoading && (\n          <div className={styles.LoginModal__alternativeLoginContainer}>\n            <p className={styles.LoginModal__alternativeLoginText}>Or sign in with</p>\n            <div className={styles.LoginModal__providerIconContainer}>\n              <button\n                className={styles.LoginModal__providerIconButton}\n                onClick={handleGoogleSignIn}\n                disabled={isLoading}\n                title=\"Sign in with Google\"\n                aria-label=\"Sign in with Google\"\n              >\n                <FcGoogle />\n              </button>\n              <button\n                className={styles.LoginModal__providerIconButton}\n                onClick={handleGithubSignIn}\n                disabled={isLoading}\n                title=\"Sign in with GitHub\"\n                aria-label=\"Sign in with GitHub\"\n              >\n                <FaGithub />\n              </button>\n              {/* Add other provider icons here if needed */}\n            </div>\n          </div>\n        )}\n\n        {error && <p className={styles.LoginModal__error}>{error}</p>}\n\n        <p className={styles.LoginModal__footerText}>\n          By signing in, you agree to our imaginary Terms of Service.\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginModal; "],"names":["_ref","onClose","setIsLoggingIn","error","authContextError","useAuth","isLoading","setIsLoading","useState","setError","email","setEmail","password","setPassword","useEffect","handleSignIn","async","getFirebaseAuth","signInWithPopup","auth","provider","err","code","message","closeModal","_jsx","className","onClick","children","_jsxs","e","stopPropagation","IoMdClose","Spinner","size","onSubmit","preventDefault","signInWithEmailAndPassword","type","placeholder","value","onChange","target","required","styles","disabled","createUserWithEmailAndPassword","GoogleAuthProvider","googleProvider","title","FcGoogle","GithubAuthProvider","githubProvider","FaGithub"],"sourceRoot":""}