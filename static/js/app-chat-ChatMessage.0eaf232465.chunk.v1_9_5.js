"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["app-chat-ChatMessage"],{17277:(e,r,s)=>{s.d(r,{A:()=>v});var a=s(85908),o=s(42379),n=s(45436),t=s(46797),d=s(87722),l=s(98121),i=s(53081),c=s.n(i),_=s(44440);const m=(0,a.RZ)((()=>Promise.all([s.e("syntax-highlighter"),s.e("vendor-refractor-15684089"),s.e("vendor-refractor-e13012a4"),s.e("vendor-refractor-a3ee49af"),s.e("vendor-refractor-ad9cabf8"),s.e("vendor-refractor-3dcca97d"),s.e("vendor-refractor-e7fb9445"),s.e("vendor-refractor-7927cc25"),s.e("vendor-refractor-b9bc2889"),s.e("vendor-refractor-47716238"),s.e("vendor-refractor-d5dfd146"),s.e("vendor-refractor-6072c7a0"),s.e("vendor-refractor-b8620171"),s.e("vendor-refractor-4c8050b1"),s.e("vendor-refractor-a311b4ea"),s.e("vendor-refractor-cd8e6b90"),s.e("vendor-refractor-d0c4690c"),s.e("vendor-refractor-d5760a01"),s.e("vendor-refractor-e811d444"),s.e("vendor-refractor-e0f65d05"),s.e("vendor-refractor-287bb3d1"),s.e("vendor-refractor-237489f7"),s.e("vendor-refractor-a81a7d65"),s.e("vendor-refractor-43d68cfb"),s.e("vendor-refractor-914a1695"),s.e("vendor-refractor-ba3be5d7"),s.e("vendor-refractor-9f93ebfe"),s.e("vendor-refractor-db67aad0"),s.e("vendor-refractor-25029dc1"),s.e("vendor-refractor-0ff0ca8f"),s.e("vendor-refractor-982e62b4"),s.e("vendor-refractor-fc1e4540"),s.e("vendor-refractor-37070081"),s.e("vendor-refractor-f5ea4339"),s.e("vendor-refractor-6880b3ce"),s.e("vendor-refractor-d68713e4"),s.e("vendor-refractor-6bdb02c4"),s.e("vendor-refractor-3ec14123"),s.e("vendor-refractor-afec7163"),s.e("vendor-refractor-3939e9ff"),s.e("vendor-refractor-982ce542"),s.e("vendor-refractor-5f65df01"),s.e("vendor-refractor-e3ea52e9"),s.e("vendor-refractor-72796416"),s.e("vendor-refractor-4fe07799"),s.e("vendor-refractor-00889692"),s.e("vendor-refractor-9b4721ba"),s.e("vendor-refractor-fcbddd77"),s.e("vendor-refractor-73543ba5"),s.e("vendor-refractor-dff4b716"),s.e("vendor-refractor-1fce3037"),s.e("vendor-refractor-69bdd742"),s.e("vendor-refractor-a1617118"),s.e("vendor-refractor-29bd2d4f"),s.e("vendor-refractor-aa25e9ce"),s.e("vendor-refractor-80d3e6d7"),s.e("vendor-refractor-c934ee85"),s.e("vendor-refractor-b7180c25"),s.e("vendor-refractor-ae79dce2"),s.e("vendor-refractor-f72f697c"),s.e("vendor-refractor-8c9e628c"),s.e("vendor-refractor-bb8c4fba"),s.e("vendor-refractor-1e30d89f"),s.e("vendor-refractor-18110b50"),s.e("vendor-refractor-9cfd4f54"),s.e("vendor-refractor-2c300606"),s.e("vendor-refractor-b7b7f258"),s.e("vendor-refractor-a56c4d73"),s.e("vendor-refractor-de6256ae"),s.e("vendor-refractor-b6f3a405"),s.e("vendor-refractor-58aaa442"),s.e("vendor-refractor-509a7a9e"),s.e("vendor-refractor-0e0508a9"),s.e("vendor-refractor-217b7b8a"),s.e("vendor-refractor-5034beef"),s.e("vendor-refractor-2069139d"),s.e("vendor-refractor-4ef87f2b"),s.e("vendor-refractor-1c85f667"),s.e("vendor-refractor-cc9bc6eb"),s.e("vendor-refractor-f0f0f757"),s.e("app-chat-ChatMessage"),s.e("vendors-node_modules_hastscript_index_js-node_modules_parse-entities_index_js-node_modules_ba-4ae368"),s.e("common")]).then(s.bind(s,65026))));let u;const f=e=>{let{message:r,isStreaming:s=!1,onEditMessage:i=null,overrideContent:f=null,avatarUrl:v=null}=e;const h=null!=f?f:r.content,[b,g]=(0,a.J0)(!1),p=(0,a.Kr)((()=>"assistant"===r.role?h:(0,d.rP)(h)),[h,r.role]),[k,x]=(0,a.J0)(p);(0,a.vJ)((()=>{x(p)}),[p]),(0,a.vJ)((()=>{if("assistant"!==r.role||"string"!=typeof h||"undefined"==typeof Worker)return;const e=r.timestamp,s=("undefined"==typeof Worker||u||(u=new(c())),u),a=r=>{r.data.id===e&&(r.data.success?x(r.data.data):x(h))};return s.addEventListener("message",a),s.postMessage({id:e,content:h}),()=>{s.removeEventListener("message",a)}}),[h,r.role,r.timestamp]);const j=(0,a.Kr)((()=>{switch(r.role){case"user":return v?(0,_.Y)("img",{src:v,alt:"User avatar",className:n.A.ChatMessage__avatarImg}):null;case"assistant":return(0,_.Y)(o.MiJ,{size:16,className:n.A.ChatMessage__icon});case"system":return(0,_.Y)(o.L64,{size:16,className:n.A.ChatMessage__icon});case"error":return(0,_.Y)(o._0O,{size:16,className:n.A.ChatMessage__icon});default:return null}}),[r.role,v]),y=(0,a.Kr)((()=>{switch(r.role){case"user":return n.A["ChatMessage--user"];case"assistant":return n.A["ChatMessage--assistant"];case"system":return n.A["ChatMessage--system"];case"error":return n.A["ChatMessage--error"];default:return""}}),[r.role]),C=(0,a.Kr)((()=>!("assistant"!==r.role||!r.metrics)),[r.role,r.metrics]),A=(0,a.hb)((()=>{const e="string"==typeof r.content?r.content:Array.isArray(r.content)?r.content.filter((e=>"text"===e.type)).map((e=>e.text)).join("\n"):"";navigator.clipboard.writeText(e).then((()=>{g(!0),setTimeout((()=>g(!1)),2e3)}))}),[r.content]),M=(0,a.Kr)((()=>(0,_.Y)("button",{className:`${n.A.ChatMessage__copyMessageButton} ${"assistant"===r.role&&C?n.A.ChatMessage__copyMessageButtonInMetrics:n.A.ChatMessage__copyMessageButtonBottomRight}`,onClick:A,"aria-label":"Copy message",title:"Copy message",children:b?(0,_.Y)(o.Srz,{size:16}):(0,_.Y)(o.TdU,{size:16})})),[A,r.role,C,b]),w=(0,a.hb)((()=>{i&&i(r)}),[i,r]),Y=(0,a.Kr)((()=>"user"===r.role?(0,_.Y)("button",{className:n.A.ChatMessage__editMessageButton,onClick:w,"aria-label":"Edit message",title:"Edit message",children:(0,_.Y)(o.R2l,{size:16})}):null),[r.role,w]);return(0,_.FD)("div",{className:n.A.ChatMessage+" "+y,children:[(0,_.FD)("div",{className:n.A.ChatMessage__body,children:[j&&(0,_.Y)("div",{className:n.A.ChatMessage__avatar,children:j}),(0,_.FD)("div",{className:n.A.ChatMessage__contentWrapper,children:[(0,_.Y)(a.tY,{fallback:null,children:(0,_.Y)("div",{className:n.A.ChatMessage__content,children:"assistant"===r.role?(0,_.Y)(m,{content:k,isStreaming:s}):(0,_.Y)(l.A,{children:k})})}),"assistant"===r.role&&(()=>{if(!C||!r.metrics)return null;const e=s,{elapsedTime:a,tokenCount:d,tokensPerSecond:l,timeToFirstToken:i,promptTokens:c,completionTokens:m,totalTokens:u,finishReason:f}=r.metrics;return null!=a||null!=d||null!=l||null!=i||null!=c||null!=m||null!=u||null!=f?(0,_.FD)("div",{className:n.A.ChatMessage__metricsContainer,children:[null!=i&&0!==i&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.O4,{size:14,className:n.A.ChatMessage__metricIcon}),"First Token: ",(0,t.f)(i)]}),null!=a&&0!==a&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.O4,{size:14,className:n.A.ChatMessage__metricIcon}),"Total Time: ",(0,t.f)(a)]}),null!=d&&0!==d&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Tokens: ",d]}),null!=c&&0!==c&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Prompt: ",c]}),null!=m&&0!==m&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Completion: ",m]}),null!=u&&0!==u&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.MiJ,{size:14,className:n.A.ChatMessage__metricIcon}),"Total: ",u]}),null!=l&&0!==l&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o.BHx,{size:14,className:n.A.ChatMessage__metricIcon}),"Speed: ",l," t/s"]}),null!=f&&""!==f&&"stop"!==f.toLowerCase()&&"unknown"!==f.toLowerCase()&&(0,_.FD)("span",{className:n.A.ChatMessage__metric,children:[(0,_.Y)(o._0O,{size:14,className:n.A.ChatMessage__metricIcon}),f]}),e&&(0,_.FD)("span",{className:`${n.A.ChatMessage__metric} ${n.A.ChatMessage__generatingIndicator}`,children:[(0,_.Y)("span",{className:n.A.ChatMessage__generatingDot}),"Generating..."]}),M]}):null})(),"user"!==r.role&&("assistant"!==r.role||!C)&&M]})]}),"user"===r.role&&(0,_.FD)("div",{className:n.A.ChatMessage__actions,children:[Y,M]})]})};f.displayName="ChatMessage";const v=(0,a.ph)(f)},65026:(e,r,s)=>{s.r(r),s.d(r,{default:()=>u});var a=s(85908),o=s(45436),n=s(96926),t=s(87722),d=s(79692),l=s(44440);const i=new Set,c=()=>(0,l.FD)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"14",height:"14",children:[(0,l.Y)("path",{fillRule:"evenodd",d:"M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"}),(0,l.Y)("path",{fillRule:"evenodd",d:"M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"})]}),_=()=>(0,l.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"14",height:"14",children:(0,l.Y)("path",{fillRule:"evenodd",d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"})}),m=(0,a.RZ)((async()=>{const[e,r,a,o,n]=await Promise.all([Promise.all([s.e("utils"),s.e("large-vendor-micromark-core-commonmark"),s.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),s.e("vendors-node_modules_extend_index_js-node_modules_inline-style-parser_index_js-node_modules_b-132821"),s.e("vendors-node_modules_micromark-factory-destination_index_js-node_modules_micromark-factory-la-b99e24"),s.e("vendors-node_modules_micromark_lib_parse_js-node_modules_micromark_lib_postprocess_js-node_mo-6de913"),s.e("vendors-node_modules_property-information_index_js-node_modules_property-information_lib_find-e02ac5"),s.e("vendors-node_modules_react-markdown_lib_react-markdown_js"),s.e("vendors-node_modules_remark-rehype_lib_index_js"),s.e("vendors-node_modules_space-separated-tokens_index_js-node_modules_style-to-object_index_mjs-n-286e03"),s.e("vendors-node_modules_vfile_lib_index_js"),s.e("node_modules_react-markdown_index_js")]).then(s.bind(s,91541)),Promise.all([s.e("large-vendor-micromark-core-commonmark"),s.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),s.e("vendors-node_modules_mdast-util-gfm_lib_index_js"),s.e("vendors-node_modules_mdast-util-to-markdown_lib_handle_inline-code_js-node_modules_mdast-util-fe523e"),s.e("vendors-node_modules_micromark-extension-gfm-autolink-literal_lib_syntax_js-node_modules_micr-143c10"),s.e("vendors-node_modules_remark-gfm_index_js")]).then(s.bind(s,26505)),Promise.all([s.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),s.e("vendors-node_modules_remark-emoji_index_js"),s.e("vendors-node_modules_emojilib_emojis_json")]).then(s.bind(s,8012)),Promise.all([s.e("vendors-node_modules_remark-math_index_js"),s.e("node_modules_mdast-util-to-markdown_lib_util_safe_js-node_modules_mdast-util-to-markdown_lib_-23b9bc")]).then(s.bind(s,78573)),Promise.all([s.e("katex-6f17a2aa"),s.e("katex-7736f8b5"),s.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),s.e("vendors-node_modules_hast-util-from-html-isomorphic_lib_browser_js"),s.e("vendors-node_modules_hast-util-to-text_lib_index_js-node_modules_web-namespaces_index_js"),s.e("node_modules_comma-separated-tokens_index_js-node_modules_space-separated-tokens_index_js")]).then(s.bind(s,94163)),Promise.all([s.e("styles-daab9c0a"),s.e("styles-e96e9bea"),s.e("styles-b2c1640e"),s.e("styles-b4afe919"),s.e("styles-31743c5a"),s.e("styles-61a228d7"),s.e("styles-c388cea0")]).then(s.bind(s,96106))]);return{default:s=>{let{children:t,components:d}=s;return(0,l.Y)(e.default,{remarkPlugins:[r.default||r,a.default||a,o.default||o],rehypePlugins:[n.default||n],components:d,children:t})}}}));"undefined"!=typeof window&&(window.requestIdleCallback||(e=>setTimeout(e,2e3)))((()=>{s.e("syntax-highlighter").then(s.bind(s,81254)),s.e("syntax-highlighter").then(s.bind(s,4323)),Promise.all([s.e("utils"),s.e("large-vendor-micromark-core-commonmark"),s.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),s.e("vendors-node_modules_extend_index_js-node_modules_inline-style-parser_index_js-node_modules_b-132821"),s.e("vendors-node_modules_micromark-factory-destination_index_js-node_modules_micromark-factory-la-b99e24"),s.e("vendors-node_modules_micromark_lib_parse_js-node_modules_micromark_lib_postprocess_js-node_mo-6de913"),s.e("vendors-node_modules_property-information_index_js-node_modules_property-information_lib_find-e02ac5"),s.e("vendors-node_modules_react-markdown_lib_react-markdown_js"),s.e("vendors-node_modules_remark-rehype_lib_index_js"),s.e("vendors-node_modules_space-separated-tokens_index_js-node_modules_style-to-object_index_mjs-n-286e03"),s.e("vendors-node_modules_vfile_lib_index_js"),s.e("node_modules_react-markdown_index_js")]).then(s.bind(s,91541)),Promise.all([s.e("large-vendor-micromark-core-commonmark"),s.e("vendors-node_modules_micromark-factory-space_index_js-node_modules_micromark-util-classify-ch-67efd6"),s.e("vendors-node_modules_mdast-util-gfm_lib_index_js"),s.e("vendors-node_modules_mdast-util-to-markdown_lib_handle_inline-code_js-node_modules_mdast-util-fe523e"),s.e("vendors-node_modules_micromark-extension-gfm-autolink-literal_lib_syntax_js-node_modules_micr-143c10"),s.e("vendors-node_modules_remark-gfm_index_js")]).then(s.bind(s,26505)),Promise.all([s.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),s.e("vendors-node_modules_remark-emoji_index_js"),s.e("vendors-node_modules_emojilib_emojis_json")]).then(s.bind(s,8012)),Promise.all([s.e("vendors-node_modules_remark-math_index_js"),s.e("node_modules_mdast-util-to-markdown_lib_util_safe_js-node_modules_mdast-util-to-markdown_lib_-23b9bc")]).then(s.bind(s,78573)),Promise.all([s.e("katex-6f17a2aa"),s.e("katex-7736f8b5"),s.e("vendors-node_modules_unist-util-visit-parents_lib_index_js"),s.e("vendors-node_modules_hast-util-from-html-isomorphic_lib_browser_js"),s.e("vendors-node_modules_hast-util-to-text_lib_index_js-node_modules_web-namespaces_index_js"),s.e("node_modules_comma-separated-tokens_index_js-node_modules_space-separated-tokens_index_js")]).then(s.bind(s,94163)),Promise.all([s.e("styles-daab9c0a"),s.e("styles-e96e9bea"),s.e("styles-b2c1640e"),s.e("styles-b4afe919"),s.e("styles-31743c5a"),s.e("styles-61a228d7"),s.e("styles-c388cea0")]).then(s.bind(s,96106))}));const u=e=>{let{content:r,isStreaming:u}=e;const{isDark:f}=(0,n.D)(),[v,h]=(0,a.J0)({}),[b,g]=(0,a.J0)(null);(0,a.vJ)((()=>{(async()=>{try{if(f){const e=await s.e("syntax-highlighter").then(s.bind(s,81254));g(e.default)}else{const e=await s.e("syntax-highlighter").then(s.bind(s,4323));g(e.default)}}catch(e){}})()}),[f]);const p=(0,a.hb)(((e,r)=>{navigator.clipboard.writeText(e).then((()=>{h((e=>({...e,[r]:!0}))),setTimeout((()=>{h((e=>({...e,[r]:!1})))}),2e3)}))}),[]),k=(0,a.hb)((e=>{var r,n,t;let{node:m,inline:u,className:f,children:h,...g}=e;const k=/language-(\w+)/.exec(f||""),x=k?k[1]:"plaintext";x&&!i.has(x)&&s(60076)(`./${x}.js`).then((e=>{d.A.registerLanguage(x,e.default||e),i.add(x)})).catch((e=>{}));const j=String(h).replace(/\n$/,""),y=null!==(r=null==m||null===(n=m.position)||void 0===n||null===(t=n.start)||void 0===t?void 0:t.offset)&&void 0!==r?r:j.substring(0,20),C=v[y];return u?(0,l.Y)("code",{className:`${o.A.inlineCode} ${f||""}`,...g,children:h}):(0,l.FD)("div",{className:o.A.codeBlockContainer,children:[(0,l.FD)("div",{className:o.A.codeHeader,children:[(0,l.Y)("span",{className:o.A.language,children:x}),(0,l.Y)("button",{className:o.A.copyButton,onClick:()=>p(j,y),disabled:C,children:C?(0,l.FD)(l.FK,{children:[" ",(0,l.Y)(_,{})," Copied! "]}):(0,l.FD)(l.FK,{children:[" ",(0,l.Y)(c,{})," Copy "]})})]}),(0,l.Y)(a.tY,{fallback:(0,l.Y)("pre",{className:o.A.pre,children:j}),children:b?(0,l.Y)(d.A,{style:b,customStyle:{background:"transparent"},language:x,PreTag:"div",className:o.A.pre,wrapLines:!0,...g,children:j}):(0,l.Y)("pre",{className:o.A.pre,children:j})})]})}),[b,p,v]),x=(0,a.Kr)((()=>({code:k})),[k]),j=`${o.A.markdown} ${o.A.ChatMessage__streamingContent} ${u?o.A["ChatMessage__streamingContent--streaming"]:""}`,y="string"==typeof r?r:String(r||""),C=y?(0,t.rP)(y):"â€‹";return(0,l.Y)("div",{className:j,children:(0,l.Y)(a.tY,{fallback:(0,l.Y)("div",{children:C}),children:(0,l.Y)(m,{components:x,children:C})})})}}}]);
//# sourceMappingURL=app-chat-ChatMessage.0eaf232465.chunk.v1_9_5.js.map