"use strict";(self.webpackChunkai_chat_interface=self.webpackChunkai_chat_interface||[]).push([["chat-input"],{5930:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var i=n(85908);const a={ChatInput:"ChatInput_ChatInput__vZ2zE",ChatInput__inputWrapper:"ChatInput_ChatInput__inputWrapper__X78qG",ChatInput__chatInput:"ChatInput_ChatInput__chatInput__cXzQx","ChatInput--waitingForResponse":"ChatInput_ChatInput--waitingForResponse__aY9o4",ChatInput__newChatButton:"ChatInput_ChatInput__newChatButton__saL2O","ChatInput--editing":"ChatInput_ChatInput--editing__vWv8P",ChatInput__cancelButton:"ChatInput_ChatInput__cancelButton__9s1M2",ChatInput__stopButton:"ChatInput_ChatInput__stopButton__6IOZ1",ChatInput__sendButtonInline:"ChatInput_ChatInput__sendButtonInline__9eMQP",noModelSelected:"ChatInput_noModelSelected__wMDsr",ChatInput__imagePreviewContainer:"ChatInput_ChatInput__imagePreviewContainer__-OmxQ",ChatInput__imagePreviewWrapper:"ChatInput_ChatInput__imagePreviewWrapper__2ApRF",ChatInput__imagePreview:"ChatInput_ChatInput__imagePreview__FUhzf",ChatInput__removeImageButton:"ChatInput_ChatInput__removeImageButton__5qGnb",ChatInput__hiddenInput:"ChatInput_ChatInput__hiddenInput__1iSrl",ChatInput__error:"ChatInput_ChatInput__error__us3qf",fadeIn:"ChatInput_fadeIn__xw2Be",micButton:"ChatInput_micButton__MMbzF",micIcon:"ChatInput_micIcon__zvEQO",pluginButton:"ChatInput_pluginButton__mE262",ChatInput__actionButton:"ChatInput_ChatInput__actionButton__-uKTr",ChatInput__uploadButton:"ChatInput_ChatInput__uploadButton__w-h4x",ChatInput__textButton:"ChatInput_ChatInput__textButton__k44fQ",ChatInput__modelButton:"ChatInput_ChatInput__modelButton__5K9mB",ChatInput__iconOnlyButton:"ChatInput_ChatInput__iconOnlyButton__YS-J7",ChatInput__mobileView:"ChatInput_ChatInput__mobileView__Ff0f0",ChatInput__actionRow:"ChatInput_ChatInput__actionRow__2iXfu",ChatInput__leftButtons:"ChatInput_ChatInput__leftButtons__zBDzn",ChatInput__rightButtons:"ChatInput_ChatInput__rightButtons__f6vXc",buttonText:"ChatInput_buttonText__NBFbC","ChatInput--mobileInitial":"ChatInput_ChatInput--mobileInitial__Icpnt","ChatInput--mobileWithMessages":"ChatInput_ChatInput--mobileWithMessages__dUG4s"};var o=n(33804),l=n(54860),r=n(42379);var u=n(44440);const h=t=>{let{images:e,onRemoveImage:n}=t;return e&&0!==e.length?(0,u.Y)("div",{className:"ImagePreviewList_imagePreviewContainer__8Nxw3",children:e.map(((t,e)=>(0,u.FD)("div",{className:"ImagePreviewList_imagePreviewWrapper__Fbo6t",children:[(0,u.Y)("img",{src:t.url,alt:`preview ${e}`,className:"ImagePreviewList_imagePreview__F6e65"}),(0,u.Y)("button",{className:"ImagePreviewList_removeImageButton__I3+bg",onClick:()=>n(e),"aria-label":`Remove image ${e+1}`,title:`Remove image ${e+1}`,children:(0,u.Y)(r.uv5,{size:12})})]},e)))}):null},s=i.Ay.memo(h),_="ChatInputTextArea_noModelSelected__r21+n",c=(0,i.Rf)(((t,e)=>{let{value:n,onChange:i,onKeyDown:a,onPaste:o,placeholder:l,disabled:h=!1,isEditing:s=!1,isWaitingForResponse:c=!1,selectedModel:p=null,onSendClick:d}=t;const C=c?"Stop generation":p?s?"Save edit":"Send message":"Select model",m=c?"Stop generation":p?s?"Save edit (Enter)":"Send message (Enter)":"Select a model";return(0,u.FD)("div",{className:`ChatInputTextArea_ChatInput__inputWrapper__DjtRz ${p?"":_}`,children:[(0,u.Y)("textarea",{ref:e,className:"ChatInputTextArea_ChatInput__chatInput__Ubtuq",placeholder:l,value:n,onChange:i,onKeyDown:a,onPaste:o,disabled:h,rows:1,"aria-label":"Chat message input"}),(0,u.Y)("button",{className:`ChatInputTextArea_ChatInput__sendButtonInline__QGbym ${c?"ChatInputTextArea_ChatInput__stopButton__5zQFy":""} ${p?"":_}`,onClick:d,disabled:!c&&(!(null!=n&&n.trim())||h),"aria-label":C,title:m,type:"button",children:c?(0,u.Y)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.Y)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}):p?s?(0,u.Y)(r.Srz,{size:21}):(0,u.Y)(r.GD3,{size:21}):(0,u.FD)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,u.Y)("rect",{x:"3",y:"3",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"7",y:"3",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"11",y:"3",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"3",y:"7",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"7",y:"7",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"11",y:"7",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"3",y:"11",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"7",y:"11",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"11",y:"11",width:"2",height:"2",fill:"currentColor"})]})})]})}));c.displayName="ChatInputTextArea";const p=c,d="ChatInputActionRow_ChatInput__actionButton__dKPqJ",C="ChatInputActionRow_ChatInput__iconOnlyButton__bM9a2",m="ChatInputActionRow_ChatInput__uploadButton__knhQi",g="ChatInputActionRow_ChatInput__textButton__-ACzO",I="ChatInputActionRow_buttonText__Nozh6",w=t=>{var e,n,i;let{isMobile:a=!1,isEditing:o=!1,disabled:l=!1,selectedModel:h=null,onNewChat:s,onUploadClick:_,onCancelEdit:c,onToggleModelSelector:p}=t;return(0,u.FD)("div",{className:"ChatInputActionRow_ChatInput__actionRow__-KENz",children:[(0,u.FD)("div",{className:"ChatInputActionRow_ChatInput__leftButtons__vzYHL",children:[(0,u.Y)("button",{className:m,onClick:_,disabled:l||!(null!=h&&null!==(e=h.capabilities)&&void 0!==e&&e.includes("vision")),"aria-label":null!=h&&null!==(n=h.capabilities)&&void 0!==n&&n.includes("vision")?"Upload images":"Select a model with vision capabilities",title:null!=h&&null!==(i=h.capabilities)&&void 0!==i&&i.includes("vision")?"Upload images":"Select a model with vision capabilities",type:"button",children:(0,u.Y)(r.xfq,{size:16})}),(0,u.FD)("button",{className:`${g} ${a?C:""}`,"aria-label":"Search",title:"Search (coming soon)",type:"button",disabled:!0,children:[(0,u.Y)(r.WIv,{size:16}),!a&&(0,u.Y)("span",{className:I,children:"Search"})]}),(0,u.FD)("button",{className:`${g} ${a?C:""}`,"aria-label":"Reason mode",title:"Reason mode (coming soon)",type:"button",disabled:!0,children:[(0,u.Y)(r.XLj,{size:16}),!a&&(0,u.Y)("span",{className:I,children:"Reason"})]}),(0,u.Y)("button",{className:d,"aria-label":"More options",title:"More options (coming soon)",type:"button",disabled:!0,children:(0,u.Y)(r.tno,{size:16})})]}),(0,u.FD)("div",{className:"ChatInputActionRow_ChatInput__rightButtons__5Y1Fz",children:[(0,u.Y)("button",{className:d,onClick:s,"aria-label":"New chat",title:"New chat",type:"button",children:(0,u.Y)(r.c11,{size:16})}),o&&(0,u.Y)("button",{className:m,onClick:c,"aria-label":"Cancel edit",title:"Cancel edit (Esc)",type:"button",children:(0,u.Y)(r.uv5,{size:16})}),(0,u.Y)("button",{className:"ChatInputActionRow_ChatInput__modelButton__YhfDh",onClick:p,"aria-label":"Select AI model",title:"Select AI model",type:"button",children:(0,u.FD)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,u.Y)("rect",{x:"3",y:"3",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"7",y:"3",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"11",y:"3",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"3",y:"7",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"7",y:"7",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"11",y:"7",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"3",y:"11",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"7",y:"11",width:"2",height:"2",fill:"currentColor"}),(0,u.Y)("rect",{x:"11",y:"11",width:"2",height:"2",fill:"currentColor"})]})})]})]})},v=i.Ay.memo(w),b=t=>new Promise(((e,n)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=t=>n(t),i.readAsDataURL(t)})),y=(0,i.ph)((t=>{let{disabled:e=!1,selectedModel:n=null,isStaticLayout:r=!1,editingMessage:h=null,onCancelEdit:_=()=>{},isStreaming:c=!1,toggleModelSelector:d=()=>{},onFocus:C=()=>{},isInitialChat:m=!1,onSendMessage:g}=t;const[I,w]=(0,i.J0)(""),[y,f]=(0,i.J0)([]),x=(0,i.li)(null),Y=(0,i.li)(null),B=!!h,[M,z]=(0,i.J0)(window.innerWidth<=600),{isWaitingForResponse:E}=(0,o.P)(),{stopGeneration:N,newChat:F}=(0,l.r)(),[R,S]=(0,i.J0)(null),k=(0,i.li)(null);(0,i.vJ)((()=>{const t=()=>z(window.innerWidth<=600);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),(0,i.vJ)((()=>{var t;null===(t=x.current)||void 0===t||t.focus()}),[]),(0,i.vJ)((()=>{if(h){let t="";const e=[];"string"==typeof h.content?t=h.content:Array.isArray(h.content)&&h.content.forEach((n=>{var i;"text"===n.type&&(t+=n.text||""),"image_url"===n.type&&null!==(i=n.image_url)&&void 0!==i&&i.url&&e.push({name:"",url:n.image_url.url})})),w(t),f(e),setTimeout((()=>{var t;return null===(t=x.current)||void 0===t?void 0:t.focus()}),0)}else w(""),f([])}),[h]);const A=(0,i.hb)((()=>{const t=x.current;if(!t)return;let e;t.style.height="auto",e=M?Math.min(t.scrollHeight+2,200):Math.max(48,Math.min(t.scrollHeight+2,200)),t.style.height=`${e}px`;const n=t.closest(`.${a.ChatInput}`);n&&n.style.setProperty("--textarea-height",`${e}px`)}),[M]);(0,i.vJ)((()=>{A()}),[I,A]),(0,i.vJ)((()=>{if(!M)return;const t=()=>{const t=window.innerHeight<.75*window.outerHeight;document.body.classList.toggle("keyboard-open",t)},e=()=>{M&&(document.body.classList.add("keyboard-open"),window.addEventListener("resize",t)),C&&C()},n=()=>{M&&(document.body.classList.remove("keyboard-open"),window.removeEventListener("resize",t))},i=x.current;return i&&(i.addEventListener("focus",e),i.addEventListener("blur",n)),()=>{i&&(i.removeEventListener("focus",e),i.removeEventListener("blur",n)),window.removeEventListener("resize",t),document.body.classList.remove("keyboard-open")}}),[M,C]);const P=(0,i.hb)((t=>{S(t),k.current&&clearTimeout(k.current),k.current=setTimeout((()=>{S(null),k.current=null}),3e3)}),[]);(0,i.vJ)((()=>()=>{k.current&&clearTimeout(k.current)}),[]);const D=(0,i.hb)((t=>{w(t.target.value)}),[]),L=(0,i.hb)((()=>{const t=I.trim().length>0,i=y.length>0;if(!t&&!i||e)return;if(!n&&d)return void d();const a=[];t&&a.push({type:"text",text:I.trim()}),i&&y.forEach((t=>a.push({type:"image_url",image_url:{url:t.url}}))),a.length>0&&g(a,B?h:null),w(""),f([]),B&&_&&_(),x.current&&(x.current.style.height="auto",setTimeout((()=>{var t;return null===(t=x.current)||void 0===t?void 0:t.focus()}),0))}),[I,y,e,n,d,g,B,h,_]),W=(0,i.hb)((t=>{"Enter"!==t.key||t.shiftKey?B&&"Escape"===t.key&&(t.preventDefault(),_&&_(),w(""),f([])):(t.preventDefault(),E||L())}),[E,L,B,_]),T=(0,i.hb)((async t=>{const e=Array.from(t.target.files);if(e.length){if(y.length+e.length>5)return P("Max 5 images allowed."),void(Y.current&&(Y.current.value=""));try{const t=e.map((async t=>{if(!t.type.startsWith("image/"))throw new Error(`${t.name} invalid type.`);if(t.size>5242880)throw new Error(`${t.name} > 5MB.`);const e=await b(t);return{name:t.name,url:e}})),n=await Promise.all(t);f((t=>[...t,...n]))}catch(n){P(`Image error: ${n.message}`)}Y.current&&(Y.current.value="")}}),[y.length,P]),$=(0,i.hb)((async t=>{var e;if(B)return;const n=null===(e=t.clipboardData)||void 0===e?void 0:e.items;if(!n)return;const i=Array.from(n).filter((t=>t.type.startsWith("image/")));if(0!==i.length)if(y.length+i.length>5)P("Max 5 images allowed.");else try{const e=i.map((async t=>{const e=t.getAsFile();if(e.size>5242880)throw new Error("Pasted image > 5MB.");const n=await b(e);return{name:"pasted-"+Date.now(),url:n}})),n=await Promise.all(e);n.length>0&&(f((t=>[...t,...n])),t.preventDefault())}catch(a){P(`Paste error: ${a.message}`)}}),[B,y.length,P]),J=(0,i.hb)((t=>{f((e=>e.filter(((e,n)=>n!==t))))}),[]),K=(0,i.hb)((()=>{var t;if(!n&&d)d();else if(null!=n&&null!==(t=n.capabilities)&&void 0!==t&&t.includes("vision")){var e;null===(e=Y.current)||void 0===e||e.click()}else P("Select a model with vision capabilities to upload images.")}),[n,d,P]),O=(0,i.hb)((()=>{_&&_(),w(""),f([])}),[_]),Q=(0,i.hb)((()=>{N()}),[N]),U=(0,i.hb)((t=>{t.preventDefault(),t.stopPropagation(),E?Q():L(),M&&x.current&&x.current.blur()}),[E,Q,L,M]),q=B?"Edit your message...":E?"Type your next message while waiting...":"Ask anything";return(0,u.FD)(u.FK,{children:[(0,u.Y)(s,{images:y,onRemoveImage:J}),(0,u.FD)("div",{className:[a.ChatInput,B?a["ChatInput--editing"]:"",E?a["ChatInput--waitingForResponse"]:"",M?a.ChatInput__mobileView:"",M?m?a["ChatInput--mobileInitial"]:a["ChatInput--mobileWithMessages"]:""].filter(Boolean).join(" "),children:[R&&(0,u.Y)("div",{className:a.ChatInput__error,role:"alert",children:R}),(0,u.Y)("input",{type:"file",ref:Y,style:{display:"none"},accept:"image/jpeg, image/png, image/gif, image/webp",multiple:!0,onChange:T}),(0,u.Y)(p,{ref:x,value:I,onChange:D,onKeyDown:W,onPaste:$,placeholder:q,disabled:e,isEditing:B,isWaitingForResponse:E,selectedModel:n,onSendClick:U}),(0,u.Y)(v,{isMobile:M,isEditing:B,disabled:e,selectedModel:n,onNewChat:F,onUploadClick:K,onCancelEdit:O,onToggleModelSelector:d})]})]})}));y.displayName="ChatInput";const f=y}}]);
//# sourceMappingURL=chat-input.a9c7eaa42b.chunk.v2_0_1.js.map