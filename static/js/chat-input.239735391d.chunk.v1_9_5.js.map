{"version":3,"file":"static/js/chat-input.239735391d.chunk.v1_9_5.js","mappings":"2KACA,SAAgB,UAAY,6BAA6B,wBAA0B,2CAA2C,qBAAuB,wCAAwC,gCAAgC,iDAAiD,yBAA2B,4CAA4C,qBAAqB,sCAAsC,wBAA0B,2CAA2C,sBAAwB,yCAAyC,4BAA8B,+CAA+C,gBAAkB,mCAAmC,iCAAmC,oDAAoD,+BAAiC,kDAAkD,wBAA0B,2CAA2C,6BAA+B,gDAAgD,uBAAyB,0CAA0C,iBAAmB,oCAAoC,OAAS,0BAA0B,UAAY,6BAA6B,QAAU,2BAA2B,aAAe,gCAAgC,wBAA0B,2CAA2C,wBAA0B,2CAA2C,sBAAwB,yCAAyC,uBAAyB,0CAA0C,0BAA4B,6CAA6C,sBAAwB,yCAAyC,qBAAuB,wCAAwC,uBAAyB,0CAA0C,wBAA0B,2CAA2C,WAAa,8BAA8B,2BAA2B,4CAA4C,gCAAgC,kD,oDCIj+D,MAAMA,EAAmBC,IAAgC,IAA/B,OAAEC,EAAM,cAAEC,GAAeF,EACjD,OAAKC,GAA4B,IAAlBA,EAAOE,QAKpBC,EAAAA,EAAAA,GAAA,OAAKC,UCV+B,gDDUSC,SAC1CL,EAAOM,KAAI,CAACC,EAAOC,KAClBC,EAAAA,EAAAA,IAAA,OAAiBL,UCZqF,8CDY/CC,SAAA,EACrDF,EAAAA,EAAAA,GAAA,OACEO,IAAKH,EAAMI,IACXC,IAAK,WAAWJ,IAChBJ,UChB+J,0CDkBjKD,EAAAA,EAAAA,GAAA,UACEC,UCnB0N,4CDoB1NS,QAASA,IAAMZ,EAAcO,GAC7B,aAAY,gBAAgBA,EAAQ,IACpCM,MAAO,gBAAgBN,EAAQ,IAAIH,UAEnCF,EAAAA,EAAAA,GAACY,EAAAA,IAAK,CAACC,KAAM,SAZPR,OANP,IAsBD,EAYV,EAAeS,EAAAA,GAAAA,KAAWnB,GExC1B,EAA+G,2CCIzGoB,GAAoBC,EAAAA,EAAAA,KAAW,CAAApB,EAWlCqB,KAAS,IAX0B,MACpCC,EAAK,SACLC,EAAQ,UACRC,EAAS,QACTC,EAAO,YACPC,EAAW,SACXC,GAAW,EAAK,UAChBC,GAAY,EAAK,qBACjBC,GAAuB,EAAK,cAC5BC,EAAgB,KAAI,YACpBC,GACD/B,EAEC,MA6BMgC,EAAkBH,EAAuB,kBACrBC,EACDF,EAAY,YACZ,eAFiB,eAIpCK,EAAkBJ,EAAuB,kBACrBC,EACDF,EAAY,oBACZ,uBAFiB,iBAI1C,OACElB,EAAAA,EAAAA,IAAA,OAAKL,UAAW,oDAAyCyB,EAAyC,GAAzBI,IAA8B5B,SAAA,EACrGF,EAAAA,EAAAA,GAAA,YACEiB,IAAKA,EACLhB,UD5DyK,gDC6DzKqB,YAAaA,EACbJ,MAAOA,EACPC,SAAUA,EACVC,UAAWA,EACXC,QAASA,EACTE,SAAUA,EACVQ,KAAM,EACN,aAAW,wBAGb/B,EAAAA,EAAAA,GAAA,UACEC,UAAW,wDAA4CwB,EDxE+Q,iDCwEtN,MAAOC,EAAyC,GAAzBI,IACvIpB,QAASiB,EAETJ,UAAWE,MAA0BP,SAAAA,EAAOc,SAAUT,GACtD,aAAYK,EACZjB,MAAOkB,EACPI,KAAK,SAAQ/B,SA5DbuB,GAEAzB,EAAAA,EAAAA,GAAA,OAAKkC,MAAM,6BAA6BC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IAAIC,cAAc,QAAQC,eAAe,QAAOxC,UAC/KF,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,KAAKC,OAAO,KAAKS,GAAG,IAAIC,GAAG,QAIpDpB,EAeDF,GACKxB,EAAAA,EAAAA,GAAC+C,EAAAA,IAAS,CAAClC,KAAM,MAEnBb,EAAAA,EAAAA,GAACgD,EAAAA,IAAiB,CAACnC,KAAM,MAhB5BP,EAAAA,EAAAA,IAAA,OAAK6B,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOJ,MAAM,6BAA4BhC,SAAA,EAC5FF,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,KAAKC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,KAAKC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,KAAKT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,KAAKT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,KAAKC,EAAE,KAAKT,MAAM,IAAIC,OAAO,IAAIE,KAAK,wBA8C9C,IAiBVvB,EAAkBkC,YAAc,oBAEhC,UCrGA,EAA4Q,oDAA5Q,EAA4V,sDAA5V,EAA4a,oDAA5a,EAAokB,kDAApkB,EAAmoB,uCCI7nBC,EAAqBtD,IAUpB,IAADuD,EAAAC,EAAAC,EAAA,IAVsB,SAC1BC,GAAW,EAAK,UAChB9B,GAAY,EAAK,SACjBD,GAAW,EAAK,cAChBG,EAAgB,KAAI,UACpB6B,EAAS,cACTC,EAAa,aACbC,EAAY,sBACZC,GAED9D,EACC,OACEU,EAAAA,EAAAA,IAAA,OAAKL,UDhB8B,iDCgBYC,SAAA,EAE7CI,EAAAA,EAAAA,IAAA,OAAKL,UDlBsG,mDCkB1DC,SAAA,EAE/CF,EAAAA,EAAAA,GAAA,UACEC,UAAW6B,EACXpB,QAAS8C,EACTjC,SAAUA,KAAaG,SAA2B,QAAdyB,EAAbzB,EAAeiC,oBAAY,IAAAR,GAA3BA,EAA6BS,SAAS,WAC7D,aAAYlC,SAA2B,QAAd0B,EAAb1B,EAAeiC,oBAAY,IAAAP,GAA3BA,EAA6BQ,SAAS,UAAY,gBAAkB,0CAChFjD,MAAOe,SAA2B,QAAd2B,EAAb3B,EAAeiC,oBAAY,IAAAN,GAA3BA,EAA6BO,SAAS,UAAY,gBAAkB,0CAC3E3B,KAAK,SAAQ/B,UAEbF,EAAAA,EAAAA,GAAC6D,EAAAA,IAAS,CAAChD,KAAM,QAInBP,EAAAA,EAAAA,IAAA,UACEL,UAAW,GAAG6B,KAAmCwB,EAAWxB,EAAsC,KAClG,aAAW,SACXnB,MAAM,uBACNsB,KAAK,SACLV,UAAU,EAAMrB,SAAA,EAEhBF,EAAAA,EAAAA,GAAC8D,EAAAA,IAAU,CAACjD,KAAM,MAChByC,IAAYtD,EAAAA,EAAAA,GAAA,QAAMC,UAAW6B,EAAkB5B,SAAC,eAGpDI,EAAAA,EAAAA,IAAA,UACEL,UAAW,GAAG6B,KAAmCwB,EAAWxB,EAAsC,KAClG,aAAW,cACXnB,MAAM,4BACNsB,KAAK,SACLV,UAAU,EAAMrB,SAAA,EAEhBF,EAAAA,EAAAA,GAAC+D,EAAAA,IAAa,CAAClD,KAAM,MACnByC,IAAYtD,EAAAA,EAAAA,GAAA,QAAMC,UAAW6B,EAAkB5B,SAAC,eAGpDF,EAAAA,EAAAA,GAAA,UACEC,UAAW6B,EACX,aAAW,eACXnB,MAAM,6BACNsB,KAAK,SACLV,UAAU,EAAMrB,UAEhBF,EAAAA,EAAAA,GAACgE,EAAAA,IAAmB,CAACnD,KAAM,WAK/BP,EAAAA,EAAAA,IAAA,OAAKL,UDlEmL,oDCkEtIC,SAAA,EAEhDF,EAAAA,EAAAA,GAAA,UACEC,UAAW6B,EACXpB,QAAS6C,EACT,aAAW,WACX5C,MAAM,WACNsB,KAAK,SAAQ/B,UAEbF,EAAAA,EAAAA,GAACiE,EAAAA,IAAQ,CAACpD,KAAM,OAIjBW,IACCxB,EAAAA,EAAAA,GAAA,UACEC,UAAW6B,EACXpB,QAAS+C,EACT,aAAW,cACX9C,MAAM,oBACNsB,KAAK,SAAQ/B,UAEbF,EAAAA,EAAAA,GAACY,EAAAA,IAAK,CAACC,KAAM,QAKjBb,EAAAA,EAAAA,GAAA,UACEC,UD7F+e,mDC8F/eS,QAASgD,EACT,aAAW,kBACX/C,MAAM,kBACNsB,KAAK,SAAQ/B,UAEbI,EAAAA,EAAAA,IAAA,OAAK6B,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOJ,MAAM,6BAA4BhC,SAAA,EAE3FF,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,KAAKC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC5CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,KAAKC,EAAE,IAAIT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,KAAKT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,IAAIC,EAAE,KAAKT,MAAM,IAAIC,OAAO,IAAIE,KAAK,kBAC7CtC,EAAAA,EAAAA,GAAA,QAAM2C,EAAE,KAAKC,EAAE,KAAKT,MAAM,IAAIC,OAAO,IAAIE,KAAK,2BAIjD,EAeV,EAAexB,EAAAA,GAAAA,KAAWoC,GCjHpBgB,EAAoBC,GACjB,IAAIC,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAMJ,EAAQE,EAAOG,QACrCH,EAAOI,QAAWC,GAAUN,EAAOM,GACnCL,EAAOM,cAAcV,EAAK,IAOxBW,GAAYC,EAAAA,EAAAA,KAAKnF,IAWhB,IAXiB,SACtB2B,GAAW,EAAK,cAChBG,EAAgB,KAAI,eACpBsD,GAAiB,EAAK,eACtBC,EAAiB,KAAI,aACrBxB,EAAeA,OAAQ,YACvByB,GAAc,EAAK,oBACnBC,EAAsBA,OAAQ,QAC9BC,EAAUA,OAAQ,cAClBC,GAAgB,EAAK,cACrBC,GACD1F,EACC,MAAO2F,EAASC,IAAcC,EAAAA,EAAAA,IAAS,KAChCC,EAAgBC,IAAqBF,EAAAA,EAAAA,IAAS,IAC/CG,GAAcC,EAAAA,EAAAA,IAAO,MACrBC,GAAeD,EAAAA,EAAAA,IAAO,MACtBrE,IAAcyD,GACb3B,EAAUyC,IAAeN,EAAAA,EAAAA,IAASO,OAAOC,YAAc,MACxD,qBAAExE,IAAyByE,EAAAA,EAAAA,MAC3B,eAAEC,EAAc,QAAEC,IAAYC,EAAAA,EAAAA,MAC7BC,EAAYC,IAAiBd,EAAAA,EAAAA,IAAS,MACvCe,GAAkBX,EAAAA,EAAAA,IAAO,OAG/BY,EAAAA,EAAAA,KAAU,KACR,MAAMC,EAAeA,IAAMX,EAAYC,OAAOC,YAAc,KAE5D,OADAD,OAAOW,iBAAiB,SAAUD,GAC3B,IAAMV,OAAOY,oBAAoB,SAAUF,EAAa,GAC9D,KAGHD,EAAAA,EAAAA,KAAU,KAAO,IAADI,EACK,QAAnBA,EAAAjB,EAAYkB,eAAO,IAAAD,GAAnBA,EAAqBE,OAAO,GAC3B,KAGHN,EAAAA,EAAAA,KAAU,KACR,GAAIxB,EAAgB,CAClB,IAAI+B,EAAc,GAClB,MAAMnH,EAAS,GACuB,iBAA3BoF,EAAegC,QACxBD,EAAc/B,EAAegC,QACpBC,MAAMC,QAAQlC,EAAegC,UACtChC,EAAegC,QAAQG,SAAQC,IAAS,IAADC,EACnB,SAAdD,EAAKpF,OAAiB+E,GAAeK,EAAKE,MAAQ,IACpC,cAAdF,EAAKpF,MAAsC,QAAlBqF,EAAID,EAAKG,iBAAS,IAAAF,GAAdA,EAAgB9G,KAC/CX,EAAO4H,KAAK,CAAEC,KAAM,GAAIlH,IAAK6G,EAAKG,UAAUhH,KAC9C,IAGJgF,EAAWwB,GACXrB,EAAkB9F,GAClB8H,YAAW,SAAAC,EAAA,OAAyB,QAAzBA,EAAMhC,EAAYkB,eAAO,IAAAc,OAAA,EAAnBA,EAAqBb,OAAO,GAAE,EACjD,MAEEvB,EAAW,IACXG,EAAkB,GACpB,GACC,CAACV,IAGJ,MAAM4C,GAAuBC,EAAAA,EAAAA,KAAY,KACvC,MAAMC,EAAWnC,EAAYkB,QAC7B,IAAKiB,EAAU,OAEf,IAAIC,EADJD,EAASE,MAAM7F,OAAS,OAItB4F,EAFE1E,EAEU4E,KAAKC,IAAIJ,EAASK,aAAe,EAAG,KAGpCF,KAAKG,IAAI,GAAIH,KAAKC,IAAIJ,EAASK,aAAe,EAAG,MAE/DL,EAASE,MAAM7F,OAAS,GAAG4F,MAC3B,MAAMM,EAAiBP,EAASQ,QAAQ,IAAIzG,EAAOgD,aAC/CwD,GACFA,EAAeL,MAAMO,YAAY,oBAAqB,GAAGR,MAC3D,GACC,CAAC1E,KAEJmD,EAAAA,EAAAA,KAAU,KACRoB,GAAsB,GACrB,CAACtC,EAASsC,KAGbpB,EAAAA,EAAAA,KAAU,KACR,IAAKnD,EAAU,OACf,MAAMmF,EAAiBA,KACrB,MAAMC,EAAa1C,OAAO2C,YAAmC,IAArB3C,OAAO4C,YAC/CC,SAASC,KAAKC,UAAUC,OAAO,gBAAiBN,EAAW,EAEvDO,EAAcA,KACd3F,IACFuF,SAASC,KAAKC,UAAUG,IAAI,iBAC5BlD,OAAOW,iBAAiB,SAAU8B,IAEhCrD,GAASA,GAAS,EAElB+D,EAAaA,KACb7F,IACFuF,SAASC,KAAKC,UAAUK,OAAO,iBAC/BpD,OAAOY,oBAAoB,SAAU6B,GACvC,EAEIV,EAAWnC,EAAYkB,QAK7B,OAJIiB,IACFA,EAASpB,iBAAiB,QAASsC,GACnClB,EAASpB,iBAAiB,OAAQwC,IAE7B,KACDpB,IACFA,EAASnB,oBAAoB,QAASqC,GACtClB,EAASnB,oBAAoB,OAAQuC,IAEvCnD,OAAOY,oBAAoB,SAAU6B,GACrCI,SAASC,KAAKC,UAAUK,OAAO,gBAAgB,CAChD,GACA,CAAC9F,EAAU8B,IAGd,MAAMiE,GAAYvB,EAAAA,EAAAA,KAAavC,IAC7BgB,EAAchB,GAEViB,EAAgBM,SAClBwC,aAAa9C,EAAgBM,SAG/BN,EAAgBM,QAAUa,YAAW,KACnCpB,EAAc,MACdC,EAAgBM,QAAU,IAAI,GAC7B,IAAK,GACP,KAGHL,EAAAA,EAAAA,KAAU,IACD,KACDD,EAAgBM,SAClBwC,aAAa9C,EAAgBM,QAC/B,GAED,IAIH,MAAMyC,GAAezB,EAAAA,EAAAA,KAAa0B,IAChChE,EAAWgE,EAAEC,OAAOvI,MAAM,GACzB,IAEGwI,GAAwB5B,EAAAA,EAAAA,KAAY,KACxC,MAAM6B,EAAUpE,EAAQvD,OAAOjC,OAAS,EAClC6J,EAAYlE,EAAe3F,OAAS,EAC1C,IAAM4J,IAAYC,GAAcrI,EAAU,OAE1C,IAAKG,GAAiByD,EAEpB,YADAA,IAIF,MAAM0E,EAAiB,GACnBF,GAASE,EAAepC,KAAK,CAAExF,KAAM,OAAQsF,KAAMhC,EAAQvD,SAC3D4H,GAAWlE,EAAe0B,SAAQ0C,GAAOD,EAAepC,KAAK,CAAExF,KAAM,YAAauF,UAAW,CAAEhH,IAAKsJ,EAAItJ,SAExGqJ,EAAe9J,OAAS,GAC1BuF,EAAcuE,EAAgBrI,EAAYyD,EAAiB,MAG7DO,EAAW,IACXG,EAAkB,IACdnE,GAAaiC,GAAcA,IAE3BmC,EAAYkB,UACdlB,EAAYkB,QAAQmB,MAAM7F,OAAS,OACnCuF,YAAW,SAAAoC,EAAA,OAAyB,QAAzBA,EAAMnE,EAAYkB,eAAO,IAAAiD,OAAA,EAAnBA,EAAqBhD,OAAO,GAAE,GACjD,GACC,CAACxB,EAASG,EAAgBnE,EAAUG,EAAeyD,EAAqBG,EAAe9D,EAAWyD,EAAgBxB,IAE/GuG,GAAgBlC,EAAAA,EAAAA,KAAa0B,IACnB,UAAVA,EAAES,KAAoBT,EAAEU,SAGjB1I,GAAuB,WAAVgI,EAAES,MACxBT,EAAEW,iBACE1G,GAAcA,IAClB+B,EAAW,IACXG,EAAkB,MANlB6D,EAAEW,iBACG1I,GAAsBiI,IAM7B,GACC,CAACjI,EAAsBiI,EAAuBlI,EAAWiC,IAEtD2G,GAAuBtC,EAAAA,EAAAA,KAAYuC,UACvC,MAAMC,EAAQpD,MAAMqD,KAAKC,EAAMf,OAAOa,OACtC,GAAKA,EAAMvK,OAAX,CAEA,GAAI2F,EAAe3F,OAASuK,EAAMvK,OADf,EAIjB,OAFAsJ,EAAU,8BACNvD,EAAagB,UAAShB,EAAagB,QAAQ5F,MAAQ,KAGzD,IACE,MAAMuJ,EAAgBH,EAAMnK,KAAIkK,UAC9B,IAAKlG,EAAKlC,KAAKyI,WAAW,UAAW,MAAM,IAAIC,MAAM,GAAGxG,EAAKuD,sBAE7D,GAAIvD,EAAKtD,KAAO+J,QAA2B,MAAM,IAAID,MAAM,GAAGxG,EAAKuD,eACnE,MAAMmD,QAAe3G,EAAiBC,GACtC,MAAO,CAAEuD,KAAMvD,EAAKuD,KAAMlH,IAAKqK,EAAQ,IAEnCC,QAAkB1G,QAAQ2G,IAAIN,GACpC9E,GAAmBqF,GAAS,IAAIA,KAASF,IAC3C,CAAE,MAAOlG,GAEPyE,EAAU,gBAAgBzE,EAAMW,UAClC,CACIO,EAAagB,UAAShB,EAAagB,QAAQ5F,MAAQ,GArB9B,CAqBgC,GACxD,CAACwE,EAAe3F,OAAQsJ,IAErB4B,GAAcnD,EAAAA,EAAAA,KAAYuC,UAAc,IAADa,EAC3C,GAAI1J,EAAW,OACf,MAAM2J,EAAuB,QAAlBD,EAAG1B,EAAE4B,qBAAa,IAAAF,OAAA,EAAfA,EAAiBC,MAC/B,IAAKA,EAAO,OACZ,MAAME,EAAanE,MAAMqD,KAAKY,GAAOG,QAAOC,GAAQA,EAAKtJ,KAAKyI,WAAW,YACzE,GAA0B,IAAtBW,EAAWtL,OAEf,GAAI2F,EAAe3F,OAASsL,EAAWtL,OADpB,EAEjBsJ,EAAU,8BAGZ,IACE,MAAMoB,EAAgBY,EAAWlL,KAAIkK,UACnC,MAAMlG,EAAOoH,EAAKC,YAElB,GAAIrH,EAAKtD,KAAO+J,QAA2B,MAAM,IAAID,MAAM,uBAC3D,MAAME,QAAe3G,EAAiBC,GACtC,MAAO,CAAEuD,KAAM,UAAY+D,KAAKC,MAAOlL,IAAKqK,EAAQ,IAEhDC,QAAkB1G,QAAQ2G,IAAIN,GAChCK,EAAU/K,OAAS,IACpB4F,GAAmBqF,GAAS,IAAIA,KAASF,KACzCtB,EAAEW,iBAEP,CAAE,MAAOvF,GAEPyE,EAAU,gBAAgBzE,EAAMW,UAClC,IACC,CAAC/D,EAAWkE,EAAe3F,OAAQsJ,IAEhCsC,GAAc7D,EAAAA,EAAAA,KAAa8D,IAC/BjG,GAAmBqF,GAASA,EAAKM,QAAO,CAACO,EAAGxL,IAAUA,IAAUuL,KAAe,GAC9E,IAEGE,GAAmBhE,EAAAA,EAAAA,KAAY,KAAO,IAAD3E,EAEzC,IAAKzB,GAAiByD,EACpBA,SACK,GAAIzD,SAA2B,QAAdyB,EAAbzB,EAAeiC,oBAAY,IAAAR,GAA3BA,EAA6BS,SAAS,UAAW,CAAC,IAADmI,EACrC,QAApBA,EAAAjG,EAAagB,eAAO,IAAAiF,GAApBA,EAAsBC,OACzB,MACE3C,EAAU,4DACZ,GACC,CAAC3H,EAAeyD,EAAqBkE,IAElC4C,GAAmBnE,EAAAA,EAAAA,KAAY,KAC/BrE,GAAcA,IAClB+B,EAAW,IACXG,EAAkB,GAAG,GACpB,CAAClC,IAEEyI,GAAapE,EAAAA,EAAAA,KAAY,KAC7B3B,GAAgB,GACf,CAACA,IAGEgG,GAAwBrE,EAAAA,EAAAA,KAAa0B,IACzCA,EAAEW,iBACFX,EAAE4C,kBACE3K,EACFyK,IAEAxC,IAEEpG,GAAYsC,EAAYkB,SAASlB,EAAYkB,QAAQuF,MAAM,GAC9D,CAAC5K,EAAsByK,EAAYxC,EAAuBpG,IAIvDgJ,EAAkB9K,EACpB,uBACAC,EACE,0CACA,eAEN,OACEnB,EAAAA,EAAAA,IAAAiM,EAAAA,GAAA,CAAArM,SAAA,EAEEF,EAAAA,EAAAA,GAACL,EAAgB,CAACE,OAAQ6F,EAAgB5F,cAAe6L,KAEzDrL,EAAAA,EAAAA,IAAA,OAAKL,UAAW,CACZ6B,EAAOgD,UACPtD,EAAYM,EAAO,sBAAwB,GAC3CL,EAAuBK,EAAO,iCAAmC,GACjEwB,EAAWxB,EAA8B,sBAAI,GAC7CwB,EAAY+B,EAAgBvD,EAAO,4BAA8BA,EAAO,iCAAoC,IAC5GwJ,OAAOkB,SAASC,KAAK,KAAKvM,SAAA,CAG3BoG,IACCtG,EAAAA,EAAAA,GAAA,OAAKC,UAAW6B,EAAO4K,iBAAkBC,KAAK,QAAOzM,SAClDoG,KAKLtG,EAAAA,EAAAA,GAAA,SACEiC,KAAK,OACLhB,IAAK6E,EACLmC,MAAO,CAAE2E,QAAS,QAClBC,OAAO,+CACPC,UAAQ,EACR3L,SAAUiJ,KAIZpK,EAAAA,EAAAA,GAACe,EAAiB,CACfE,IAAK2E,EACL1E,MAAOqE,EACPpE,SAAUoI,EACVnI,UAAW4I,EACX3I,QAAS4J,EACT3J,YAAagL,EACb/K,SAAUA,EACVC,UAAWA,EACXC,qBAAsBA,EACtBC,cAAeA,EACfC,YAAawK,KAIhBnM,EAAAA,EAAAA,GAACkD,EAAkB,CAChBI,SAAUA,EACV9B,UAAWA,EACXD,SAAUA,EACVG,cAAeA,EACf6B,UAAW6C,EACX5C,cAAesI,EACfrI,aAAcwI,EACdvI,sBAAuByB,SAG3B,IAKPL,EAAU7B,YAAc,YAiCxB,S","sources":["webpack://ai-chat-interface/./src/components/chat/ChatInput/ChatInput.module.css?602c","components/chat/ChatInput/subcomponents/ImagePreviewList/index.js","webpack://ai-chat-interface/./src/components/chat/ChatInput/subcomponents/ImagePreviewList/ImagePreviewList.module.css?964a","webpack://ai-chat-interface/./src/components/chat/ChatInput/subcomponents/ChatInputTextArea/ChatInputTextArea.module.css?1b56","components/chat/ChatInput/subcomponents/ChatInputTextArea/index.js","webpack://ai-chat-interface/./src/components/chat/ChatInput/subcomponents/ChatInputActionRow/ChatInputActionRow.module.css?2971","components/chat/ChatInput/subcomponents/ChatInputActionRow/index.js","components/chat/ChatInput/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"ChatInput\":\"ChatInput_ChatInput__vZ2zE\",\"ChatInput__inputWrapper\":\"ChatInput_ChatInput__inputWrapper__X78qG\",\"ChatInput__chatInput\":\"ChatInput_ChatInput__chatInput__cXzQx\",\"ChatInput--waitingForResponse\":\"ChatInput_ChatInput--waitingForResponse__aY9o4\",\"ChatInput__newChatButton\":\"ChatInput_ChatInput__newChatButton__saL2O\",\"ChatInput--editing\":\"ChatInput_ChatInput--editing__vWv8P\",\"ChatInput__cancelButton\":\"ChatInput_ChatInput__cancelButton__9s1M2\",\"ChatInput__stopButton\":\"ChatInput_ChatInput__stopButton__6IOZ1\",\"ChatInput__sendButtonInline\":\"ChatInput_ChatInput__sendButtonInline__9eMQP\",\"noModelSelected\":\"ChatInput_noModelSelected__wMDsr\",\"ChatInput__imagePreviewContainer\":\"ChatInput_ChatInput__imagePreviewContainer__-OmxQ\",\"ChatInput__imagePreviewWrapper\":\"ChatInput_ChatInput__imagePreviewWrapper__2ApRF\",\"ChatInput__imagePreview\":\"ChatInput_ChatInput__imagePreview__FUhzf\",\"ChatInput__removeImageButton\":\"ChatInput_ChatInput__removeImageButton__5qGnb\",\"ChatInput__hiddenInput\":\"ChatInput_ChatInput__hiddenInput__1iSrl\",\"ChatInput__error\":\"ChatInput_ChatInput__error__us3qf\",\"fadeIn\":\"ChatInput_fadeIn__xw2Be\",\"micButton\":\"ChatInput_micButton__MMbzF\",\"micIcon\":\"ChatInput_micIcon__zvEQO\",\"pluginButton\":\"ChatInput_pluginButton__mE262\",\"ChatInput__actionButton\":\"ChatInput_ChatInput__actionButton__-uKTr\",\"ChatInput__uploadButton\":\"ChatInput_ChatInput__uploadButton__w-h4x\",\"ChatInput__textButton\":\"ChatInput_ChatInput__textButton__k44fQ\",\"ChatInput__modelButton\":\"ChatInput_ChatInput__modelButton__5K9mB\",\"ChatInput__iconOnlyButton\":\"ChatInput_ChatInput__iconOnlyButton__YS-J7\",\"ChatInput__mobileView\":\"ChatInput_ChatInput__mobileView__Ff0f0\",\"ChatInput__actionRow\":\"ChatInput_ChatInput__actionRow__2iXfu\",\"ChatInput__leftButtons\":\"ChatInput_ChatInput__leftButtons__zBDzn\",\"ChatInput__rightButtons\":\"ChatInput_ChatInput__rightButtons__f6vXc\",\"buttonText\":\"ChatInput_buttonText__NBFbC\",\"ChatInput--mobileInitial\":\"ChatInput_ChatInput--mobileInitial__Icpnt\",\"ChatInput--mobileWithMessages\":\"ChatInput_ChatInput--mobileWithMessages__dUG4s\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { XIcon } from '@primer/octicons-react';\nimport styles from './ImagePreviewList.module.css';\n\nconst ImagePreviewList = ({ images, onRemoveImage }) => {\n  if (!images || images.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className={styles.imagePreviewContainer}>\n      {images.map((image, index) => (\n        <div key={index} className={styles.imagePreviewWrapper}>\n          <img \n            src={image.url} \n            alt={`preview ${index}`} \n            className={styles.imagePreview} \n          />\n          <button \n            className={styles.removeImageButton} \n            onClick={() => onRemoveImage(index)}\n            aria-label={`Remove image ${index + 1}`}\n            title={`Remove image ${index + 1}`}\n          >\n            <XIcon size={12} />\n          </button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nImagePreviewList.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape({\n    url: PropTypes.string.isRequired,\n    name: PropTypes.string // Name might not always be relevant here\n  })).isRequired,\n  onRemoveImage: PropTypes.func.isRequired,\n};\n\nexport default React.memo(ImagePreviewList); ","// extracted by mini-css-extract-plugin\nexport default {\"imagePreviewContainer\":\"ImagePreviewList_imagePreviewContainer__8Nxw3\",\"imagePreviewWrapper\":\"ImagePreviewList_imagePreviewWrapper__Fbo6t\",\"imagePreview\":\"ImagePreviewList_imagePreview__F6e65\",\"removeImageButton\":\"ImagePreviewList_removeImageButton__I3+bg\",\"closeButton\":\"ImagePreviewList_closeButton__QppTj\"};","// extracted by mini-css-extract-plugin\nexport default {\"ChatInput__inputWrapper\":\"ChatInputTextArea_ChatInput__inputWrapper__DjtRz\",\"noModelSelected\":\"ChatInputTextArea_noModelSelected__r21+n\",\"ChatInput__chatInput\":\"ChatInputTextArea_ChatInput__chatInput__Ubtuq\",\"ChatInput__sendButtonInline\":\"ChatInputTextArea_ChatInput__sendButtonInline__QGbym\",\"ChatInput__stopButton\":\"ChatInputTextArea_ChatInput__stopButton__5zQFy\"};","import React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { PaperAirplaneIcon, CheckIcon } from '@primer/octicons-react';\nimport styles from './ChatInputTextArea.module.css';\n\nconst ChatInputTextArea = forwardRef(({\n  value,\n  onChange,\n  onKeyDown,\n  onPaste,\n  placeholder,\n  disabled = false,\n  isEditing = false,\n  isWaitingForResponse = false,\n  selectedModel = null,\n  onSendClick // Renamed from handleButtonClick for clarity\n}, ref) => {\n  \n  const sendButtonIcon = () => {\n    if (isWaitingForResponse) {\n      return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"21\" height=\"21\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n          <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n        </svg>\n      );\n    }\n    if (!selectedModel) {\n      return (\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <rect x=\"3\" y=\"3\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"7\" y=\"3\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"11\" y=\"3\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"3\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"7\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"11\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"3\" y=\"11\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"7\" y=\"11\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          <rect x=\"11\" y=\"11\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n        </svg>\n      );\n    }\n    if (isEditing) {\n      return <CheckIcon size={21} />;\n    }\n    return <PaperAirplaneIcon size={21} />;\n  };\n  \n  const sendButtonLabel = isWaitingForResponse ? \"Stop generation\" \n                         : !selectedModel ? \"Select model\" \n                         : isEditing ? \"Save edit\" \n                         : \"Send message\";\n                         \n  const sendButtonTitle = isWaitingForResponse ? \"Stop generation\" \n                         : !selectedModel ? \"Select a model\" \n                         : isEditing ? \"Save edit (Enter)\" \n                         : \"Send message (Enter)\";\n\n  return (\n    <div className={`${styles['ChatInput__inputWrapper']} ${!selectedModel ? styles.noModelSelected : ''}`}>\n      <textarea\n        ref={ref} // Forwarded ref\n        className={styles['ChatInput__chatInput']}\n        placeholder={placeholder}\n        value={value}\n        onChange={onChange}\n        onKeyDown={onKeyDown}\n        onPaste={onPaste}\n        disabled={disabled}\n        rows={1}\n        aria-label=\"Chat message input\"\n      />\n      \n      <button\n        className={`${styles['ChatInput__sendButtonInline']} ${isWaitingForResponse ? styles['ChatInput__stopButton'] : ''} ${!selectedModel ? styles.noModelSelected : ''}`}\n        onClick={onSendClick}\n        // Disable logic simplified: disable if not waiting AND (no text OR disabled externally)\n        disabled={!isWaitingForResponse && (!value?.trim() || disabled)}\n        aria-label={sendButtonLabel}\n        title={sendButtonTitle}\n        type=\"button\"\n      >\n        {sendButtonIcon()}\n      </button>\n    </div>\n  );\n});\n\nChatInputTextArea.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func.isRequired,\n  onPaste: PropTypes.func.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  isWaitingForResponse: PropTypes.bool,\n  selectedModel: PropTypes.object,\n  onSendClick: PropTypes.func.isRequired,\n};\n\nChatInputTextArea.displayName = 'ChatInputTextArea';\n\nexport default ChatInputTextArea; ","// extracted by mini-css-extract-plugin\nexport default {\"ChatInput__actionRow\":\"ChatInputActionRow_ChatInput__actionRow__-KENz\",\"ChatInput__leftButtons\":\"ChatInputActionRow_ChatInput__leftButtons__vzYHL\",\"ChatInput__rightButtons\":\"ChatInputActionRow_ChatInput__rightButtons__5Y1Fz\",\"ChatInput__actionButton\":\"ChatInputActionRow_ChatInput__actionButton__dKPqJ\",\"ChatInput__iconOnlyButton\":\"ChatInputActionRow_ChatInput__iconOnlyButton__bM9a2\",\"ChatInput__uploadButton\":\"ChatInputActionRow_ChatInput__uploadButton__knhQi\",\"ChatInput__modelButton\":\"ChatInputActionRow_ChatInput__modelButton__YhfDh\",\"ChatInput__textButton\":\"ChatInputActionRow_ChatInput__textButton__-ACzO\",\"buttonText\":\"ChatInputActionRow_buttonText__Nozh6\",\"ChatInput__actionButton--plugin\":\"ChatInputActionRow_ChatInput__actionButton--plugin__wPNZO\",\"ChatInput__actionButton--mic\":\"ChatInputActionRow_ChatInput__actionButton--mic__ebPw9\",\"ChatInput__actionButton--micActive\":\"ChatInputActionRow_ChatInput__actionButton--micActive__OIQeB\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { PlusIcon, XIcon, KebabHorizontalIcon, ImageIcon, SearchIcon, LightBulbIcon } from '@primer/octicons-react';\nimport styles from './ChatInputActionRow.module.css';\n\nconst ChatInputActionRow = ({\n  isMobile = false,\n  isEditing = false,\n  disabled = false,\n  selectedModel = null,\n  onNewChat,\n  onUploadClick,\n  onCancelEdit,\n  onToggleModelSelector,\n  // Add props for Search/Reason/More buttons if implementing later\n}) => {\n  return (\n    <div className={styles['ChatInput__actionRow']}>\n      {/* Left side buttons */}\n      <div className={styles['ChatInput__leftButtons']}>\n        {/* Upload button */}\n        <button\n          className={styles['ChatInput__uploadButton']}\n          onClick={onUploadClick} // Use prop\n          disabled={disabled || !selectedModel?.capabilities?.includes('vision')} // Simplified logic\n          aria-label={selectedModel?.capabilities?.includes('vision') ? \"Upload images\" : \"Select a model with vision capabilities\"}\n          title={selectedModel?.capabilities?.includes('vision') ? \"Upload images\" : \"Select a model with vision capabilities\"}\n          type=\"button\"\n        >\n          <ImageIcon size={16} />\n        </button>\n        \n        {/* Placeholder Buttons - Add onClick handlers later */}\n        <button\n          className={`${styles['ChatInput__textButton']} ${isMobile ? styles['ChatInput__iconOnlyButton'] : ''}`}\n          aria-label=\"Search\"\n          title=\"Search (coming soon)\"\n          type=\"button\"\n          disabled={true} // Disable for now\n        >\n          <SearchIcon size={16} />\n          {!isMobile && <span className={styles.buttonText}>Search</span>}\n        </button>\n        \n        <button\n          className={`${styles['ChatInput__textButton']} ${isMobile ? styles['ChatInput__iconOnlyButton'] : ''}`}\n          aria-label=\"Reason mode\"\n          title=\"Reason mode (coming soon)\"\n          type=\"button\"\n          disabled={true} // Disable for now\n        >\n          <LightBulbIcon size={16} />\n          {!isMobile && <span className={styles.buttonText}>Reason</span>}\n        </button>\n        \n        <button\n          className={styles['ChatInput__actionButton']}\n          aria-label=\"More options\"\n          title=\"More options (coming soon)\"\n          type=\"button\"\n          disabled={true} // Disable for now\n        >\n          <KebabHorizontalIcon size={16} />\n        </button>\n      </div>\n      \n      {/* Right side buttons */}\n      <div className={styles['ChatInput__rightButtons']}>\n        {/* New chat button */}\n        <button \n          className={styles['ChatInput__actionButton']}\n          onClick={onNewChat}\n          aria-label=\"New chat\"\n          title=\"New chat\"\n          type=\"button\"\n        >\n          <PlusIcon size={16} />\n        </button>\n        \n        {/* Cancel edit button */}\n        {isEditing && (\n          <button\n            className={styles['ChatInput__uploadButton']} // Re-use style? Maybe rename this style\n            onClick={onCancelEdit}\n            aria-label=\"Cancel edit\"\n            title=\"Cancel edit (Esc)\"\n            type=\"button\"\n          >\n            <XIcon size={16} />\n          </button>\n        )}\n        \n        {/* AI model button */}\n        <button\n          className={styles['ChatInput__modelButton']}\n          onClick={onToggleModelSelector}\n          aria-label=\"Select AI model\"\n          title=\"Select AI model\"\n          type=\"button\"\n        >\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            {/* SVG content */}\n             <rect x=\"3\" y=\"3\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"7\" y=\"3\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"11\" y=\"3\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"3\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"7\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"11\" y=\"7\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"3\" y=\"11\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"7\" y=\"11\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n             <rect x=\"11\" y=\"11\" width=\"2\" height=\"2\" fill=\"currentColor\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nChatInputActionRow.propTypes = {\n  isMobile: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  disabled: PropTypes.bool,\n  selectedModel: PropTypes.object,\n  onNewChat: PropTypes.func.isRequired,\n  onUploadClick: PropTypes.func.isRequired,\n  onCancelEdit: PropTypes.func.isRequired,\n  onToggleModelSelector: PropTypes.func.isRequired,\n};\n\nexport default React.memo(ChatInputActionRow); ","import { useState, useRef, useEffect, useCallback, memo } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ChatInput.module.css';\nimport { useChatState } from '../../../contexts/ChatStateContext';\nimport { useChatControl } from '../../../contexts/ChatControlContext';\n\n// Import sub-components\nimport ImagePreviewList from './subcomponents/ImagePreviewList';\nimport ChatInputTextArea from './subcomponents/ChatInputTextArea';\nimport ChatInputActionRow from './subcomponents/ChatInputActionRow';\n\n/**\n * Reads a file and returns its base64 representation.\n * @param {File} file - The file to read.\n * @returns {Promise<string>} A promise resolving with the base64 data URL.\n */\nconst readFileAsBase64 = (file) => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(file);\n  });\n};\n\n/**\n * Auto-resizing chat input component (Refactored)\n */\nconst ChatInput = memo(({ \n  disabled = false, \n  selectedModel = null, \n  isStaticLayout = false,\n  editingMessage = null,\n  onCancelEdit = () => {},\n  isStreaming = false,\n  toggleModelSelector = () => {},\n  onFocus = () => {},\n  isInitialChat = false,\n  onSendMessage,\n}) => {\n  const [message, setMessage] = useState('');\n  const [selectedImages, setSelectedImages] = useState([]);\n  const textareaRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const isEditing = !!editingMessage;\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 600);\n  const { isWaitingForResponse } = useChatState();\n  const { stopGeneration, newChat } = useChatControl();\n  const [inputError, setInputError] = useState(null);\n  const errorTimeoutRef = useRef(null); // Ref to manage error timeout\n  \n  // Mobile detection\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth <= 600);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  \n  // Focus input on mount\n  useEffect(() => {\n    textareaRef.current?.focus();\n  }, []);\n  \n  // Set message/images when entering edit mode\n  useEffect(() => {\n    if (editingMessage) {\n      let textContent = '';\n      const images = [];\n      if (typeof editingMessage.content === 'string') {\n        textContent = editingMessage.content;\n      } else if (Array.isArray(editingMessage.content)) {\n        editingMessage.content.forEach(part => {\n          if (part.type === 'text') textContent += part.text || '';\n          if (part.type === 'image_url' && part.image_url?.url) {\n            images.push({ name: '', url: part.image_url.url });\n          }\n        });\n      }\n      setMessage(textContent);\n      setSelectedImages(images);\n      setTimeout(() => textareaRef.current?.focus(), 0);\n    } else {\n      // Clear state if exiting edit mode (e.g., via prop change)\n      setMessage('');\n      setSelectedImages([]);\n    }\n  }, [editingMessage]);\n  \n  // Auto-resize textarea\n  const adjustTextareaHeight = useCallback(() => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n    textarea.style.height = 'auto';\n    let newHeight;\n    if (isMobile) {\n      // On mobile, keep the original logic (max 200px)\n      newHeight = Math.min(textarea.scrollHeight + 2, 200);\n    } else {\n      // On desktop, use a minimum height of 48px, but allow to grow up to 200px\n      newHeight = Math.max(48, Math.min(textarea.scrollHeight + 2, 200));\n    }\n    textarea.style.height = `${newHeight}px`;\n    const inputContainer = textarea.closest(`.${styles.ChatInput}`);\n    if (inputContainer) {\n      inputContainer.style.setProperty('--textarea-height', `${newHeight}px`);\n    }\n  }, [isMobile]);\n  \n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [message, adjustTextareaHeight]);\n\n  // Mobile keyboard detection (Keep this logic here as it affects body class)\n  useEffect(() => {\n    if (!isMobile) return;\n    const detectKeyboard = () => {\n      const isKeyboard = window.innerHeight < window.outerHeight * 0.75;\n      document.body.classList.toggle('keyboard-open', isKeyboard);\n    };\n    const handleFocus = () => {\n      if (isMobile) {\n        document.body.classList.add('keyboard-open');\n        window.addEventListener('resize', detectKeyboard);\n      }\n      if (onFocus) onFocus();\n    };\n    const handleBlur = () => {\n      if (isMobile) {\n        document.body.classList.remove('keyboard-open');\n        window.removeEventListener('resize', detectKeyboard);\n      }\n    };\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.addEventListener('focus', handleFocus);\n      textarea.addEventListener('blur', handleBlur);\n    }\n    return () => {\n      if (textarea) {\n        textarea.removeEventListener('focus', handleFocus);\n        textarea.removeEventListener('blur', handleBlur);\n      }\n      window.removeEventListener('resize', detectKeyboard);\n      document.body.classList.remove('keyboard-open'); // Cleanup on unmount\n    };\n  }, [isMobile, onFocus]);\n\n  // Helper to show error message temporarily\n  const showError = useCallback((message) => {\n    setInputError(message);\n    // Clear previous timeout if any\n    if (errorTimeoutRef.current) {\n      clearTimeout(errorTimeoutRef.current);\n    }\n    // Set new timeout to clear error\n    errorTimeoutRef.current = setTimeout(() => {\n      setInputError(null);\n      errorTimeoutRef.current = null;\n    }, 3000); // Show error for 3 seconds\n  }, []);\n  \n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (errorTimeoutRef.current) {\n        clearTimeout(errorTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Event Handlers\n  \n  const handleChange = useCallback((e) => {\n    setMessage(e.target.value);\n  }, []);\n\n  const prepareAndSendMessage = useCallback(() => {\n    const hasText = message.trim().length > 0;\n    const hasImages = selectedImages.length > 0;\n    if ((!hasText && !hasImages) || disabled) return;\n\n    if (!selectedModel && toggleModelSelector) {\n      toggleModelSelector();\n      return;\n    }\n\n    const contentPayload = [];\n    if (hasText) contentPayload.push({ type: 'text', text: message.trim() });\n    if (hasImages) selectedImages.forEach(img => contentPayload.push({ type: 'image_url', image_url: { url: img.url } }));\n\n    if (contentPayload.length > 0) {\n      onSendMessage(contentPayload, isEditing ? editingMessage : null);\n    }\n\n    setMessage('');\n    setSelectedImages([]);\n    if (isEditing && onCancelEdit) onCancelEdit();\n\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto'; // Reset height immediately\n      setTimeout(() => textareaRef.current?.focus(), 0);\n    }\n  }, [message, selectedImages, disabled, selectedModel, toggleModelSelector, onSendMessage, isEditing, editingMessage, onCancelEdit]);\n\n  const handleKeyDown = useCallback((e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (!isWaitingForResponse) prepareAndSendMessage(); // Call renamed handler\n    } else if (isEditing && e.key === 'Escape') {\n      e.preventDefault();\n      if (onCancelEdit) onCancelEdit(); // Use onCancelEdit prop\n      setMessage(''); // Also clear message state\n      setSelectedImages([]);\n    }\n  }, [isWaitingForResponse, prepareAndSendMessage, isEditing, onCancelEdit]);\n\n  const handleImageSelection = useCallback(async (event) => {\n    const files = Array.from(event.target.files);\n    if (!files.length) return;\n    const MAX_IMAGES = 5;\n    if (selectedImages.length + files.length > MAX_IMAGES) {\n      showError(`Max ${MAX_IMAGES} images allowed.`); // Use showError\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n      return;\n    }\n    try {\n      const imagePromises = files.map(async (file) => {\n        if (!file.type.startsWith('image/')) throw new Error(`${file.name} invalid type.`);\n        const MAX_SIZE_MB = 5;\n        if (file.size > MAX_SIZE_MB * 1024 * 1024) throw new Error(`${file.name} > ${MAX_SIZE_MB}MB.`);\n        const base64 = await readFileAsBase64(file);\n        return { name: file.name, url: base64 };\n      });\n      const newImages = await Promise.all(imagePromises);\n      setSelectedImages((prev) => [...prev, ...newImages]);\n    } catch (error) {\n      console.error(\"Image processing error:\", error);\n      showError(`Image error: ${error.message}`); // Use showError\n    }\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  }, [selectedImages.length, showError]);\n\n  const handlePaste = useCallback(async (e) => {\n    if (isEditing) return;\n    const items = e.clipboardData?.items;\n    if (!items) return;\n    const imageItems = Array.from(items).filter(item => item.type.startsWith('image/'));\n    if (imageItems.length === 0) return;\n    const MAX_IMAGES = 5;\n    if (selectedImages.length + imageItems.length > MAX_IMAGES) {\n      showError(`Max ${MAX_IMAGES} images allowed.`); // Use showError\n      return;\n    }\n    try {\n      const imagePromises = imageItems.map(async (item) => {\n        const file = item.getAsFile();\n        const MAX_SIZE_MB = 5;\n        if (file.size > MAX_SIZE_MB * 1024 * 1024) throw new Error(`Pasted image > ${MAX_SIZE_MB}MB.`);\n        const base64 = await readFileAsBase64(file);\n        return { name: 'pasted-' + Date.now(), url: base64 };\n      });\n      const newImages = await Promise.all(imagePromises);\n      if (newImages.length > 0) {\n         setSelectedImages((prev) => [...prev, ...newImages]);\n         e.preventDefault(); // Prevent pasting as text\n      }\n    } catch (error) {\n      console.error(\"Paste processing error:\", error);\n      showError(`Paste error: ${error.message}`); // Use showError\n    }\n  }, [isEditing, selectedImages.length, showError]);\n\n  const removeImage = useCallback((indexToRemove) => {\n    setSelectedImages((prev) => prev.filter((_, index) => index !== indexToRemove));\n  }, []);\n\n  const triggerFileInput = useCallback(() => {\n    // Logic for triggering file input based on model selection\n    if (!selectedModel && toggleModelSelector) {\n      toggleModelSelector();\n    } else if (selectedModel?.capabilities?.includes('vision')) {\n       fileInputRef.current?.click();\n    } else {\n      showError('Select a model with vision capabilities to upload images.'); // Use showError\n    }\n  }, [selectedModel, toggleModelSelector, showError]);\n\n  const handleCancelEdit = useCallback(() => {\n    if (onCancelEdit) onCancelEdit();\n    setMessage('');\n    setSelectedImages([]);\n  }, [onCancelEdit]);\n\n  const handleStop = useCallback(() => {\n    stopGeneration();\n  }, [stopGeneration]);\n\n  // Wrapper for the inline send/stop button click\n  const handleInlineSendClick = useCallback((e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (isWaitingForResponse) {\n      handleStop();\n    } else {\n      prepareAndSendMessage(); // Call renamed handler\n    }\n    if (isMobile && textareaRef.current) textareaRef.current.blur();\n  }, [isWaitingForResponse, handleStop, prepareAndSendMessage, isMobile]);\n\n  // Render Logic\n  \n  const placeholderText = isEditing \n    ? 'Edit your message...' \n    : isWaitingForResponse\n      ? 'Type your next message while waiting...'\n      : 'Ask anything';\n\n  return (\n    <>\n      {/* Image Previews */} \n      <ImagePreviewList images={selectedImages} onRemoveImage={removeImage} />\n\n      <div className={[\n          styles.ChatInput, \n          isEditing ? styles['ChatInput--editing'] : '', \n          isWaitingForResponse ? styles['ChatInput--waitingForResponse'] : '', \n          isMobile ? styles['ChatInput__mobileView'] : '',\n          isMobile ? (isInitialChat ? styles['ChatInput--mobileInitial'] : styles['ChatInput--mobileWithMessages']) : '',\n        ].filter(Boolean).join(' ')}\n      >\n        {/* Inline Error Message */} \n        {inputError && (\n          <div className={styles.ChatInput__error} role=\"alert\">\n            {inputError}\n          </div>\n        )}\n\n        {/* Hidden file input */} \n        <input\n          type=\"file\"\n          ref={fileInputRef}\n          style={{ display: 'none' }}\n          accept=\"image/jpeg, image/png, image/gif, image/webp\"\n          multiple\n          onChange={handleImageSelection}\n        />\n\n        {/* Text Area and Inline Button */} \n        <ChatInputTextArea \n           ref={textareaRef}\n           value={message}\n           onChange={handleChange}\n           onKeyDown={handleKeyDown}\n           onPaste={handlePaste}\n           placeholder={placeholderText}\n           disabled={disabled}\n           isEditing={isEditing}\n           isWaitingForResponse={isWaitingForResponse}\n           selectedModel={selectedModel}\n           onSendClick={handleInlineSendClick}\n        />\n        \n        {/* Action Button Row */} \n        <ChatInputActionRow \n           isMobile={isMobile}\n           isEditing={isEditing}\n           disabled={disabled}\n           selectedModel={selectedModel}\n           onNewChat={newChat}\n           onUploadClick={triggerFileInput}\n           onCancelEdit={handleCancelEdit}\n           onToggleModelSelector={toggleModelSelector}\n        />\n      </div>\n    </>\n  );\n});\n\n// Display name\nChatInput.displayName = 'ChatInput';\n\n// PropTypes\nChatInput.propTypes = {\n  disabled: PropTypes.bool,\n  selectedModel: PropTypes.shape({ // Define model shape if needed\n    // Add specific model properties here if known/required\n    id: PropTypes.string,\n    name: PropTypes.string,\n    // ... other properties\n  }), \n  isStaticLayout: PropTypes.bool,\n  editingMessage: PropTypes.shape({ // Define message shape for editing\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    content: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.shape({ // Support complex content\n        type: PropTypes.string.isRequired,\n        text: PropTypes.string,\n        image_url: PropTypes.shape({\n          url: PropTypes.string.isRequired\n        })\n      }))\n    ]).isRequired\n  }),\n  onCancelEdit: PropTypes.func,\n  isStreaming: PropTypes.bool,\n  toggleModelSelector: PropTypes.func,\n  onFocus: PropTypes.func,\n  isInitialChat: PropTypes.bool,\n  onSendMessage: PropTypes.func.isRequired,\n};\n\nexport default ChatInput; "],"names":["ImagePreviewList","_ref","images","onRemoveImage","length","_jsx","className","children","map","image","index","_jsxs","src","url","alt","onClick","title","XIcon","size","React","ChatInputTextArea","forwardRef","ref","value","onChange","onKeyDown","onPaste","placeholder","disabled","isEditing","isWaitingForResponse","selectedModel","onSendClick","sendButtonLabel","sendButtonTitle","styles","rows","trim","type","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x","y","rx","ry","CheckIcon","PaperAirplaneIcon","displayName","ChatInputActionRow","_selectedModel$capabi","_selectedModel$capabi2","_selectedModel$capabi3","isMobile","onNewChat","onUploadClick","onCancelEdit","onToggleModelSelector","capabilities","includes","ImageIcon","SearchIcon","LightBulbIcon","KebabHorizontalIcon","PlusIcon","readFileAsBase64","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","error","readAsDataURL","ChatInput","memo","isStaticLayout","editingMessage","isStreaming","toggleModelSelector","onFocus","isInitialChat","onSendMessage","message","setMessage","useState","selectedImages","setSelectedImages","textareaRef","useRef","fileInputRef","setIsMobile","window","innerWidth","useChatState","stopGeneration","newChat","useChatControl","inputError","setInputError","errorTimeoutRef","useEffect","handleResize","addEventListener","removeEventListener","_textareaRef$current","current","focus","textContent","content","Array","isArray","forEach","part","_part$image_url","text","image_url","push","name","setTimeout","_textareaRef$current2","adjustTextareaHeight","useCallback","textarea","newHeight","style","Math","min","scrollHeight","max","inputContainer","closest","setProperty","detectKeyboard","isKeyboard","innerHeight","outerHeight","document","body","classList","toggle","handleFocus","add","handleBlur","remove","showError","clearTimeout","handleChange","e","target","prepareAndSendMessage","hasText","hasImages","contentPayload","img","_textareaRef$current3","handleKeyDown","key","shiftKey","preventDefault","handleImageSelection","async","files","from","event","imagePromises","startsWith","Error","MAX_SIZE_MB","base64","newImages","all","prev","handlePaste","_e$clipboardData","items","clipboardData","imageItems","filter","item","getAsFile","Date","now","removeImage","indexToRemove","_","triggerFileInput","_fileInputRef$current","click","handleCancelEdit","handleStop","handleInlineSendClick","stopPropagation","blur","placeholderText","_Fragment","Boolean","join","ChatInput__error","role","display","accept","multiple"],"sourceRoot":""}